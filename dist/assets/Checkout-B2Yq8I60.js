import{c as D,q,u as A,b as M,r as c,j as e,d as j,L as m}from"./index-DLVWYm2D.js";import{A as B}from"./arrow-left-DlpQCUsF.js";import{C as g}from"./circle-check-BuiVC55C.js";import{T as N}from"./truck-12nforty.js";import{C as F}from"./credit-card-RA6uvHlF.js";import{L as y}from"./landmark-CkS6Funp.js";import{M as L}from"./map-pin-CnFp7w5R.js";import{B as _}from"./building-2-BrPQ2b9A.js";const z=[["path",{d:"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727",key:"yr8idg"}]],v=D("bitcoin",z);function Q(){const{items:o,cartSubtotal:w,discountAmount:h,cartTotal:d,clearCart:S}=q(),{user:l,isPartner:k}=A(),{addOrder:C}=M(),[r,x]=c.useState(1),[p,b]=c.useState(!1),[u,P]=c.useState(""),[i,f]=c.useState("bank_transfer"),[t,$]=c.useState({fullName:l?.name||"",email:l?.email||"",phone:"",address:"",city:"",state:"",zip:"",country:"",notes:""}),n=(s,a)=>{$(T=>({...T,[s]:a}))},O=t.fullName.trim()!==""&&t.email.trim()!==""&&t.phone.trim()!==""&&t.address.trim()!==""&&t.city.trim()!==""&&t.country.trim()!=="",I=async()=>{if(o.length===0||!l)return;b(!0);const s=`ORD-${Math.floor(1e3+Math.random()*9e3)}-${Date.now().toString().slice(-4)}`;try{await C({id:s,customerId:l.id,customerName:l.name,items:o.map(a=>({productId:a.product.id,name:a.product.name,quantity:a.quantity,price:a.product.price})),total:d,status:"pending",paymentStatus:"pending",createdAt:new Date().toISOString().split("T")[0],userType:l.role==="partner"?"partner":"customer",partnerId:l.partnerId||(l.role==="partner"?l.id:void 0),shippingName:t.fullName,shippingEmail:t.email,shippingPhone:t.phone,shippingAddress:t.address,shippingCity:t.city,shippingState:t.state,shippingZip:t.zip,shippingCountry:t.country,shippingNotes:t.notes,paymentMethod:i}),P(s),S(),x(3)}catch(a){console.error("Order placement failed:",a)}finally{b(!1)}};return o.length===0&&r!==3?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center py-12 px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(j,{className:"h-10 w-10 text-slate-400"})}),e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-slate-500 mb-6",children:"Add some products before checking out."}),e.jsx(m,{to:"/products",className:"inline-flex items-center px-5 py-2.5 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors font-medium",children:"Browse Products"})]})}):e.jsx("div",{className:"min-h-screen bg-slate-50 py-8 md:py-12",children:e.jsxs("div",{className:"container mx-auto px-4 md:px-6 max-w-5xl",children:[e.jsxs(m,{to:"/products",className:"inline-flex items-center text-sm text-slate-500 hover:text-slate-900 mb-6 transition-colors",children:[e.jsx(B,{className:"h-4 w-4 mr-2"})," Continue Shopping"]}),e.jsx("div",{className:"flex items-center justify-center mb-10 gap-2",children:[{num:1,label:"Shipping"},{num:2,label:"Payment"},{num:3,label:"Confirmation"}].map((s,a)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold transition-colors
                ${r>=s.num?"bg-slate-900 text-white":"bg-slate-200 text-slate-500"}`,children:r>s.num?e.jsx(g,{className:"h-4 w-4"}):s.num}),e.jsx("span",{className:`ml-2 text-sm font-medium hidden sm:inline ${r>=s.num?"text-slate-900":"text-slate-400"}`,children:s.label}),a<2&&e.jsx("div",{className:`w-12 sm:w-20 h-0.5 mx-3 ${r>s.num?"bg-slate-900":"bg-slate-200"}`})]},s.num))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[r===1&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 md:p-8 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"h-5 w-5 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Shipping Information"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Where should we send your order?"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Full Name *"}),e.jsx("input",{type:"text",required:!0,value:t.fullName,onChange:s=>n("fullName",s.target.value),className:"w-full h-11 px-4 rounded-lg border border-slate-200 focus:ring-2 focus:ring-slate-200 focus:border-slate-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:t.email,onChange:s=>n("email",s.target.value),className:"w-full h-11 px-4 rounded-lg border border-slate-200 focus:ring-2 focus:ring-slate-200 focus:border-slate-300"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Phone Number *"}),e.jsx("input",{type:"tel",required:!0,value:t.phone,onChange:s=>n("phone",s.target.value),className:"w-full h-11 px-4 rounded-lg border border-slate-200 focus:ring-2 focus:ring-slate-200 focus:border-slate-300",placeholder:"+1 (555) 000-0000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Street Address *"}),e.jsx("input",{type:"text",required:!0,value:t.address,onChange:s=>n("address",s.target.value),className:"w-full h-11 px-4 rounded-lg border border-slate-200 focus:ring-2 focus:ring-slate-200 focus:border-slate-300",placeholder:"123 Main St, Apt 4"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"City *"}),e.jsx("input",{type:"text",required:!0,value:t.city,onChange:s=>n("city",s.target.value),className:"w-full h-11 px-4 rounded-lg border border-slate-200 focus:ring-2 focus:ring-slate-200 focus:border-slate-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"State"}),e.jsx("input",{type:"text",value:t.state,onChange:s=>n("state",s.target.value),className:"w-full h-11 px-4 rounded-lg border border-slate-200 focus:ring-2 focus:ring-slate-200 focus:border-slate-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"ZIP"}),e.jsx("input",{type:"text",value:t.zip,onChange:s=>n("zip",s.target.value),className:"w-full h-11 px-4 rounded-lg border border-slate-200 focus:ring-2 focus:ring-slate-200 focus:border-slate-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Country *"}),e.jsx("input",{type:"text",required:!0,value:t.country,onChange:s=>n("country",s.target.value),className:"w-full h-11 px-4 rounded-lg border border-slate-200 focus:ring-2 focus:ring-slate-200 focus:border-slate-300",placeholder:"US"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Order Notes (optional)"}),e.jsx("textarea",{rows:2,value:t.notes,onChange:s=>n("notes",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-200 focus:ring-2 focus:ring-slate-200 focus:border-slate-300 resize-none",placeholder:"Special delivery instructions..."})]})]}),e.jsx("button",{onClick:()=>x(2),disabled:!O,className:"w-full mt-6 h-12 bg-slate-900 text-white rounded-lg font-medium hover:bg-slate-800 transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:"Continue to Payment"})]}),r===2&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 md:p-8 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center",children:e.jsx(F,{className:"h-5 w-5 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Payment Method"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Select how you'd like to pay"})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("button",{onClick:()=>f("bank_transfer"),className:`w-full p-4 rounded-xl border-2 text-left transition-all flex items-start gap-4
                      ${i==="bank_transfer"?"border-slate-900 bg-slate-50":"border-slate-200 hover:border-slate-300"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center shrink-0
                      ${i==="bank_transfer"?"bg-slate-900 text-white":"bg-slate-100 text-slate-500"}`,children:e.jsx(y,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:"Bank Transfer"}),e.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Transfer directly to our bank account. Order ships after payment confirmation."})]})]}),e.jsxs("button",{onClick:()=>f("crypto"),className:`w-full p-4 rounded-xl border-2 text-left transition-all flex items-start gap-4
                      ${i==="crypto"?"border-slate-900 bg-slate-50":"border-slate-200 hover:border-slate-300"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center shrink-0
                      ${i==="crypto"?"bg-slate-900 text-white":"bg-slate-100 text-slate-500"}`,children:e.jsx(v,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:"Cryptocurrency"}),e.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Pay with BTC, ETH, or USDT. Details provided after order placement."})]})]})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6",children:[e.jsx("p",{className:"text-sm font-medium text-amber-800 mb-1",children:"How it works:"}),e.jsxs("ol",{className:"text-sm text-amber-700 list-decimal list-inside space-y-1",children:[e.jsx("li",{children:"Place your order below"}),e.jsx("li",{children:"You'll receive payment details on the confirmation page"}),e.jsx("li",{children:"Send payment within 48 hours"}),e.jsx("li",{children:"We verify and ship your order"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>x(1),className:"px-6 h-12 border border-slate-200 rounded-lg font-medium text-slate-700 hover:bg-slate-50 transition-colors",children:"Back"}),e.jsx("button",{onClick:I,disabled:p,className:"flex-1 h-12 bg-slate-900 text-white rounded-lg font-medium hover:bg-slate-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:p?"Placing Order...":`Place Order â€” $${d.toFixed(2)}`})]})]}),r===3&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 md:p-8 shadow-sm",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(g,{className:"h-8 w-8 text-emerald-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Order Placed Successfully!"}),e.jsxs("p",{className:"text-slate-500",children:["Order ID: ",e.jsx("span",{className:"font-mono font-medium text-slate-700",children:u})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[i==="bank_transfer"?e.jsx(y,{className:"h-5 w-5"}):e.jsx(v,{className:"h-5 w-5"}),"Payment Instructions"]}),i==="bank_transfer"?e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-200",children:[e.jsx("span",{className:"text-slate-500",children:"Bank"}),e.jsx("span",{className:"font-medium text-slate-900",children:"Contact us for details"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-200",children:[e.jsx("span",{className:"text-slate-500",children:"Reference"}),e.jsx("span",{className:"font-mono font-medium text-slate-900",children:u})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-200",children:[e.jsx("span",{className:"text-slate-500",children:"Amount"}),e.jsxs("span",{className:"font-bold text-slate-900",children:["$",d.toFixed(2)," USD"]})]}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Please include your Order ID as the payment reference. We will confirm your payment and ship within 1-2 business days."})]}):e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-200",children:[e.jsx("span",{className:"text-slate-500",children:"Amount"}),e.jsxs("span",{className:"font-bold text-slate-900",children:["$",d.toFixed(2)," USD equivalent"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-200",children:[e.jsx("span",{className:"text-slate-500",children:"Reference"}),e.jsx("span",{className:"font-mono font-medium text-slate-900",children:u})]}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Please contact us at our support email with your Order ID to receive the wallet address for payment. We accept BTC, ETH, and USDT."})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"})," Shipping To"]}),e.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[e.jsx("p",{className:"font-medium text-slate-900",children:t.fullName}),e.jsx("p",{children:t.address}),e.jsxs("p",{children:[t.city,t.state?`, ${t.state}`:""," ",t.zip]}),e.jsx("p",{children:t.country}),e.jsx("p",{className:"text-slate-500",children:t.phone})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(m,{to:"/dashboard",className:"flex-1 h-12 bg-slate-900 text-white rounded-lg font-medium hover:bg-slate-800 transition-colors flex items-center justify-center",children:"View My Orders"}),e.jsx(m,{to:"/products",className:"flex-1 h-12 border border-slate-200 rounded-lg font-medium text-slate-700 hover:bg-slate-50 transition-colors flex items-center justify-center",children:"Continue Shopping"})]})]})]}),r!==3&&e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 shadow-sm sticky top-24",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5"})," Order Summary"]}),e.jsx("ul",{className:"space-y-3 mb-4",children:o.map(s=>e.jsxs("li",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-900",children:s.product.name}),e.jsxs("p",{className:"text-slate-400",children:["Qty: ",s.quantity]})]}),e.jsxs("span",{className:"font-medium text-slate-700 ml-4",children:["$",(s.product.price*s.quantity).toFixed(2)]})]},s.product.id))}),e.jsxs("div",{className:"border-t border-slate-100 pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Subtotal"}),e.jsxs("span",{className:"text-slate-900",children:["$",w.toFixed(2)]})]}),k&&h>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-emerald-600",children:"Partner Discount"}),e.jsxs("span",{className:"text-emerald-600",children:["-$",h.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Shipping"}),e.jsx("span",{className:"text-slate-900",children:"Calculated after payment"})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg pt-2 border-t border-slate-100",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",d.toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-100 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx(_,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Secure & encrypted checkout"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx(N,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Ships within 1-3 business days"})]})]})]})})]})]})})}export{Q as CheckoutPage};
