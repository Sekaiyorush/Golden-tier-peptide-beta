import{c as q,R as V,b as Z,r as S,j as e,P as ke,S as ne,f as Q,X as ue,d as hs,U as de,C as Te,u as Ke,s as xe,e as Me,g as et,T as ps,M as st,h as tt,i as Ie,k as fs,L as oe,l as at,m as rt,n as lt,o as nt,p as it,q as ot,t as J}from"./index-zV9odv38.js";import{P as gs,C as Re}from"./pen-D4DjMf0r.js";import{T as Xe}from"./trash-2-Ze3jHYhD.js";import{P as te,f as _e,a as bs}from"./formatDate-Bz7m-WQS.js";import{U as ce}from"./users-c_PrJnzs.js";import{P as js,T as je,C as De,a as ct,D as we,L as Ns,g as rs,U as vs,A as dt}from"./invitations-Cawd8mXZ.js";import{M as ys}from"./mail-D0LxlggC.js";import{P as ws}from"./phone-rgN7ixIA.js";import{B as mt}from"./building-2-2Upp2T9C.js";import{E as xt}from"./eye-off-BSTVGHXd.js";import{E as ks}from"./eye-DiSX4lNb.js";import{C as Ve}from"./circle-check-VMs1QZpj.js";import{M as ut}from"./message-square-BpdV0w_g.js";import{L as ls}from"./lock-rKyoM4CP.js";import{S as ht}from"./send-BGWDEjiT.js";import{T as ns}from"./truck-CC0t-wNM.js";import{F as Je}from"./funnel-DFNXgQW_.js";import{C as ze}from"./chevron-down-BZ1umkIy.js";import{C as Cs}from"./chevron-right-uptOfakE.js";const pt=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],ft=q("arrow-down-right",pt);const gt=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],bt=q("bell",gt);const jt=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ss=q("chart-column",jt);const Nt=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],As=q("chevron-left",Nt);const vt=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ze=q("chevron-up",vt);const yt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],wt=q("circle-user",yt);const kt=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Ct=q("crown",kt);const St=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],es=q("download",St);const At=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],is=q("key",At);const Pt=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],He=q("network",Pt);const Mt=[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]],Rt=q("package-search",Mt);const Et=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Tt=q("printer",Et);const It=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],ss=q("qr-code",It);const _t=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ps=q("refresh-cw",_t);const Dt=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Lt=q("save",Dt);const Ot=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ms=q("settings",Ot);const zt=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$t=q("square-check-big",zt);const Bt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ut=q("target",Bt);const Ft=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Ee=q("trending-down",Ft);var Qt=Object.defineProperty,Le=Object.getOwnPropertySymbols,Rs=Object.prototype.hasOwnProperty,Es=Object.prototype.propertyIsEnumerable,os=(s,o,a)=>o in s?Qt(s,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[o]=a,qe=(s,o)=>{for(var a in o||(o={}))Rs.call(o,a)&&os(s,a,o[a]);if(Le)for(var a of Le(o))Es.call(o,a)&&os(s,a,o[a]);return s},We=(s,o)=>{var a={};for(var c in s)Rs.call(s,c)&&o.indexOf(c)<0&&(a[c]=s[c]);if(s!=null&&Le)for(var c of Le(s))o.indexOf(c)<0&&Es.call(s,c)&&(a[c]=s[c]);return a};var he;(s=>{const o=class O{constructor(l,n,t,r){if(this.version=l,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],l<O.MIN_VERSION||l>O.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let x=[];for(let g=0;g<this.size;g++)x.push(!1);for(let g=0;g<this.size;g++)this.modules.push(x.slice()),this.isFunction.push(x.slice());this.drawFunctionPatterns();const N=this.addEccAndInterleave(t);if(this.drawCodewords(N),r==-1){let g=1e9;for(let m=0;m<8;m++){this.applyMask(m),this.drawFormatBits(m);const b=this.getPenaltyScore();b<g&&(r=m,g=b),this.applyMask(m)}}u(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(l,n){const t=s.QrSegment.makeSegments(l);return O.encodeSegments(t,n)}static encodeBinary(l,n){const t=s.QrSegment.makeBytes(l);return O.encodeSegments([t],n)}static encodeSegments(l,n,t=1,r=40,x=-1,N=!0){if(!(O.MIN_VERSION<=t&&t<=r&&r<=O.MAX_VERSION)||x<-1||x>7)throw new RangeError("Invalid value");let g,m;for(g=t;;g++){const d=O.getNumDataCodewords(g,n)*8,i=f.getTotalBits(l,g);if(i<=d){m=i;break}if(g>=r)throw new RangeError("Data too long")}for(const d of[O.Ecc.MEDIUM,O.Ecc.QUARTILE,O.Ecc.HIGH])N&&m<=O.getNumDataCodewords(g,d)*8&&(n=d);let b=[];for(const d of l){a(d.mode.modeBits,4,b),a(d.numChars,d.mode.numCharCountBits(g),b);for(const i of d.getData())b.push(i)}u(b.length==m);const R=O.getNumDataCodewords(g,n)*8;u(b.length<=R),a(0,Math.min(4,R-b.length),b),a(0,(8-b.length%8)%8,b),u(b.length%8==0);for(let d=236;b.length<R;d^=253)a(d,8,b);let E=[];for(;E.length*8<b.length;)E.push(0);return b.forEach((d,i)=>E[i>>>3]|=d<<7-(i&7)),new O(g,n,E,x)}getModule(l,n){return 0<=l&&l<this.size&&0<=n&&n<this.size&&this.modules[n][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let t=0;t<this.size;t++)this.setFunctionModule(6,t,t%2==0),this.setFunctionModule(t,6,t%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),n=l.length;for(let t=0;t<n;t++)for(let r=0;r<n;r++)t==0&&r==0||t==0&&r==n-1||t==n-1&&r==0||this.drawAlignmentPattern(l[t],l[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const n=this.errorCorrectionLevel.formatBits<<3|l;let t=n;for(let x=0;x<10;x++)t=t<<1^(t>>>9)*1335;const r=(n<<10|t)^21522;u(r>>>15==0);for(let x=0;x<=5;x++)this.setFunctionModule(8,x,c(r,x));this.setFunctionModule(8,7,c(r,6)),this.setFunctionModule(8,8,c(r,7)),this.setFunctionModule(7,8,c(r,8));for(let x=9;x<15;x++)this.setFunctionModule(14-x,8,c(r,x));for(let x=0;x<8;x++)this.setFunctionModule(this.size-1-x,8,c(r,x));for(let x=8;x<15;x++)this.setFunctionModule(8,this.size-15+x,c(r,x));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let t=0;t<12;t++)l=l<<1^(l>>>11)*7973;const n=this.version<<12|l;u(n>>>18==0);for(let t=0;t<18;t++){const r=c(n,t),x=this.size-11+t%3,N=Math.floor(t/3);this.setFunctionModule(x,N,r),this.setFunctionModule(N,x,r)}}drawFinderPattern(l,n){for(let t=-4;t<=4;t++)for(let r=-4;r<=4;r++){const x=Math.max(Math.abs(r),Math.abs(t)),N=l+r,g=n+t;0<=N&&N<this.size&&0<=g&&g<this.size&&this.setFunctionModule(N,g,x!=2&&x!=4)}}drawAlignmentPattern(l,n){for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)this.setFunctionModule(l+r,n+t,Math.max(Math.abs(r),Math.abs(t))!=1)}setFunctionModule(l,n,t){this.modules[n][l]=t,this.isFunction[n][l]=!0}addEccAndInterleave(l){const n=this.version,t=this.errorCorrectionLevel;if(l.length!=O.getNumDataCodewords(n,t))throw new RangeError("Invalid argument");const r=O.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][n],x=O.ECC_CODEWORDS_PER_BLOCK[t.ordinal][n],N=Math.floor(O.getNumRawDataModules(n)/8),g=r-N%r,m=Math.floor(N/r);let b=[];const R=O.reedSolomonComputeDivisor(x);for(let d=0,i=0;d<r;d++){let A=l.slice(i,i+m-x+(d<g?0:1));i+=A.length;const p=O.reedSolomonComputeRemainder(A,R);d<g&&A.push(0),b.push(A.concat(p))}let E=[];for(let d=0;d<b[0].length;d++)b.forEach((i,A)=>{(d!=m-x||A>=g)&&E.push(i[d])});return u(E.length==N),E}drawCodewords(l){if(l.length!=Math.floor(O.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){t==6&&(t=5);for(let r=0;r<this.size;r++)for(let x=0;x<2;x++){const N=t-x,m=(t+1&2)==0?this.size-1-r:r;!this.isFunction[m][N]&&n<l.length*8&&(this.modules[m][N]=c(l[n>>>3],7-(n&7)),n++)}}u(n==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let n=0;n<this.size;n++)for(let t=0;t<this.size;t++){let r;switch(l){case 0:r=(t+n)%2==0;break;case 1:r=n%2==0;break;case 2:r=t%3==0;break;case 3:r=(t+n)%3==0;break;case 4:r=(Math.floor(t/3)+Math.floor(n/2))%2==0;break;case 5:r=t*n%2+t*n%3==0;break;case 6:r=(t*n%2+t*n%3)%2==0;break;case 7:r=((t+n)%2+t*n%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[n][t]&&r&&(this.modules[n][t]=!this.modules[n][t])}}getPenaltyScore(){let l=0;for(let x=0;x<this.size;x++){let N=!1,g=0,m=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[x][b]==N?(g++,g==5?l+=O.PENALTY_N1:g>5&&l++):(this.finderPenaltyAddHistory(g,m),N||(l+=this.finderPenaltyCountPatterns(m)*O.PENALTY_N3),N=this.modules[x][b],g=1);l+=this.finderPenaltyTerminateAndCount(N,g,m)*O.PENALTY_N3}for(let x=0;x<this.size;x++){let N=!1,g=0,m=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[b][x]==N?(g++,g==5?l+=O.PENALTY_N1:g>5&&l++):(this.finderPenaltyAddHistory(g,m),N||(l+=this.finderPenaltyCountPatterns(m)*O.PENALTY_N3),N=this.modules[b][x],g=1);l+=this.finderPenaltyTerminateAndCount(N,g,m)*O.PENALTY_N3}for(let x=0;x<this.size-1;x++)for(let N=0;N<this.size-1;N++){const g=this.modules[x][N];g==this.modules[x][N+1]&&g==this.modules[x+1][N]&&g==this.modules[x+1][N+1]&&(l+=O.PENALTY_N2)}let n=0;for(const x of this.modules)n=x.reduce((N,g)=>N+(g?1:0),n);const t=this.size*this.size,r=Math.ceil(Math.abs(n*20-t*10)/t)-1;return u(0<=r&&r<=9),l+=r*O.PENALTY_N4,u(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,n=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let t=[6];for(let r=this.size-7;t.length<l;r-=n)t.splice(1,0,r);return t}}static getNumRawDataModules(l){if(l<O.MIN_VERSION||l>O.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*l+128)*l+64;if(l>=2){const t=Math.floor(l/7)+2;n-=(25*t-10)*t-55,l>=7&&(n-=36)}return u(208<=n&&n<=29648),n}static getNumDataCodewords(l,n){return Math.floor(O.getNumRawDataModules(l)/8)-O.ECC_CODEWORDS_PER_BLOCK[n.ordinal][l]*O.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let n=[];for(let r=0;r<l-1;r++)n.push(0);n.push(1);let t=1;for(let r=0;r<l;r++){for(let x=0;x<n.length;x++)n[x]=O.reedSolomonMultiply(n[x],t),x+1<n.length&&(n[x]^=n[x+1]);t=O.reedSolomonMultiply(t,2)}return n}static reedSolomonComputeRemainder(l,n){let t=n.map(r=>0);for(const r of l){const x=r^t.shift();t.push(0),n.forEach((N,g)=>t[g]^=O.reedSolomonMultiply(N,x))}return t}static reedSolomonMultiply(l,n){if(l>>>8||n>>>8)throw new RangeError("Byte out of range");let t=0;for(let r=7;r>=0;r--)t=t<<1^(t>>>7)*285,t^=(n>>>r&1)*l;return u(t>>>8==0),t}finderPenaltyCountPatterns(l){const n=l[1];u(n<=this.size*3);const t=n>0&&l[2]==n&&l[3]==n*3&&l[4]==n&&l[5]==n;return(t&&l[0]>=n*4&&l[6]>=n?1:0)+(t&&l[6]>=n*4&&l[0]>=n?1:0)}finderPenaltyTerminateAndCount(l,n,t){return l&&(this.finderPenaltyAddHistory(n,t),n=0),n+=this.size,this.finderPenaltyAddHistory(n,t),this.finderPenaltyCountPatterns(t)}finderPenaltyAddHistory(l,n){n[0]==0&&(l+=this.size),n.pop(),n.unshift(l)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],s.QrCode=o;function a(y,l,n){if(l<0||l>31||y>>>l)throw new RangeError("Value out of range");for(let t=l-1;t>=0;t--)n.push(y>>>t&1)}function c(y,l){return(y>>>l&1)!=0}function u(y){if(!y)throw new Error("Assertion error")}const h=class F{constructor(l,n,t){if(this.mode=l,this.numChars=n,this.bitData=t,n<0)throw new RangeError("Invalid argument");this.bitData=t.slice()}static makeBytes(l){let n=[];for(const t of l)a(t,8,n);return new F(F.Mode.BYTE,l.length,n)}static makeNumeric(l){if(!F.isNumeric(l))throw new RangeError("String contains non-numeric characters");let n=[];for(let t=0;t<l.length;){const r=Math.min(l.length-t,3);a(parseInt(l.substring(t,t+r),10),r*3+1,n),t+=r}return new F(F.Mode.NUMERIC,l.length,n)}static makeAlphanumeric(l){if(!F.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let n=[],t;for(t=0;t+2<=l.length;t+=2){let r=F.ALPHANUMERIC_CHARSET.indexOf(l.charAt(t))*45;r+=F.ALPHANUMERIC_CHARSET.indexOf(l.charAt(t+1)),a(r,11,n)}return t<l.length&&a(F.ALPHANUMERIC_CHARSET.indexOf(l.charAt(t)),6,n),new F(F.Mode.ALPHANUMERIC,l.length,n)}static makeSegments(l){return l==""?[]:F.isNumeric(l)?[F.makeNumeric(l)]:F.isAlphanumeric(l)?[F.makeAlphanumeric(l)]:[F.makeBytes(F.toUtf8ByteArray(l))]}static makeEci(l){let n=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)a(l,8,n);else if(l<16384)a(2,2,n),a(l,14,n);else if(l<1e6)a(6,3,n),a(l,21,n);else throw new RangeError("ECI assignment value out of range");return new F(F.Mode.ECI,0,n)}static isNumeric(l){return F.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return F.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,n){let t=0;for(const r of l){const x=r.mode.numCharCountBits(n);if(r.numChars>=1<<x)return 1/0;t+=4+x+r.bitData.length}return t}static toUtf8ByteArray(l){l=encodeURI(l);let n=[];for(let t=0;t<l.length;t++)l.charAt(t)!="%"?n.push(l.charCodeAt(t)):(n.push(parseInt(l.substring(t+1,t+3),16)),t+=2);return n}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let f=h;s.QrSegment=h})(he||(he={}));(s=>{(o=>{const a=class{constructor(u,h){this.ordinal=u,this.formatBits=h}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2),o.Ecc=a})(s.QrCode||(s.QrCode={}))})(he||(he={}));(s=>{(o=>{const a=class{constructor(u,h){this.modeBits=u,this.numBitsCharCount=h}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),o.Mode=a})(s.QrSegment||(s.QrSegment={}))})(he||(he={}));var be=he;var Gt={L:be.QrCode.Ecc.LOW,M:be.QrCode.Ecc.MEDIUM,Q:be.QrCode.Ecc.QUARTILE,H:be.QrCode.Ecc.HIGH},Ts=128,Is="L",_s="#FFFFFF",Ds="#000000",Ls=!1,Os=1,Vt=4,Ht=0,qt=.1;function zs(s,o=0){const a=[];return s.forEach(function(c,u){let h=null;c.forEach(function(f,y){if(!f&&h!==null){a.push(`M${h+o} ${u+o}h${y-h}v1H${h+o}z`),h=null;return}if(y===c.length-1){if(!f)return;h===null?a.push(`M${y+o},${u+o} h1v1H${y+o}z`):a.push(`M${h+o},${u+o} h${y+1-h}v1H${h+o}z`);return}f&&h===null&&(h=y)})}),a.join("")}function $s(s,o){return s.slice().map((a,c)=>c<o.y||c>=o.y+o.h?a:a.map((u,h)=>h<o.x||h>=o.x+o.w?u:!1))}function Wt(s,o,a,c){if(c==null)return null;const u=s.length+a*2,h=Math.floor(o*qt),f=u/o,y=(c.width||h)*f,l=(c.height||h)*f,n=c.x==null?s.length/2-y/2:c.x*f,t=c.y==null?s.length/2-l/2:c.y*f,r=c.opacity==null?1:c.opacity;let x=null;if(c.excavate){let g=Math.floor(n),m=Math.floor(t),b=Math.ceil(y+n-g),R=Math.ceil(l+t-m);x={x:g,y:m,w:b,h:R}}const N=c.crossOrigin;return{x:n,y:t,h:l,w:y,excavation:x,opacity:r,crossOrigin:N}}function Yt(s,o){return o!=null?Math.max(Math.floor(o),0):s?Vt:Ht}function Bs({value:s,level:o,minVersion:a,includeMargin:c,marginSize:u,imageSettings:h,size:f,boostLevel:y}){let l=V.useMemo(()=>{const g=(Array.isArray(s)?s:[s]).reduce((m,b)=>(m.push(...be.QrSegment.makeSegments(b)),m),[]);return be.QrCode.encodeSegments(g,Gt[o],a,void 0,void 0,y)},[s,o,a,y]);const{cells:n,margin:t,numCells:r,calculatedImageSettings:x}=V.useMemo(()=>{let N=l.getModules();const g=Yt(c,u),m=N.length+g*2,b=Wt(N,f,g,h);return{cells:N,margin:g,numCells:m,calculatedImageSettings:b}},[l,f,h,c,u]);return{qrcode:l,margin:t,cells:n,numCells:r,calculatedImageSettings:x}}var Kt=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Xt=V.forwardRef(function(o,a){const c=o,{value:u,size:h=Ts,level:f=Is,bgColor:y=_s,fgColor:l=Ds,includeMargin:n=Ls,minVersion:t=Os,boostLevel:r,marginSize:x,imageSettings:N}=c,m=We(c,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:b}=m,R=We(m,["style"]),E=N?.src,d=V.useRef(null),i=V.useRef(null),A=V.useCallback(D=>{d.current=D,typeof a=="function"?a(D):a&&(a.current=D)},[a]),[p,k]=V.useState(!1),{margin:w,cells:I,numCells:j,calculatedImageSettings:T}=Bs({value:u,level:f,minVersion:t,boostLevel:r,includeMargin:n,marginSize:x,imageSettings:N,size:h});V.useEffect(()=>{if(d.current!=null){const D=d.current,z=D.getContext("2d");if(!z)return;let G=I;const W=i.current,_=T!=null&&W!==null&&W.complete&&W.naturalHeight!==0&&W.naturalWidth!==0;_&&T.excavation!=null&&(G=$s(I,T.excavation));const ae=window.devicePixelRatio||1;D.height=D.width=h*ae;const ee=h/j*ae;z.scale(ee,ee),z.fillStyle=y,z.fillRect(0,0,j,j),z.fillStyle=l,Kt?z.fill(new Path2D(zs(G,w))):I.forEach(function(se,K){se.forEach(function(U,Y){U&&z.fillRect(Y+w,K+w,1,1)})}),T&&(z.globalAlpha=T.opacity),_&&z.drawImage(W,T.x+w,T.y+w,T.w,T.h)}}),V.useEffect(()=>{k(!1)},[E]);const B=qe({height:h,width:h},b);let v=null;return E!=null&&(v=V.createElement("img",{src:E,key:E,style:{display:"none"},onLoad:()=>{k(!0)},ref:i,crossOrigin:T?.crossOrigin})),V.createElement(V.Fragment,null,V.createElement("canvas",qe({style:B,height:h,width:h,ref:A,role:"img"},R)),v)});Xt.displayName="QRCodeCanvas";var $e=V.forwardRef(function(o,a){const c=o,{value:u,size:h=Ts,level:f=Is,bgColor:y=_s,fgColor:l=Ds,includeMargin:n=Ls,minVersion:t=Os,boostLevel:r,title:x,marginSize:N,imageSettings:g}=c,m=We(c,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:b,cells:R,numCells:E,calculatedImageSettings:d}=Bs({value:u,level:f,minVersion:t,boostLevel:r,includeMargin:n,marginSize:N,imageSettings:g,size:h});let i=R,A=null;g!=null&&d!=null&&(d.excavation!=null&&(i=$s(R,d.excavation)),A=V.createElement("image",{href:g.src,height:d.h,width:d.w,x:d.x+b,y:d.y+b,preserveAspectRatio:"none",opacity:d.opacity,crossOrigin:d.crossOrigin}));const p=zs(i,b);return V.createElement("svg",qe({height:h,width:h,viewBox:`0 0 ${E} ${E}`,ref:a,role:"img"},m),!!x&&V.createElement("title",null,x),V.createElement("path",{fill:y,d:`M0,0 h${E}v${E}H0z`,shapeRendering:"crispEdges"}),V.createElement("path",{fill:l,d:p,shapeRendering:"crispEdges"}),A)});$e.displayName="QRCodeSVG";function Jt(){const{db:s,addProduct:o,updateProduct:a,deleteProduct:c}=Z(),u=s.products,h=Array.from(new Set(u.map(j=>j.category))).sort(),[f,y]=S.useState(""),[l,n]=S.useState(!1),[t,r]=S.useState(null),[x,N]=S.useState(null),g={name:"",description:"",fullDescription:"",price:"",category:"",purity:"99.0%",stockQuantity:"0",sku:"",benefits:"",dosage:"",imageUrl:"",variants:[]},[m,b]=S.useState(g),R=u.filter(j=>j.name.toLowerCase().includes(f.toLowerCase())||j.sku.toLowerCase().includes(f.toLowerCase())||j.category.toLowerCase().includes(f.toLowerCase())),E=()=>{r(null),b(g),n(!0)},d=j=>{r(j),b({name:j.name,description:j.description,fullDescription:j.fullDescription||"",price:j.price.toString(),category:j.category,purity:j.purity,stockQuantity:j.stockQuantity.toString(),sku:j.sku,benefits:j.benefits?.join(`
`)||"",dosage:j.dosage||"",imageUrl:j.imageUrl||"",variants:(j.variants||[]).map(T=>({sku:T.sku,label:T.label,price:T.price.toString(),stock:T.stock.toString()}))}),n(!0)},i=j=>{confirm("Are you sure you want to delete this product?")&&c(j)},A=()=>{b(j=>({...j,variants:[...j.variants,{sku:"",label:"",price:"",stock:"100"}]}))},p=j=>{b(T=>({...T,variants:T.variants.filter((B,v)=>v!==j)}))},k=(j,T,B)=>{b(v=>({...v,variants:v.variants.map((D,z)=>z===j?{...D,[T]:B}:D)}))},w=j=>{j.preventDefault();const T=m.variants.filter(v=>v.sku&&v.label&&v.price).map(v=>({sku:v.sku,label:v.label,price:parseFloat(v.price)||0,stock:parseInt(v.stock)||0})),B={id:t?.id||Date.now().toString(),name:m.name,description:m.description,fullDescription:m.fullDescription,price:parseFloat(m.price),category:m.category,purity:m.purity,inStock:parseInt(m.stockQuantity)>0,stockQuantity:parseInt(m.stockQuantity),sku:m.sku,benefits:m.benefits.split(`
`).filter(Boolean),dosage:m.dosage,imageUrl:m.imageUrl,createdAt:t?.createdAt||new Date().toISOString().split("T")[0],updatedAt:new Date().toISOString().split("T")[0],variants:T.length>0?T:void 0};t?a(t.id,B):o(B),n(!1)},I=j=>JSON.stringify({id:j.id,sku:j.sku,name:j.name,batch:`BATCH-${Date.now().toString(36).toUpperCase()}`,manufactured:new Date().toISOString().split("T")[0],purity:j.purity});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Products Management"}),e.jsxs("button",{onClick:E,className:"flex items-center space-x-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Product"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search products by name, SKU, or category...",value:f,onChange:j=>y(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{className:"bg-background rounded-lg border border-border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-surface-alt",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"SKU"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Purity"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:R.map(j=>e.jsxs("tr",{className:"hover:bg-surface-alt/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:j.name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate max-w-xs",children:j.description})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:j.sku}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded-full text-xs",children:j.category})}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:j.variants&&j.variants.length>0?e.jsxs("span",{children:["from ",Q(Math.min(...j.variants.map(T=>T.price)))]}):e.jsx("span",{children:Q(j.price)})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:j.variants&&j.variants.length>0?e.jsx("div",{className:"flex flex-col gap-0.5",children:j.variants.map(T=>e.jsxs("span",{className:`text-xs ${T.stock<20?"text-destructive":"text-green-600"}`,children:[T.label,": ",T.stock]},T.sku))}):e.jsx("span",{className:`${j.stockQuantity<20?"text-destructive":"text-green-600"}`,children:j.stockQuantity})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:j.purity}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(j),className:"p-2 hover:bg-surface-alt rounded-lg text-muted-foreground hover:text-primary",title:"Generate QR Code",children:e.jsx(ss,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>d(j),className:"p-2 hover:bg-surface-alt rounded-lg text-muted-foreground hover:text-primary",title:"Edit",children:e.jsx(gs,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>i(j.id),className:"p-2 hover:bg-surface-alt rounded-lg text-muted-foreground hover:text-destructive",title:"Delete",children:e.jsx(Xe,{className:"h-4 w-4"})})]})})]},j.id))})]})}),R.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(te,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No products found"})]})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-background rounded-lg max-w-2xl w-full max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"p-6 border-b border-border flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t?"Edit Product":"Add New Product"}),e.jsx("button",{onClick:()=>n(!1),className:"p-2 hover:bg-surface-alt rounded-lg",children:e.jsx(As,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Product Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:j=>b({...m,name:j.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"SKU *"}),e.jsx("input",{type:"text",required:!0,value:m.sku,onChange:j=>b({...m,sku:j.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Short Description *"}),e.jsx("input",{type:"text",required:!0,value:m.description,onChange:j=>b({...m,description:j.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Description"}),e.jsx("textarea",{rows:3,value:m.fullDescription,onChange:j=>b({...m,fullDescription:j.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Image URL"}),e.jsx("input",{type:"url",value:m.imageUrl,onChange:j=>b({...m,imageUrl:j.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (THB) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:m.price,onChange:j=>b({...m,price:j.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Stock Quantity *"}),e.jsx("input",{type:"number",required:!0,value:m.stockQuantity,onChange:j=>b({...m,stockQuantity:j.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Purity"}),e.jsx("input",{type:"text",value:m.purity,onChange:j=>b({...m,purity:j.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),e.jsx("input",{type:"text",list:"category-options",value:m.category,onChange:j=>b({...m,category:j.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"e.g. Healing, Metabolism",required:!0}),e.jsx("datalist",{id:"category-options",children:h.map(j=>e.jsx("option",{value:j},j))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dosage Protocol"}),e.jsx("input",{type:"text",value:m.dosage,onChange:j=>b({...m,dosage:j.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Benefits (one per line)"}),e.jsx("textarea",{rows:3,value:m.benefits,onChange:j=>b({...m,benefits:j.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"Enter benefits, one per line..."})]}),e.jsxs("div",{className:"border-t border-border pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Product Variants"}),e.jsxs("button",{type:"button",onClick:A,className:"flex items-center gap-1 text-xs text-primary hover:text-primary-dark font-medium",children:[e.jsx(ke,{className:"h-3 w-3"})," Add Variant"]})]}),m.variants.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:'No variants. Product will use base price/stock. Click "Add Variant" for multi-size products.'}),m.variants.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_2fr_1fr_1fr_auto] gap-2 text-xs font-medium text-muted-foreground",children:[e.jsx("span",{children:"SKU"}),e.jsx("span",{children:"Label"}),e.jsx("span",{children:"Price (THB)"}),e.jsx("span",{children:"Stock"}),e.jsx("span",{})]}),m.variants.map((j,T)=>e.jsxs("div",{className:"grid grid-cols-[1fr_2fr_1fr_1fr_auto] gap-2 items-center",children:[e.jsx("input",{type:"text",placeholder:"SKU",value:j.sku,onChange:B=>k(T,"sku",B.target.value),className:"px-2 py-1.5 text-xs border border-input rounded bg-background"}),e.jsx("input",{type:"text",placeholder:"e.g. 5mg × 10 vials",value:j.label,onChange:B=>k(T,"label",B.target.value),className:"px-2 py-1.5 text-xs border border-input rounded bg-background"}),e.jsx("input",{type:"number",placeholder:"Price",value:j.price,onChange:B=>k(T,"price",B.target.value),className:"px-2 py-1.5 text-xs border border-input rounded bg-background"}),e.jsx("input",{type:"number",placeholder:"Stock",value:j.stock,onChange:B=>k(T,"stock",B.target.value),className:"px-2 py-1.5 text-xs border border-input rounded bg-background"}),e.jsx("button",{type:"button",onClick:()=>p(T),className:"p-1 text-muted-foreground hover:text-destructive",children:e.jsx(ue,{className:"h-3.5 w-3.5"})})]},T))]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 border border-input rounded-lg hover:bg-surface-alt transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:t?"Update Product":"Create Product"})]})]})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-background rounded-lg p-6 max-w-sm w-full",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Product QR Code"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x.sku})]}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx($e,{value:I(x),size:200,level:"H",includeMargin:!0})}),e.jsx("div",{className:"text-center text-xs text-muted-foreground mb-4",children:e.jsx("p",{children:"Scan to track product inventory"})}),e.jsx("button",{onClick:()=>N(null),className:"w-full px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:"Close"})]})})]})}const Ue={name:"",email:"",password:"",company:"",phone:"",discountRate:"20",status:"active",referredBy:"",notes:""};function Zt(){const{db:s,addPartner:o,updatePartner:a,deletePartner:c}=Z(),u=s.partners,[h,f]=S.useState(""),[y,l]=S.useState(!1),[n,t]=S.useState(null),[r,x]=S.useState(Ue),[N,g]=S.useState(!1),[m,b]=S.useState(!1),[R,E]=S.useState(null),[d,i]=S.useState(null),A=u.filter(v=>(v.name||"").toLowerCase().includes(h.toLowerCase())||v.email.toLowerCase().includes(h.toLowerCase())||(v.company||"").toLowerCase().includes(h.toLowerCase())),p=()=>{t(null);const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%";let D="";for(let z=0;z<12;z++)D+=v.charAt(Math.floor(Math.random()*v.length));x({...Ue,password:D}),E(null),l(!0)},k=v=>{t(v),x({name:v.name||"",email:v.email||"",password:"",company:v.company||"",phone:v.phone||"",discountRate:v.discountRate?.toString()||"20",status:v.status||"pending",referredBy:v.referredBy||"",notes:v.notes||""}),E(null),l(!0)},w=async v=>{if(window.confirm(`Are you SURE you want to completely delete the partner account for ${v.name}? This action cannot be undone and will permanently remove their access.`)){const D=await c(v.id);D.success||alert(`Failed to delete partner: ${D.error}`)}},I=()=>{l(!1),t(null),x(Ue),E(null)},j=(v,D)=>{navigator.clipboard.writeText(v),i(D),setTimeout(()=>i(null),2e3)},T=async v=>{if(v.preventDefault(),!r.name||!r.email||!r.company||!r.phone){alert("Please fill in all required fields");return}if(g(!0),n)a(n.id,{name:r.name,email:r.email,company:r.company,phone:r.phone,status:r.status,discountRate:parseInt(r.discountRate)||20,referredBy:r.referredBy||void 0,notes:r.notes}),g(!1),I();else{if(!r.password||r.password.length<8){alert("Password must be at least 8 characters"),g(!1);return}const D=await o({name:r.name,email:r.email,password:r.password,company:r.company,phone:r.phone,discountRate:parseInt(r.discountRate)||20,status:r.status,referredBy:r.referredBy||void 0,notes:r.notes});g(!1),D.success?E({email:r.email,password:r.password}):alert(`Error creating partner: ${D.error}`)}},B=v=>{switch(v){case"active":return"bg-emerald-100 text-emerald-700";case"inactive":return"bg-slate-100 text-slate-700";case"pending":return"bg-amber-100 text-amber-700";default:return"bg-slate-100 text-slate-700"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Partners"}),e.jsx("p",{className:"text-slate-500",children:"Manage your partner network and discount rates"})]}),e.jsxs("button",{onClick:p,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Partner"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ce,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Total Partners"})]}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:u.length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(js,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Active"})]}),e.jsx("p",{className:"text-2xl font-semibold text-emerald-600",children:u.filter(v=>v.status==="active").length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(hs,{className:"h-4 w-4 text-indigo-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Total Purchases"})]}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:Q(u.reduce((v,D)=>v+D.totalPurchases,0))})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(je,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Total Resold"})]}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:Q(u.reduce((v,D)=>v+D.totalResold,0))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search partners by name, email, or company...",value:h,onChange:v=>f(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg bg-white focus:ring-2 focus:ring-slate-200"})]}),A.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(v=>e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center",children:e.jsx(de,{className:"h-6 w-6 text-slate-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:v.name||v.email}),e.jsx("p",{className:"text-sm text-slate-500",children:v.company})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs capitalize ${B(v.status)}`,children:v.status})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(ys,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),e.jsx("span",{className:"text-slate-600 truncate",children:v.email})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(ws,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),e.jsx("span",{className:"text-slate-600",children:v.phone})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(mt,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),e.jsxs("span",{className:"text-slate-600",children:["Joined ",_e(v.joinedAt)]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-4 border-t border-slate-100",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Discount"}),e.jsxs("p",{className:"font-semibold text-indigo-600",children:[v.discountRate,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Purchases"}),e.jsx("p",{className:"font-semibold text-slate-900",children:Q(v.totalPurchases)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Resold"}),e.jsx("p",{className:"font-semibold text-emerald-600",children:Q(v.totalResold)})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-1 mt-4 pt-4 border-t border-slate-100",children:[e.jsx("button",{onClick:()=>k(v),className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500 hover:text-slate-900 transition-colors",title:"Edit partner",children:e.jsx(gs,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>w(v),className:"p-2 rounded-lg transition-colors hover:bg-red-50 text-slate-500 hover:text-red-600",title:"Delete partner permanently",children:e.jsx(Xe,{className:"h-4 w-4"})})]})]},v.id))}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[e.jsx(de,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:h?"No partners found matching your search":"No partners yet"}),h&&e.jsx("button",{onClick:()=>f(""),className:"mt-2 text-slate-900 underline",children:"Clear search"})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:R?"Partner Created!":n?"Edit Partner":"Create Partner Account"}),e.jsx("button",{onClick:I,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(ue,{className:"h-4 w-4"})})]}),R?e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-emerald-800 font-medium mb-2",children:"✓ Partner account created successfully!"}),e.jsx("p",{className:"text-emerald-700 text-sm",children:"Share these credentials with the partner so they can log in."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:R.email,className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg bg-slate-50"}),e.jsx("button",{onClick:()=>j(R.email,"email"),className:"p-2 hover:bg-slate-100 rounded-lg",children:d==="email"?e.jsx(Te,{className:"h-4 w-4 text-emerald-500"}):e.jsx(De,{className:"h-4 w-4 text-slate-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:R.password,className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg bg-slate-50 font-mono"}),e.jsx("button",{onClick:()=>j(R.password,"password"),className:"p-2 hover:bg-slate-100 rounded-lg",children:d==="password"?e.jsx(Te,{className:"h-4 w-4 text-emerald-500"}):e.jsx(De,{className:"h-4 w-4 text-slate-400"})})]})]}),e.jsx("button",{onClick:()=>{j(`Email: ${R.email}
Password: ${R.password}`,"both")},className:"w-full py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:d==="both"?"✓ Copied!":"Copy Both to Clipboard"}),e.jsx("button",{onClick:I,className:"w-full py-2 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:"Done"})]}):e.jsxs("form",{onSubmit:T,className:"p-5 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:r.name,onChange:v=>x({...r,name:v.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"Enter partner name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",required:!0,value:r.email,onChange:v=>x({...r,email:v.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"partner@company.com",disabled:!!n})]}),!n&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m?"text":"password",required:!0,value:r.password,onChange:v=>x({...r,password:v.target.value}),className:"w-full px-3 py-2 pr-10 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"Auto-generated password"}),e.jsx("button",{type:"button",onClick:()=>b(!m),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 hover:bg-slate-100 rounded",children:m?e.jsx(xt,{className:"h-4 w-4 text-slate-400"}):e.jsx(ks,{className:"h-4 w-4 text-slate-400"})})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"This password will be shown after creation for you to share with the partner"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Company ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:r.company,onChange:v=>x({...r,company:v.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"Company name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",required:!0,value:r.phone,onChange:v=>x({...r,phone:v.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Discount Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"50",value:r.discountRate,onChange:v=>x({...r,discountRate:v.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),e.jsxs("select",{value:r.status,onChange:v=>x({...r,status:v.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"pending",children:"Pending"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Referred By (Partner)"}),e.jsxs("select",{value:r.referredBy,onChange:v=>x({...r,referredBy:v.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),u.filter(v=>v.id!==n?.id).map(v=>e.jsxs("option",{value:v.id,children:[v.name||v.email," - ",v.company||"N/A"]},v.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes"}),e.jsx("textarea",{rows:3,value:r.notes,onChange:v=>x({...r,notes:v.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"Add notes about this partner..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:N,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50",children:N?"Creating...":n?"Update Partner":"Create Partner Account"})]})]})]})})]})}function ea(){const[s,o]=S.useState(""),[a,c]=S.useState(null),{db:u}=Z(),h=u.partners,f=(m,b=0)=>h.filter(E=>m?E.referredBy===m:!E.referredBy).map(E=>({partner:E,level:b,children:f(E.id,b+1)})),y=f(null),l=h.length,n=h.filter(m=>m.status==="active").length,t=h.reduce((m,b)=>m+b.totalPurchases,0),r=h.reduce((m,b)=>m+b.totalResold,0),x=[...h].sort((m,b)=>b.totalResold-m.totalResold).slice(0,5),N=m=>{switch(m){case"active":return"bg-emerald-100 text-emerald-700";case"inactive":return"bg-slate-100 text-slate-700";case"pending":return"bg-amber-100 text-amber-700";default:return"bg-slate-100 text-slate-700"}},g=({node:m})=>{const b=m.children.length>0;return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-colors ${a?.id===m.partner.id?"bg-slate-900 text-white":"bg-white hover:bg-slate-50 border border-slate-200"}`,onClick:()=>c(m.partner),children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${a?.id===m.partner.id?"bg-white/20":"bg-slate-100"}`,children:e.jsx(de,{className:`h-5 w-5 ${a?.id===m.partner.id?"text-white":"text-slate-500"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-medium truncate ${a?.id===m.partner.id?"text-white":"text-slate-900"}`,children:m.partner.name||m.partner.email}),e.jsx("p",{className:`text-sm truncate ${a?.id===m.partner.id?"text-white/70":"text-slate-500"}`,children:m.partner.company||""})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs ${a?.id===m.partner.id?"bg-white/20 text-white":N(m.partner.status)}`,children:[m.partner.discountRate,"% off"]}),e.jsxs("p",{className:`text-xs mt-1 ${a?.id===m.partner.id?"text-white/70":"text-slate-400"}`,children:[m.children.length," referrals"]})]})]}),b&&e.jsxs("div",{className:"ml-6 mt-2 space-y-2 relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-4 w-px bg-slate-200"}),m.children.map(R=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-6 top-5 w-4 h-px bg-slate-200"}),e.jsx(g,{node:R})]},R.partner.id))]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Partner Network"}),e.jsx("p",{className:"text-slate-500",children:"Visualize and manage your partner hierarchy"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ce,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Total Partners"})]}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:l})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(He,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Active"})]}),e.jsx("p",{className:"text-2xl font-semibold text-emerald-600",children:n})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(js,{className:"h-4 w-4 text-indigo-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Total Purchases"})]}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:Q(t)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(je,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Total Resold"})]}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:Q(r)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-5 border-b border-slate-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Network Hierarchy"}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search partners...",value:s,onChange:m=>o(m.target.value),className:"pl-9 pr-4 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-slate-200"})]})]})}),e.jsx("div",{className:"p-5 max-h-[600px] overflow-auto",children:e.jsx("div",{className:"space-y-2",children:y.map(m=>e.jsx(g,{node:m},m.partner.id))})})]}),e.jsxs("div",{className:"space-y-6",children:[a?e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Partner Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center",children:e.jsx(de,{className:"h-6 w-6 text-slate-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:a.name||a.email}),e.jsx("p",{className:"text-sm text-slate-500",children:a.company||""})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Email"}),e.jsx("span",{className:"text-slate-900",children:a.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Phone"}),e.jsx("span",{className:"text-slate-900",children:a.phone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Discount"}),e.jsxs("span",{className:"font-medium text-indigo-600",children:[a.discountRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Status"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${N(a.status)}`,children:a.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Joined"}),e.jsx("span",{className:"text-slate-900",children:a.joinedAt})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Total Purchases"}),e.jsx("span",{className:"text-slate-900",children:Q(a.totalPurchases)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Total Resold"}),e.jsx("span",{className:"text-slate-900",children:Q(a.totalResold)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Est. Profit"}),e.jsx("span",{className:"font-medium text-emerald-600",children:Q(a.totalResold-a.totalPurchases)})]})]}),a.notes&&e.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-slate-700",children:a.notes})]})]})]}):e.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-200 p-8 text-center",children:[e.jsx(He,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"Select a partner to view details"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Top Performers"}),e.jsx("div",{className:"space-y-3",children:x.map((m,b)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-slate-100 rounded-full flex items-center justify-center text-xs font-medium text-slate-600",children:b+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-slate-900 truncate",children:m.name||m.email}),e.jsx("p",{className:"text-xs text-slate-500",children:m.company})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-slate-900",children:Q(m.totalResold)}),e.jsx("p",{className:"text-xs text-emerald-600",children:"resold"})]})]},m.id))})]})]})]})]})}function sa(){const{db:s}=Z(),o=s.products,[a,c]=S.useState(""),[u,h]=S.useState(null),[f,y]=S.useState(""),[l,n]=S.useState(1),[t,r]=S.useState([]),x=S.useRef(null),N=o.filter(d=>d.name.toLowerCase().includes(a.toLowerCase())||d.sku.toLowerCase().includes(a.toLowerCase())),g=()=>{const d=u?.sku||"BATCH",i=Date.now().toString(36).toUpperCase(),A=Math.random().toString(36).substring(2,5).toUpperCase();return`${d}-${i}-${A}`},m=()=>{if(!u)return;const d=f||g(),i=[];for(let A=0;A<l;A++){const p={id:`${u.id}-${Date.now()}-${A}`,sku:u.sku,name:u.name,batch:d,manufactured:new Date().toISOString().split("T")[0],purity:u.purity,quantity:1};i.push(p)}r(i)},b=(d,i)=>{const A=document.getElementById(`qr-${i}`);if(!A)return;const p=new XMLSerializer().serializeToString(A),k=document.createElement("canvas"),w=k.getContext("2d"),I=new Image;I.onload=()=>{k.width=400,k.height=500,w.fillStyle="white",w.fillRect(0,0,k.width,k.height),w.drawImage(I,50,20,300,300),w.fillStyle="black",w.font="bold 20px Arial",w.textAlign="center",w.fillText(d.name,200,350),w.font="16px Arial",w.fillText(`SKU: ${d.sku}`,200,380),w.fillText(`Batch: ${d.batch}`,200,405),w.fillText(`Purity: ${d.purity}`,200,430),w.fillText(`Mfg: ${d.manufactured}`,200,455);const j=document.createElement("a");j.download=`QR-${d.sku}-${d.batch}.png`,j.href=k.toDataURL("image/png"),j.click()},I.src="data:image/svg+xml;base64,"+btoa(p)},R=()=>{window.print()},E=d=>JSON.stringify({productId:d.id,sku:d.sku,name:d.name,batch:d.batch,manufactured:d.manufactured,purity:d.purity,scanUrl:`https://goldentier.com/track/${d.batch}`});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"QR Code Generator"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate QR codes for product tracking and inventory management"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-background rounded-lg border border-border p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"1. Select Product"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:a,onChange:d=>c(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-auto",children:N.map(d=>e.jsxs("button",{onClick:()=>{h(d),y(g())},className:`w-full flex items-center space-x-3 p-3 rounded-lg border transition-colors text-left ${u?.id===d.id?"border-primary bg-primary/5":"border-border hover:bg-surface-alt"}`,children:[e.jsx(te,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:d.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d.sku})]}),u?.id===d.id&&e.jsx(Ve,{className:"h-5 w-5 text-primary"})]},d.id))})]}),e.jsxs("div",{className:"bg-background rounded-lg border border-border p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"2. Configure QR Code"}),u?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Selected Product"}),e.jsxs("div",{className:"p-3 bg-surface-alt rounded-lg",children:[e.jsx("p",{className:"font-medium",children:u.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.sku})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Batch Number"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:f,onChange:d=>y(d.target.value),className:"flex-1 px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"}),e.jsx("button",{onClick:()=>y(g()),className:"px-3 py-2 bg-surface-alt rounded-lg hover:bg-surface transition-colors",children:e.jsx(ct,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity to Generate"}),e.jsx("input",{type:"number",min:"1",max:"100",value:l,onChange:d=>n(parseInt(d.target.value)||1),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Generate QR Codes"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(te,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Select a product to generate QR codes"})]})]})]}),t.length>0&&e.jsxs("div",{className:"bg-background rounded-lg border border-border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold",children:["Generated QR Codes (",t.length,")"]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:R,className:"flex items-center space-x-2 px-3 py-2 border border-input rounded-lg hover:bg-surface-alt transition-colors",children:[e.jsx(Tt,{className:"h-4 w-4"}),e.jsx("span",{children:"Print All"})]})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:t.map((d,i)=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{ref:x,className:"bg-white p-3 rounded-lg border border-border inline-block",children:[e.jsx($e,{id:`qr-${i}`,value:E(d),size:120,level:"H",includeMargin:!0}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsx("p",{className:"font-medium truncate",children:d.name}),e.jsx("p",{className:"text-muted-foreground truncate",children:d.batch})]})]}),e.jsxs("button",{onClick:()=>b(d,i),className:"mt-2 flex items-center justify-center space-x-1 text-sm text-primary hover:underline mx-auto",children:[e.jsx(es,{className:"h-3 w-3"}),e.jsx("span",{children:"Download"})]})]},d.id))})]}),e.jsxs("div",{className:"bg-background rounded-lg border border-border p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"QR Code Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"p-4 bg-surface-alt rounded-lg",children:[e.jsx("p",{className:"font-medium mb-2",children:"What's included?"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Product ID & SKU"}),e.jsx("li",{children:"• Batch number"}),e.jsx("li",{children:"• Manufacturing date"}),e.jsx("li",{children:"• Purity percentage"}),e.jsx("li",{children:"• Tracking URL"})]})]}),e.jsxs("div",{className:"p-4 bg-surface-alt rounded-lg",children:[e.jsx("p",{className:"font-medium mb-2",children:"Use cases"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Inventory tracking"}),e.jsx("li",{children:"• Quality control"}),e.jsx("li",{children:"• Supply chain management"}),e.jsx("li",{children:"• Product authentication"}),e.jsx("li",{children:"• Customer verification"})]})]}),e.jsxs("div",{className:"p-4 bg-surface-alt rounded-lg",children:[e.jsx("p",{className:"font-medium mb-2",children:"Scanning"}),e.jsx("p",{className:"text-muted-foreground",children:"QR codes can be scanned with any smartphone camera or QR scanner app. Scanning will redirect to the product tracking page with full details."})]})]})]})]})}function Us(s){var o,a,c="";if(typeof s=="string"||typeof s=="number")c+=s;else if(typeof s=="object")if(Array.isArray(s)){var u=s.length;for(o=0;o<u;o++)s[o]&&(a=Us(s[o]))&&(c&&(c+=" "),c+=a)}else for(a in s)s[a]&&(c&&(c+=" "),c+=a);return c}function ta(){for(var s,o,a=0,c="",u=arguments.length;a<u;a++)(s=arguments[a])&&(o=Us(s))&&(c&&(c+=" "),c+=o);return c}const aa=(s,o)=>{const a=new Array(s.length+o.length);for(let c=0;c<s.length;c++)a[c]=s[c];for(let c=0;c<o.length;c++)a[s.length+c]=o[c];return a},ra=(s,o)=>({classGroupId:s,validator:o}),Fs=(s=new Map,o=null,a)=>({nextPart:s,validators:o,classGroupId:a}),Oe="-",cs=[],la="arbitrary..",na=s=>{const o=oa(s),{conflictingClassGroups:a,conflictingClassGroupModifiers:c}=s;return{getClassGroupId:f=>{if(f.startsWith("[")&&f.endsWith("]"))return ia(f);const y=f.split(Oe),l=y[0]===""&&y.length>1?1:0;return Qs(y,l,o)},getConflictingClassGroupIds:(f,y)=>{if(y){const l=c[f],n=a[f];return l?n?aa(n,l):l:n||cs}return a[f]||cs}}},Qs=(s,o,a)=>{if(s.length-o===0)return a.classGroupId;const u=s[o],h=a.nextPart.get(u);if(h){const n=Qs(s,o+1,h);if(n)return n}const f=a.validators;if(f===null)return;const y=o===0?s.join(Oe):s.slice(o).join(Oe),l=f.length;for(let n=0;n<l;n++){const t=f[n];if(t.validator(y))return t.classGroupId}},ia=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const o=s.slice(1,-1),a=o.indexOf(":"),c=o.slice(0,a);return c?la+c:void 0})(),oa=s=>{const{theme:o,classGroups:a}=s;return ca(a,o)},ca=(s,o)=>{const a=Fs();for(const c in s){const u=s[c];ts(u,a,c,o)}return a},ts=(s,o,a,c)=>{const u=s.length;for(let h=0;h<u;h++){const f=s[h];da(f,o,a,c)}},da=(s,o,a,c)=>{if(typeof s=="string"){ma(s,o,a);return}if(typeof s=="function"){xa(s,o,a,c);return}ua(s,o,a,c)},ma=(s,o,a)=>{const c=s===""?o:Gs(o,s);c.classGroupId=a},xa=(s,o,a,c)=>{if(ha(s)){ts(s(c),o,a,c);return}o.validators===null&&(o.validators=[]),o.validators.push(ra(a,s))},ua=(s,o,a,c)=>{const u=Object.entries(s),h=u.length;for(let f=0;f<h;f++){const[y,l]=u[f];ts(l,Gs(o,y),a,c)}},Gs=(s,o)=>{let a=s;const c=o.split(Oe),u=c.length;for(let h=0;h<u;h++){const f=c[h];let y=a.nextPart.get(f);y||(y=Fs(),a.nextPart.set(f,y)),a=y}return a},ha=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,pa=s=>{if(s<1)return{get:()=>{},set:()=>{}};let o=0,a=Object.create(null),c=Object.create(null);const u=(h,f)=>{a[h]=f,o++,o>s&&(o=0,c=a,a=Object.create(null))};return{get(h){let f=a[h];if(f!==void 0)return f;if((f=c[h])!==void 0)return u(h,f),f},set(h,f){h in a?a[h]=f:u(h,f)}}},Ye="!",ds=":",fa=[],ms=(s,o,a,c,u)=>({modifiers:s,hasImportantModifier:o,baseClassName:a,maybePostfixModifierPosition:c,isExternal:u}),ga=s=>{const{prefix:o,experimentalParseClassName:a}=s;let c=u=>{const h=[];let f=0,y=0,l=0,n;const t=u.length;for(let m=0;m<t;m++){const b=u[m];if(f===0&&y===0){if(b===ds){h.push(u.slice(l,m)),l=m+1;continue}if(b==="/"){n=m;continue}}b==="["?f++:b==="]"?f--:b==="("?y++:b===")"&&y--}const r=h.length===0?u:u.slice(l);let x=r,N=!1;r.endsWith(Ye)?(x=r.slice(0,-1),N=!0):r.startsWith(Ye)&&(x=r.slice(1),N=!0);const g=n&&n>l?n-l:void 0;return ms(h,N,x,g)};if(o){const u=o+ds,h=c;c=f=>f.startsWith(u)?h(f.slice(u.length)):ms(fa,!1,f,void 0,!0)}if(a){const u=c;c=h=>a({className:h,parseClassName:u})}return c},ba=s=>{const o=new Map;return s.orderSensitiveModifiers.forEach((a,c)=>{o.set(a,1e6+c)}),a=>{const c=[];let u=[];for(let h=0;h<a.length;h++){const f=a[h],y=f[0]==="[",l=o.has(f);y||l?(u.length>0&&(u.sort(),c.push(...u),u=[]),c.push(f)):u.push(f)}return u.length>0&&(u.sort(),c.push(...u)),c}},ja=s=>({cache:pa(s.cacheSize),parseClassName:ga(s),sortModifiers:ba(s),...na(s)}),Na=/\s+/,va=(s,o)=>{const{parseClassName:a,getClassGroupId:c,getConflictingClassGroupIds:u,sortModifiers:h}=o,f=[],y=s.trim().split(Na);let l="";for(let n=y.length-1;n>=0;n-=1){const t=y[n],{isExternal:r,modifiers:x,hasImportantModifier:N,baseClassName:g,maybePostfixModifierPosition:m}=a(t);if(r){l=t+(l.length>0?" "+l:l);continue}let b=!!m,R=c(b?g.substring(0,m):g);if(!R){if(!b){l=t+(l.length>0?" "+l:l);continue}if(R=c(g),!R){l=t+(l.length>0?" "+l:l);continue}b=!1}const E=x.length===0?"":x.length===1?x[0]:h(x).join(":"),d=N?E+Ye:E,i=d+R;if(f.indexOf(i)>-1)continue;f.push(i);const A=u(R,b);for(let p=0;p<A.length;++p){const k=A[p];f.push(d+k)}l=t+(l.length>0?" "+l:l)}return l},ya=(...s)=>{let o=0,a,c,u="";for(;o<s.length;)(a=s[o++])&&(c=Vs(a))&&(u&&(u+=" "),u+=c);return u},Vs=s=>{if(typeof s=="string")return s;let o,a="";for(let c=0;c<s.length;c++)s[c]&&(o=Vs(s[c]))&&(a&&(a+=" "),a+=o);return a},wa=(s,...o)=>{let a,c,u,h;const f=l=>{const n=o.reduce((t,r)=>r(t),s());return a=ja(n),c=a.cache.get,u=a.cache.set,h=y,y(l)},y=l=>{const n=c(l);if(n)return n;const t=va(l,a);return u(l,t),t};return h=f,(...l)=>h(ya(...l))},ka=[],H=s=>{const o=a=>a[s]||ka;return o.isThemeGetter=!0,o},Hs=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,qs=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ca=/^\d+\/\d+$/,Sa=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Aa=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Pa=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ma=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ra=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ge=s=>Ca.test(s),L=s=>!!s&&!Number.isNaN(Number(s)),ie=s=>!!s&&Number.isInteger(Number(s)),Fe=s=>s.endsWith("%")&&L(s.slice(0,-1)),le=s=>Sa.test(s),Ea=()=>!0,Ta=s=>Aa.test(s)&&!Pa.test(s),Ws=()=>!1,Ia=s=>Ma.test(s),_a=s=>Ra.test(s),Da=s=>!P(s)&&!M(s),La=s=>Ne(s,Xs,Ws),P=s=>Hs.test(s),me=s=>Ne(s,Js,Ta),Qe=s=>Ne(s,Ua,L),xs=s=>Ne(s,Ys,Ws),Oa=s=>Ne(s,Ks,_a),Ae=s=>Ne(s,Zs,Ia),M=s=>qs.test(s),ye=s=>ve(s,Js),za=s=>ve(s,Fa),us=s=>ve(s,Ys),$a=s=>ve(s,Xs),Ba=s=>ve(s,Ks),Pe=s=>ve(s,Zs,!0),Ne=(s,o,a)=>{const c=Hs.exec(s);return c?c[1]?o(c[1]):a(c[2]):!1},ve=(s,o,a=!1)=>{const c=qs.exec(s);return c?c[1]?o(c[1]):a:!1},Ys=s=>s==="position"||s==="percentage",Ks=s=>s==="image"||s==="url",Xs=s=>s==="length"||s==="size"||s==="bg-size",Js=s=>s==="length",Ua=s=>s==="number",Fa=s=>s==="family-name",Zs=s=>s==="shadow",Qa=()=>{const s=H("color"),o=H("font"),a=H("text"),c=H("font-weight"),u=H("tracking"),h=H("leading"),f=H("breakpoint"),y=H("container"),l=H("spacing"),n=H("radius"),t=H("shadow"),r=H("inset-shadow"),x=H("text-shadow"),N=H("drop-shadow"),g=H("blur"),m=H("perspective"),b=H("aspect"),R=H("ease"),E=H("animate"),d=()=>["auto","avoid","all","avoid-page","page","left","right","column"],i=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...i(),M,P],p=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],w=()=>[M,P,l],I=()=>[ge,"full","auto",...w()],j=()=>[ie,"none","subgrid",M,P],T=()=>["auto",{span:["full",ie,M,P]},ie,M,P],B=()=>[ie,"auto",M,P],v=()=>["auto","min","max","fr",M,P],D=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],z=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...w()],W=()=>[ge,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...w()],_=()=>[s,M,P],ae=()=>[...i(),us,xs,{position:[M,P]}],ee=()=>["no-repeat",{repeat:["","x","y","space","round"]}],se=()=>["auto","cover","contain",$a,La,{size:[M,P]}],K=()=>[Fe,ye,me],U=()=>["","none","full",n,M,P],Y=()=>["",L,ye,me],pe=()=>["solid","dashed","dotted","double"],C=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>[L,Fe,us,xs],re=()=>["","none",g,M,P],fe=()=>["none",L,M,P],Ce=()=>["none",L,M,P],Be=()=>[L,M,P],Se=()=>[ge,"full",...w()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[le],breakpoint:[le],color:[Ea],container:[le],"drop-shadow":[le],ease:["in","out","in-out"],font:[Da],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[le],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[le],shadow:[le],spacing:["px",L],text:[le],"text-shadow":[le],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ge,P,M,b]}],container:["container"],columns:[{columns:[L,P,M,y]}],"break-after":[{"break-after":d()}],"break-before":[{"break-before":d()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:p()}],"overflow-x":[{"overflow-x":p()}],"overflow-y":[{"overflow-y":p()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[ie,"auto",M,P]}],basis:[{basis:[ge,"full","auto",y,...w()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[L,ge,"auto","initial","none",P]}],grow:[{grow:["",L,M,P]}],shrink:[{shrink:["",L,M,P]}],order:[{order:[ie,"first","last","none",M,P]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:T()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:T()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":v()}],"auto-rows":[{"auto-rows":v()}],gap:[{gap:w()}],"gap-x":[{"gap-x":w()}],"gap-y":[{"gap-y":w()}],"justify-content":[{justify:[...D(),"normal"]}],"justify-items":[{"justify-items":[...z(),"normal"]}],"justify-self":[{"justify-self":["auto",...z()]}],"align-content":[{content:["normal",...D()]}],"align-items":[{items:[...z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...z(),{baseline:["","last"]}]}],"place-content":[{"place-content":D()}],"place-items":[{"place-items":[...z(),"baseline"]}],"place-self":[{"place-self":["auto",...z()]}],p:[{p:w()}],px:[{px:w()}],py:[{py:w()}],ps:[{ps:w()}],pe:[{pe:w()}],pt:[{pt:w()}],pr:[{pr:w()}],pb:[{pb:w()}],pl:[{pl:w()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":w()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":w()}],"space-y-reverse":["space-y-reverse"],size:[{size:W()}],w:[{w:[y,"screen",...W()]}],"min-w":[{"min-w":[y,"screen","none",...W()]}],"max-w":[{"max-w":[y,"screen","none","prose",{screen:[f]},...W()]}],h:[{h:["screen","lh",...W()]}],"min-h":[{"min-h":["screen","lh","none",...W()]}],"max-h":[{"max-h":["screen","lh",...W()]}],"font-size":[{text:["base",a,ye,me]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[c,M,Qe]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Fe,P]}],"font-family":[{font:[za,P,o]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[u,M,P]}],"line-clamp":[{"line-clamp":[L,"none",M,Qe]}],leading:[{leading:[h,...w()]}],"list-image":[{"list-image":["none",M,P]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",M,P]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:_()}],"text-color":[{text:_()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[L,"from-font","auto",M,me]}],"text-decoration-color":[{decoration:_()}],"underline-offset":[{"underline-offset":[L,"auto",M,P]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:w()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",M,P]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",M,P]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ae()}],"bg-repeat":[{bg:ee()}],"bg-size":[{bg:se()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ie,M,P],radial:["",M,P],conic:[ie,M,P]},Ba,Oa]}],"bg-color":[{bg:_()}],"gradient-from-pos":[{from:K()}],"gradient-via-pos":[{via:K()}],"gradient-to-pos":[{to:K()}],"gradient-from":[{from:_()}],"gradient-via":[{via:_()}],"gradient-to":[{to:_()}],rounded:[{rounded:U()}],"rounded-s":[{"rounded-s":U()}],"rounded-e":[{"rounded-e":U()}],"rounded-t":[{"rounded-t":U()}],"rounded-r":[{"rounded-r":U()}],"rounded-b":[{"rounded-b":U()}],"rounded-l":[{"rounded-l":U()}],"rounded-ss":[{"rounded-ss":U()}],"rounded-se":[{"rounded-se":U()}],"rounded-ee":[{"rounded-ee":U()}],"rounded-es":[{"rounded-es":U()}],"rounded-tl":[{"rounded-tl":U()}],"rounded-tr":[{"rounded-tr":U()}],"rounded-br":[{"rounded-br":U()}],"rounded-bl":[{"rounded-bl":U()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pe(),"hidden","none"]}],"divide-style":[{divide:[...pe(),"hidden","none"]}],"border-color":[{border:_()}],"border-color-x":[{"border-x":_()}],"border-color-y":[{"border-y":_()}],"border-color-s":[{"border-s":_()}],"border-color-e":[{"border-e":_()}],"border-color-t":[{"border-t":_()}],"border-color-r":[{"border-r":_()}],"border-color-b":[{"border-b":_()}],"border-color-l":[{"border-l":_()}],"divide-color":[{divide:_()}],"outline-style":[{outline:[...pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[L,M,P]}],"outline-w":[{outline:["",L,ye,me]}],"outline-color":[{outline:_()}],shadow:[{shadow:["","none",t,Pe,Ae]}],"shadow-color":[{shadow:_()}],"inset-shadow":[{"inset-shadow":["none",r,Pe,Ae]}],"inset-shadow-color":[{"inset-shadow":_()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:_()}],"ring-offset-w":[{"ring-offset":[L,me]}],"ring-offset-color":[{"ring-offset":_()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":_()}],"text-shadow":[{"text-shadow":["none",x,Pe,Ae]}],"text-shadow-color":[{"text-shadow":_()}],opacity:[{opacity:[L,M,P]}],"mix-blend":[{"mix-blend":[...C(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":C()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[L]}],"mask-image-linear-from-pos":[{"mask-linear-from":$()}],"mask-image-linear-to-pos":[{"mask-linear-to":$()}],"mask-image-linear-from-color":[{"mask-linear-from":_()}],"mask-image-linear-to-color":[{"mask-linear-to":_()}],"mask-image-t-from-pos":[{"mask-t-from":$()}],"mask-image-t-to-pos":[{"mask-t-to":$()}],"mask-image-t-from-color":[{"mask-t-from":_()}],"mask-image-t-to-color":[{"mask-t-to":_()}],"mask-image-r-from-pos":[{"mask-r-from":$()}],"mask-image-r-to-pos":[{"mask-r-to":$()}],"mask-image-r-from-color":[{"mask-r-from":_()}],"mask-image-r-to-color":[{"mask-r-to":_()}],"mask-image-b-from-pos":[{"mask-b-from":$()}],"mask-image-b-to-pos":[{"mask-b-to":$()}],"mask-image-b-from-color":[{"mask-b-from":_()}],"mask-image-b-to-color":[{"mask-b-to":_()}],"mask-image-l-from-pos":[{"mask-l-from":$()}],"mask-image-l-to-pos":[{"mask-l-to":$()}],"mask-image-l-from-color":[{"mask-l-from":_()}],"mask-image-l-to-color":[{"mask-l-to":_()}],"mask-image-x-from-pos":[{"mask-x-from":$()}],"mask-image-x-to-pos":[{"mask-x-to":$()}],"mask-image-x-from-color":[{"mask-x-from":_()}],"mask-image-x-to-color":[{"mask-x-to":_()}],"mask-image-y-from-pos":[{"mask-y-from":$()}],"mask-image-y-to-pos":[{"mask-y-to":$()}],"mask-image-y-from-color":[{"mask-y-from":_()}],"mask-image-y-to-color":[{"mask-y-to":_()}],"mask-image-radial":[{"mask-radial":[M,P]}],"mask-image-radial-from-pos":[{"mask-radial-from":$()}],"mask-image-radial-to-pos":[{"mask-radial-to":$()}],"mask-image-radial-from-color":[{"mask-radial-from":_()}],"mask-image-radial-to-color":[{"mask-radial-to":_()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":i()}],"mask-image-conic-pos":[{"mask-conic":[L]}],"mask-image-conic-from-pos":[{"mask-conic-from":$()}],"mask-image-conic-to-pos":[{"mask-conic-to":$()}],"mask-image-conic-from-color":[{"mask-conic-from":_()}],"mask-image-conic-to-color":[{"mask-conic-to":_()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ae()}],"mask-repeat":[{mask:ee()}],"mask-size":[{mask:se()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",M,P]}],filter:[{filter:["","none",M,P]}],blur:[{blur:re()}],brightness:[{brightness:[L,M,P]}],contrast:[{contrast:[L,M,P]}],"drop-shadow":[{"drop-shadow":["","none",N,Pe,Ae]}],"drop-shadow-color":[{"drop-shadow":_()}],grayscale:[{grayscale:["",L,M,P]}],"hue-rotate":[{"hue-rotate":[L,M,P]}],invert:[{invert:["",L,M,P]}],saturate:[{saturate:[L,M,P]}],sepia:[{sepia:["",L,M,P]}],"backdrop-filter":[{"backdrop-filter":["","none",M,P]}],"backdrop-blur":[{"backdrop-blur":re()}],"backdrop-brightness":[{"backdrop-brightness":[L,M,P]}],"backdrop-contrast":[{"backdrop-contrast":[L,M,P]}],"backdrop-grayscale":[{"backdrop-grayscale":["",L,M,P]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[L,M,P]}],"backdrop-invert":[{"backdrop-invert":["",L,M,P]}],"backdrop-opacity":[{"backdrop-opacity":[L,M,P]}],"backdrop-saturate":[{"backdrop-saturate":[L,M,P]}],"backdrop-sepia":[{"backdrop-sepia":["",L,M,P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":w()}],"border-spacing-x":[{"border-spacing-x":w()}],"border-spacing-y":[{"border-spacing-y":w()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",M,P]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[L,"initial",M,P]}],ease:[{ease:["linear","initial",R,M,P]}],delay:[{delay:[L,M,P]}],animate:[{animate:["none",E,M,P]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,M,P]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:Ce()}],"scale-x":[{"scale-x":Ce()}],"scale-y":[{"scale-y":Ce()}],"scale-z":[{"scale-z":Ce()}],"scale-3d":["scale-3d"],skew:[{skew:Be()}],"skew-x":[{"skew-x":Be()}],"skew-y":[{"skew-y":Be()}],transform:[{transform:[M,P,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Se()}],"translate-x":[{"translate-x":Se()}],"translate-y":[{"translate-y":Se()}],"translate-z":[{"translate-z":Se()}],"translate-none":["translate-none"],accent:[{accent:_()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:_()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",M,P]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":w()}],"scroll-mx":[{"scroll-mx":w()}],"scroll-my":[{"scroll-my":w()}],"scroll-ms":[{"scroll-ms":w()}],"scroll-me":[{"scroll-me":w()}],"scroll-mt":[{"scroll-mt":w()}],"scroll-mr":[{"scroll-mr":w()}],"scroll-mb":[{"scroll-mb":w()}],"scroll-ml":[{"scroll-ml":w()}],"scroll-p":[{"scroll-p":w()}],"scroll-px":[{"scroll-px":w()}],"scroll-py":[{"scroll-py":w()}],"scroll-ps":[{"scroll-ps":w()}],"scroll-pe":[{"scroll-pe":w()}],"scroll-pt":[{"scroll-pt":w()}],"scroll-pr":[{"scroll-pr":w()}],"scroll-pb":[{"scroll-pb":w()}],"scroll-pl":[{"scroll-pl":w()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",M,P]}],fill:[{fill:["none",..._()]}],"stroke-w":[{stroke:[L,ye,me,Qe]}],stroke:[{stroke:["none",..._()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Ga=wa(Qa);function Va(...s){return Ga(ta(s))}function X({className:s,...o}){return e.jsx("div",{"data-slot":"skeleton",className:Va("bg-accent animate-pulse rounded-md",s),...o})}function as({columns:s=5,rows:o=5}){return e.jsx(e.Fragment,{children:Array.from({length:o}).map((a,c)=>e.jsx("tr",{className:"border-b border-slate-100",children:Array.from({length:s}).map((u,h)=>e.jsx("td",{className:"px-4 py-3",children:e.jsx(X,{className:`h-4 bg-slate-100 ${h===0?"w-24":h===s-1?"w-16":"w-20"}`})},h))},c))})}function Ha({orderId:s}){const{user:o}=Ke(),[a,c]=S.useState([]),[u,h]=S.useState(""),[f,y]=S.useState(!0),[l,n]=S.useState(!0),[t,r]=S.useState(!1),x=async()=>{if(!s){n(!1);return}const{data:g,error:m}=await xe.from("order_notes").select("*").eq("order_id",s).order("created_at",{ascending:!0});if(m){console.error("Error fetching order notes:",m),n(!1);return}const b=[...new Set((g||[]).map(d=>d.user_id))];let R={};if(b.length>0){const{data:d}=await xe.from("profiles").select("id, email, full_name").in("id",b);d&&(R=Object.fromEntries(d.map(i=>[i.id,{email:i.email,full_name:i.full_name}])))}const E=(g||[]).map(d=>({...d,user_name:R[d.user_id]?.full_name||void 0,user_email:R[d.user_id]?.email||void 0}));c(E),n(!1)};S.useEffect(()=>{x()},[s]);const N=async g=>{if(g.preventDefault(),!u.trim()||!o||!s)return;r(!0);const{error:m}=await xe.from("order_notes").insert({order_id:s,user_id:o.id,note:u.trim(),is_internal:f});if(m){console.error("Error adding note:",m),alert("Failed to add note"),r(!1);return}xe.from("audit_log").insert({user_id:o.id,action:"create_note",entity_type:"order",entity_id:s,details:{note_preview:u.trim().slice(0,100),is_internal:f}}).then(()=>{}),h(""),r(!1),x()};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"h-4 w-4 text-slate-500"}),e.jsx("h4",{className:"font-medium text-sm text-slate-700",children:"Order Notes"}),e.jsxs("span",{className:"text-xs text-slate-400",children:["(",a.length,")"]})]}),e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:l?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx("div",{className:"w-5 h-5 border border-slate-200 border-t-slate-500 rounded-full animate-spin"})}):a.length===0?e.jsx("p",{className:"text-xs text-slate-400 text-center py-4",children:"No notes yet"}):a.map(g=>e.jsxs("div",{className:`p-3 rounded-lg text-sm ${g.user_id===o?.id?"bg-blue-50 border border-blue-100 ml-4":"bg-slate-50 border border-slate-100 mr-4"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-slate-700 text-xs",children:g.user_name||g.user_email||"Unknown"}),g.is_internal&&e.jsxs("span",{className:"flex items-center space-x-1 text-[9px] text-amber-600 bg-amber-50 px-1.5 py-0.5 rounded",children:[e.jsx(ls,{className:"h-2.5 w-2.5"}),e.jsx("span",{children:"Internal"})]})]}),e.jsx("span",{className:"text-[10px] text-slate-400",children:bs(g.created_at)})]}),e.jsx("p",{className:"text-slate-600 whitespace-pre-wrap",children:g.note})]},g.id))}),e.jsxs("form",{onSubmit:N,className:"flex flex-col space-y-2",children:[e.jsx("textarea",{value:u,onChange:g=>h(g.target.value),placeholder:"Add a note...",rows:2,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-slate-200 focus:border-slate-300 resize-none"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-xs text-slate-500 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:g=>y(g.target.checked),className:"rounded border-slate-300 text-slate-900 focus:ring-slate-200"}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(ls,{className:"h-3 w-3"}),e.jsx("span",{children:"Internal note (admin only)"})]})]}),e.jsxs("button",{type:"submit",disabled:t||!u.trim(),className:"flex items-center space-x-2 px-3 py-1.5 bg-slate-900 text-white text-xs rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50",children:[e.jsx(ht,{className:"h-3 w-3"}),e.jsx("span",{children:t?"Sending...":"Add Note"})]})]})]})]})}function qa({selectedCount:s,totalCount:o,actions:a,onClearSelection:c,onSelectAll:u}){return s===0?null:e.jsxs("div",{className:"sticky top-16 z-30 bg-slate-900 text-white rounded-lg shadow-xl p-3 flex items-center justify-between animate-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"h-4 w-4 text-[#D4AF37]"}),e.jsxs("span",{className:"text-sm font-medium",children:[s," selected"]})]}),s<o&&e.jsxs("button",{onClick:u,className:"text-xs text-[#D4AF37] hover:text-[#F3E5AB] underline transition-colors",children:["Select all ",o]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[a.map((h,f)=>e.jsxs("button",{onClick:h.onClick,className:`flex items-center space-x-1.5 px-3 py-1.5 rounded text-xs font-medium transition-colors ${h.variant==="danger"?"bg-red-500/20 text-red-300 hover:bg-red-500/30":"bg-white/10 text-white hover:bg-white/20"}`,children:[h.icon,e.jsx("span",{children:h.label})]},f)),e.jsx("button",{onClick:c,className:"p-1.5 hover:bg-white/10 rounded transition-colors ml-2",title:"Clear selection",children:e.jsx(ue,{className:"h-4 w-4"})})]})]})}function Wa(){const{db:s,updateOrder:o,isLoading:a}=Z(),c=s.orders,[u,h]=S.useState(""),[f,y]=S.useState("all"),[l,n]=S.useState(null),[t,r]=S.useState(new Set),x=c.filter(i=>{const A=i.id.toLowerCase().includes(u.toLowerCase())||i.customerName.toLowerCase().includes(u.toLowerCase()),p=f==="all"||i.status===f;return A&&p}),N=i=>{r(A=>{const p=new Set(A);return p.has(i)?p.delete(i):p.add(i),p})},g=()=>{t.size===x.length?r(new Set):r(new Set(x.map(i=>i.id)))},m=i=>{t.forEach(A=>{o(A,{status:i})}),r(new Set)},b=()=>{const i=c.filter(I=>t.has(I.id)),A=[["Order ID","Customer","Date","Total","Status","Payment"].join(","),...i.map(I=>[I.id,I.customerName,I.createdAt,I.total.toFixed(2),I.status,I.paymentStatus].join(","))].join(`
`),p=new Blob([A],{type:"text/csv"}),k=URL.createObjectURL(p),w=document.createElement("a");w.href=k,w.download=`orders-export-${new Date().toISOString().split("T")[0]}.csv`,w.click(),URL.revokeObjectURL(k)},R=i=>{switch(i){case"delivered":return e.jsx(Ve,{className:"h-4 w-4 text-green-600"});case"shipped":return e.jsx(ns,{className:"h-4 w-4 text-blue-600"});case"processing":return e.jsx(Me,{className:"h-4 w-4 text-yellow-600"});case"pending":return e.jsx(Me,{className:"h-4 w-4 text-orange-600"});case"cancelled":return e.jsx(et,{className:"h-4 w-4 text-red-600"});default:return null}},E=i=>{switch(i){case"delivered":return"bg-green-100 text-green-700";case"shipped":return"bg-blue-100 text-blue-700";case"processing":return"bg-yellow-100 text-yellow-700";case"pending":return"bg-orange-100 text-orange-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},d=(i,A)=>{o(i,{status:A})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Orders Management"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage customer orders"})]})}),e.jsx(qa,{selectedCount:t.size,totalCount:x.length,onClearSelection:()=>r(new Set),onSelectAll:()=>r(new Set(x.map(i=>i.id))),actions:[{label:"Mark Processing",icon:e.jsx(Me,{className:"h-3 w-3"}),onClick:()=>m("processing")},{label:"Mark Shipped",icon:e.jsx(ns,{className:"h-3 w-3"}),onClick:()=>m("shipped")},{label:"Mark Delivered",icon:e.jsx(Ve,{className:"h-3 w-3"}),onClick:()=>m("delivered")},{label:"Export CSV",icon:e.jsx(es,{className:"h-3 w-3"}),onClick:b}]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[{label:"Total Orders",value:c.length,color:"text-foreground"},{label:"Pending",value:c.filter(i=>i.status==="pending").length,color:"text-orange-600"},{label:"Processing",value:c.filter(i=>i.status==="processing").length,color:"text-yellow-600"},{label:"Shipped",value:c.filter(i=>i.status==="shipped").length,color:"text-blue-600"},{label:"Delivered",value:c.filter(i=>i.status==="delivered").length,color:"text-green-600"}].map(i=>e.jsxs("div",{className:"bg-background p-4 rounded-lg border border-border text-center",children:[e.jsx("p",{className:"text-2xl font-bold {stat.color}",children:i.value}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.label})]},i.label))}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search orders by ID, customer name, or email...",value:u,onChange:i=>h(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("select",{value:f,onChange:i=>y(i.target.value),className:"px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"bg-background rounded-lg border border-border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-surface-alt",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:x.length>0&&t.size===x.length,onChange:g,className:"rounded border-slate-300 text-slate-900 focus:ring-slate-200"})}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Order ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Payment"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:a?e.jsx(as,{columns:8,rows:5}):x.map(i=>e.jsxs(V.Fragment,{children:[e.jsxs("tr",{className:`hover:bg-surface-alt/50 ${t.has(i.id)?"bg-blue-50/50":""}`,children:[e.jsx("td",{className:"px-3 py-3",children:e.jsx("input",{type:"checkbox",checked:t.has(i.id),onChange:()=>N(i.id),className:"rounded border-slate-300 text-slate-900 focus:ring-slate-200"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"font-medium",children:i.id})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{children:e.jsx("p",{className:"font-medium",children:i.customerName})})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:_e(i.createdAt)}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:Q(i.total)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[R(i.status),e.jsxs("select",{value:i.status,onChange:A=>d(i.id,A.target.value),className:`text-xs px-2 py-1 rounded-full border-0 ${E(i.status)}`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("select",{value:i.paymentStatus,onChange:A=>o(i.id,{paymentStatus:A.target.value}),className:`text-xs px-2 py-1 rounded-full border-0 cursor-pointer ${i.paymentStatus==="paid"?"bg-green-100 text-green-700":i.paymentStatus==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"failed",children:"Failed"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>n(l===i.id?null:i.id),className:"p-2 hover:bg-surface-alt rounded-lg text-muted-foreground hover:text-primary",children:l===i.id?e.jsx(Ze,{className:"h-4 w-4"}):e.jsx(ze,{className:"h-4 w-4"})})})]}),l===i.id&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-4 bg-surface-alt/30",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Order Items"}),e.jsx("div",{className:"space-y-2",children:i.items.map(A=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:A.name})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[A.quantity," x ",Q(A.price)]})]},A.productId))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Customer Details"}),e.jsxs("div",{className:"p-3 bg-background rounded text-sm space-y-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-xs text-muted-foreground mb-1",children:"ACCOUNT"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ID: "}),e.jsx("span",{children:i.customerId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Name: "}),e.jsx("span",{children:i.customerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type: "}),e.jsx("span",{className:"capitalize",children:i.userType})]})]}),e.jsxs("div",{className:"pt-3 border-t border-border",children:[e.jsx("h5",{className:"font-medium text-xs text-muted-foreground mb-1",children:"SHIPPING & PAYMENT"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Method: "}),e.jsx("span",{className:"capitalize",children:i.paymentMethod?.replace("_"," ")||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Name: "}),e.jsx("span",{children:i.shippingName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Email: "}),e.jsx("span",{children:i.shippingEmail||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Phone: "}),e.jsx("span",{children:i.shippingPhone||"N/A"})]}),i.shippingAddress&&e.jsxs("div",{className:"mt-1 text-xs",children:[e.jsx("p",{children:i.shippingAddress}),e.jsxs("p",{children:[i.shippingCity,", ",i.shippingState," ",i.shippingZip]}),e.jsx("p",{children:i.shippingCountry})]}),i.shippingNotes&&e.jsxs("div",{className:"mt-2 text-xs italic text-muted-foreground",children:["Note: ",i.shippingNotes]})]})]})]}),e.jsx("div",{className:"col-span-1 md:col-span-2 mt-4 pt-4 border-t border-border",children:e.jsx(Ha,{orderId:i.dbId||""})})]})})})]},i.id))})]})}),!a&&x.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(te,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No orders found"})]})]})]})}function Ya(){const{db:s,isLoading:o}=Z(),a=s.customers,[c,u]=S.useState(""),[h,f]=S.useState("all"),[y,l]=S.useState(null),n=a.filter(r=>{const x=(r.name||"").toLowerCase().includes(c.toLowerCase())||r.email.toLowerCase().includes(c.toLowerCase())||r.phone.includes(c),N=h==="all"||r.status===h;return x&&N}),t=r=>{switch(r){case"active":return"bg-emerald-100 text-emerald-700";case"inactive":return"bg-slate-100 text-slate-700";default:return"bg-slate-100 text-slate-700"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Customers"}),e.jsx("p",{className:"text-slate-500",children:"Manage your customer base"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:a.length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Active"}),e.jsx("p",{className:"text-2xl font-semibold text-emerald-600",children:a.filter(r=>r.status==="active").length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-600",children:a.filter(r=>r.status==="inactive").length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:Q(a.reduce((r,x)=>r+x.totalSpent,0))})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search customers...",value:c,onChange:r=>u(r.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg bg-white focus:ring-2 focus:ring-slate-200 focus:border-slate-300"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"h-4 w-4 text-slate-400"}),e.jsxs("select",{value:h,onChange:r=>f(r.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg bg-white focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"Orders"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"Total Spent"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:o?e.jsx(as,{columns:6,rows:5}):n.map(r=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex items-center justify-center",children:e.jsx(de,{className:"h-5 w-5 text-slate-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:r.name||r.email}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Since ",_e(r.joinedAt)]})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[e.jsx(ys,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:r.email})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[e.jsx(ws,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:r.phone})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-slate-900",children:r.totalOrders})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(we,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"font-medium text-slate-900",children:r.totalSpent.toFixed(2)})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${t(r.status)}`,children:r.status})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>l(y===r.id?null:r.id),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:y===r.id?e.jsx(Ze,{className:"h-4 w-4 text-slate-400"}):e.jsx(ze,{className:"h-4 w-4 text-slate-400"})})})]},r.id),y===r.id&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-4 bg-slate-50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-2",children:"Customer Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-slate-600",children:[e.jsx("span",{className:"text-slate-400",children:"Last Order:"})," ",r.lastOrderAt?_e(r.lastOrderAt):"Never"]}),r.notes&&e.jsxs("p",{className:"text-slate-600",children:[e.jsx("span",{className:"text-slate-400",children:"Notes:"})," ",r.notes]})]})]}),r.address&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-2",children:"Address"}),e.jsxs("div",{className:"text-sm text-slate-600",children:[e.jsx("p",{children:r.address.street}),e.jsxs("p",{children:[r.address.city,", ",r.address.state," ",r.address.zip]}),e.jsx("p",{children:r.address.country})]})]})]})})})]}))})]})}),!o&&n.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(de,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"No customers found"})]})]})]})}function Ka(){const{db:s,addInventoryLog:o}=Z(),[a,c]=S.useState(""),[u,h]=S.useState(null),[f,y]=S.useState(new Set),[l,n]=S.useState(!1),[t,r]=S.useState(null),[x,N]=S.useState({changeQuantity:0,reason:"received",notes:""}),g=s.products.filter(p=>p.name.toLowerCase().includes(a.toLowerCase())||p.sku.toLowerCase().includes(a.toLowerCase())),m=s.inventoryLogs.sort((p,k)=>new Date(k.createdAt).getTime()-new Date(p.createdAt).getTime()),b=u?m.filter(p=>p.productId===u):m,R=[];g.forEach(p=>{p.variants&&p.variants.length>0?p.variants.forEach(k=>{k.stock<(p.lowStockThreshold||10)&&R.push({productName:p.name,sku:k.sku,stock:k.stock,label:k.label})}):p.stockQuantity<(p.lowStockThreshold||10)&&R.push({productName:p.name,sku:p.sku,stock:p.stockQuantity})});const E=p=>{y(k=>{const w=new Set(k);return w.has(p)?w.delete(p):w.add(p),w})},d=(p,k,w)=>{const I=g.find(T=>T.id===p);if(!I)return;const j=k&&w?`${I.name} — ${w}`:I.name;r({productId:p,variantSku:k,label:j}),h(p),N({changeQuantity:0,reason:"received",notes:""}),n(!0)},i=()=>{t&&(o({productId:t.productId,changeQuantity:x.changeQuantity,reason:x.reason,notes:x.notes,variantSku:t.variantSku},!!t.variantSku),n(!1),r(null),N({changeQuantity:0,reason:"received",notes:""}))},A=p=>p.reduce((k,w)=>k+w.stock,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Inventory Management"}),e.jsx("p",{className:"text-slate-500",children:"Track and adjust product & variant stock levels"})]})}),R.length>0&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-amber-800 font-medium mb-3",children:[e.jsx(ps,{className:"h-5 w-5"}),e.jsxs("span",{children:["Low Stock Alerts (",R.length,")"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:[R.slice(0,9).map((p,k)=>e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-amber-100 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 text-sm",children:p.productName}),p.label&&e.jsx("p",{className:"text-xs text-slate-500",children:p.label}),e.jsxs("p",{className:"text-xs text-slate-400",children:["SKU: ",p.sku]})]}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:p.stock})]},k)),R.length>9&&e.jsx("div",{className:"bg-white p-3 rounded-lg border border-amber-100 flex items-center justify-center",children:e.jsxs("p",{className:"text-sm text-amber-700 font-medium",children:["+",R.length-9," more"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col h-[600px]",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Products Stock"}),e.jsxs("div",{className:"relative w-64",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:a,onChange:p=>c(p.target.value),className:"w-full pl-9 pr-4 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-slate-200"})]})]}),e.jsx("div",{className:"overflow-auto flex-1 p-4",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-sm text-slate-500",children:[e.jsx("th",{className:"pb-3 font-medium",children:"Product / SKU"}),e.jsx("th",{className:"pb-3 font-medium text-right",children:"Current Stock"}),e.jsx("th",{className:"pb-3 font-medium text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:g.map(p=>{const k=p.variants&&p.variants.length>0,w=f.has(p.id);return e.jsx("tr",{className:"group",children:e.jsxs("td",{colSpan:3,className:"p-0",children:[e.jsxs("div",{className:`flex items-center py-3 px-1 cursor-pointer hover:bg-slate-50 ${u===p.id?"bg-slate-50":""}`,onClick:()=>{h(p.id),k&&E(p.id)},children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[k&&e.jsx("span",{className:"text-slate-400",children:w?e.jsx(ze,{className:"h-4 w-4"}):e.jsx(Cs,{className:"h-4 w-4"})}),!k&&e.jsx("span",{className:"w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:p.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[p.sku,k?` · ${p.variants.length} variants`:""]})]})]}),e.jsx("div",{className:"text-right mr-4",children:e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-sm font-medium ${k?A(p.variants)<(p.lowStockThreshold||10)*p.variants.length?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700":p.stockQuantity<=(p.lowStockThreshold||10)?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700"}`,children:k?`${A(p.variants)} total`:`${p.stockQuantity} units`})}),e.jsx("div",{className:"text-right",children:!k&&e.jsx("button",{onClick:I=>{I.stopPropagation(),d(p.id)},className:"px-3 py-1 bg-slate-100 text-slate-700 rounded hover:bg-slate-200 transition-colors text-sm font-medium",children:"Adjust"})})]}),k&&w&&e.jsx("div",{className:"ml-7 mb-2",children:p.variants.map(I=>e.jsxs("div",{className:"flex items-center py-2 px-3 bg-slate-50/50 border-l-2 border-slate-200 hover:bg-slate-100 text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-slate-700 font-medium",children:I.label}),e.jsx("span",{className:"text-slate-400 text-xs ml-2",children:I.sku})]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium mr-3 ${I.stock<=0?"bg-red-100 text-red-700":I.stock<(p.lowStockThreshold||10)?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700"}`,children:I.stock}),e.jsx("button",{onClick:j=>{j.stopPropagation(),d(p.id,I.sku,I.label)},className:"px-2 py-0.5 bg-slate-200 text-slate-600 rounded hover:bg-slate-300 transition-colors text-xs font-medium",children:"Adjust"})]},I.sku))})]})},p.id)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 flex flex-col h-[600px]",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Stock History"}),u?e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-100 mb-4 flex items-start gap-4",children:[e.jsx("div",{className:"bg-white p-2 rounded-lg border border-slate-200 shadow-sm shrink-0",children:e.jsx($e,{value:`https://goldentierpeptide.com/product/${g.find(p=>p.id===u)?.sku}`,size:80})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900",children:g.find(p=>p.id===u)?.name}),e.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Scan to view product page"}),(()=>{const p=g.find(k=>k.id===u);return p?p.variants&&p.variants.length>0?e.jsx("div",{className:"flex flex-wrap gap-1 text-xs",children:p.variants.map(k=>e.jsxs("span",{className:"bg-white px-2 py-1 rounded border border-slate-200",children:[k.label,": ",k.stock]},k.sku))}):e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsxs("span",{className:"bg-white px-2 py-1 rounded border border-slate-200",children:["Stock: ",p.stockQuantity]}),e.jsxs("span",{className:"bg-white px-2 py-1 rounded border border-slate-200",children:["Thr: ",p.lowStockThreshold||10]})]}):null})()]})]}),e.jsx("div",{className:"space-y-3",children:b.length>0?b.map(p=>e.jsxs("div",{className:"p-3 border border-slate-100 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${p.changeQuantity>0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:[p.changeQuantity>0?"+":"",p.changeQuantity]}),e.jsx("span",{className:"text-xs text-slate-400",children:new Date(p.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm font-medium text-slate-700 capitalize",children:p.reason}),p.variantSku&&e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["Variant: ",p.variantSku]}),p.notes&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:p.notes}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["By ",p.performedByName]})]},p.id)):e.jsx("p",{className:"text-sm text-slate-500 italic text-center py-4",children:"No history for this product."})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[e.jsx(Rt,{className:"h-12 w-12 mb-2 opacity-50"}),e.jsx("p",{children:"Select a product to view details"})]})]})]}),l&&t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-sm w-full p-5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Adjust Stock"}),e.jsx("button",{onClick:()=>n(!1),className:"p-1 hover:bg-slate-100 rounded",children:e.jsx(ue,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-4",children:t.label}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Reason"}),e.jsxs("select",{value:x.reason,onChange:p=>N({...x,reason:p.target.value}),className:"w-full p-2 border border-slate-200 rounded-lg text-sm",children:[e.jsx("option",{value:"received",children:"Received (+)"}),e.jsx("option",{value:"returned",children:"Returned (+)"}),e.jsx("option",{value:"sold",children:"Sold (-)"}),e.jsx("option",{value:"damaged",children:"Damaged (-)"}),e.jsx("option",{value:"adjustment",children:"Manual Adjustment"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Quantity Change"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>N(p=>({...p,changeQuantity:p.changeQuantity-1})),className:"p-2 bg-slate-100 rounded hover:bg-slate-200",children:e.jsx(st,{className:"h-4 w-4"})}),e.jsx("input",{type:"number",value:x.changeQuantity,onChange:p=>N({...x,changeQuantity:parseInt(p.target.value)||0}),className:"flex-1 p-2 border border-slate-200 rounded-lg text-center font-bold"}),e.jsx("button",{type:"button",onClick:()=>N(p=>({...p,changeQuantity:p.changeQuantity+1})),className:"p-2 bg-slate-100 rounded hover:bg-slate-200",children:e.jsx(ke,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Notes (Optional)"}),e.jsx("input",{type:"text",value:x.notes,onChange:p=>N({...x,notes:p.target.value}),className:"w-full p-2 border border-slate-200 rounded-lg text-sm",placeholder:"e.g. Broken vial during shipping"})]}),e.jsx("button",{onClick:i,disabled:x.changeQuantity===0,className:"w-full py-2 bg-slate-900 text-white rounded-lg font-medium hover:bg-slate-800 disabled:opacity-50",children:"Save Adjustment"})]})]})})]})}function Xa(){const{user:s}=Ke(),{db:o,addInvitationCode:a,updateInvitationCode:c}=Z(),u=o.invitationCodes,[h,f]=S.useState(""),[y,l]=S.useState("all"),[n,t]=S.useState("all"),[r,x]=S.useState(!1),[N,g]=S.useState(!1),[m,b]=S.useState(null),[R,E]=S.useState(null),[d,i]=S.useState("admin_user"),[A,p]=S.useState(50),[k,w]=S.useState(15),[I,j]=S.useState(""),[T,B]=S.useState(""),[v,D]=S.useState("GT"),z=u.filter(C=>{const $=C.code.toLowerCase().includes(h.toLowerCase())||C.notes?.toLowerCase().includes(h.toLowerCase())||C.createdByName.toLowerCase().includes(h.toLowerCase()),re=y==="all"||C.type===y,fe=n==="all"||(n==="active"?C.isActive:!C.isActive);return $&&re&&fe}),G={total:u.length,active:u.filter(C=>C.isActive).length,totalUses:u.reduce((C,$)=>C+$.usedCount,0),adminCodes:u.filter(C=>C.type.startsWith("admin_")).length,partnerCodes:u.filter(C=>C.type==="partner_user").length},W=C=>{navigator.clipboard.writeText(C),E(C),setTimeout(()=>E(null),2e3)},_=()=>{const C=d==="admin_partner"?"GTP":d==="partner_user"?"GT":v,$={id:`inv${Date.now()}`,code:rs(C),type:d,createdBy:s?.id||"",createdByName:s?.name||"",createdAt:new Date().toISOString().split("T")[0],expiresAt:I||void 0,maxUses:A,usedCount:0,usedBy:[],isActive:!0,notes:T,defaultDiscountRate:d==="admin_partner"?k:void 0};a($),x(!1),ae()},ae=()=>{i("admin_user"),p(50),w(15),j(""),B(""),D("GT")},ee=C=>{const $=u.find(re=>re.code===C);$&&c(C,{isActive:!$.isActive})},se=C=>{window.confirm("Are you sure you want to deactivate this code?")&&c(C,{isActive:!1})},K=()=>{const C=[];for(let $=0;$<10;$++){const re={id:`inv${Date.now()}_${$}`,code:rs("BULK"),type:"admin_user",createdBy:s?.id||"",createdByName:s?.name||"",createdAt:new Date().toISOString().split("T")[0],maxUses:1,usedCount:0,usedBy:[],isActive:!0,notes:"Bulk generated code"};a(re),C.push(re.code)}navigator.clipboard.writeText(C.join(`
`)),alert("Generated 10 codes and copied to clipboard!")},U=C=>{switch(C){case"admin_user":return e.jsx(ce,{className:"h-4 w-4 text-blue-500"});case"admin_partner":return e.jsx(Ct,{className:"h-4 w-4 text-amber-500"});case"partner_user":return e.jsx(vs,{className:"h-4 w-4 text-emerald-500"})}},Y=C=>{switch(C){case"admin_user":return"User";case"admin_partner":return"Partner";case"partner_user":return"Partner Referral"}},pe=C=>{switch(C){case"admin_user":return"bg-blue-100 text-blue-700";case"admin_partner":return"bg-amber-100 text-amber-700";case"partner_user":return"bg-emerald-100 text-emerald-700"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Invitation Codes"}),e.jsx("p",{className:"text-slate-500",children:"Manage invitation codes for users and partners"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:K,className:"flex items-center space-x-2 px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:[e.jsx(Ps,{className:"h-4 w-4"}),e.jsx("span",{children:"Bulk Generate"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center space-x-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Code"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Total Codes"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:G.total})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Active Codes"}),e.jsx("p",{className:"text-2xl font-semibold text-emerald-600",children:G.active})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Total Uses"}),e.jsx("p",{className:"text-2xl font-semibold text-indigo-600",children:G.totalUses})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Partner Codes"}),e.jsx("p",{className:"text-2xl font-semibold text-amber-600",children:G.partnerCodes})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search codes, notes, or creator...",value:h,onChange:C=>f(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200 focus:border-slate-400"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:y,onChange:C=>l(C.target.value),className:"px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"admin_user",children:"User Codes"}),e.jsx("option",{value:"admin_partner",children:"Partner Codes"}),e.jsx("option",{value:"partner_user",children:"Partner Referrals"})]}),e.jsxs("select",{value:n,onChange:C=>t(C.target.value),className:"px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Uses"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Created By"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Created"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:z.map(C=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-mono font-semibold text-slate-900",children:C.code}),e.jsx("button",{onClick:()=>W(C.code),className:"p-1 hover:bg-slate-200 rounded transition-colors",children:R===C.code?e.jsx(Te,{className:"h-3.5 w-3.5 text-emerald-500"}):e.jsx(De,{className:"h-3.5 w-3.5 text-slate-400"})})]}),C.notes&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:C.notes})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("span",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs ${pe(C.type)}`,children:[U(C.type),e.jsx("span",{children:Y(C.type)})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:C.usedCount}),e.jsx("span",{className:"text-slate-400",children:"/"}),e.jsx("span",{className:"text-slate-500",children:C.maxUses})]}),e.jsx("div",{className:"w-20 bg-slate-100 rounded-full h-1.5 mt-1",children:e.jsx("div",{className:"bg-slate-900 h-1.5 rounded-full",style:{width:`${C.usedCount/C.maxUses*100}%`}})})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-slate-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium",children:C.createdByName.charAt(0)})}),e.jsx("span",{className:"text-sm",children:C.createdByName})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-slate-500",children:C.createdAt}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("button",{onClick:()=>ee(C.code),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${C.isActive?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:C.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[e.jsx("button",{onClick:()=>{b(C),g(!0)},className:"p-2 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600",children:e.jsx(ks,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>se(C.code),className:"p-2 hover:bg-red-50 rounded-lg text-slate-400 hover:text-red-600",children:e.jsx(Xe,{className:"h-4 w-4"})})]})})]},C.code))})]})}),z.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Ns,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"No invitation codes found"})]})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Create Invitation Code"}),e.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:e.jsx(ue,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Code Type"}),e.jsxs("select",{value:d,onChange:C=>i(C.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"admin_user",children:"User Registration"}),e.jsx("option",{value:"admin_partner",children:"Partner Registration"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:d==="admin_partner"?"Creates a partner account with discount benefits":"Creates a regular customer account"})]}),d==="admin_partner"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Default Discount Rate (%)"}),e.jsx("input",{type:"number",min:"5",max:"50",value:k,onChange:C=>w(parseInt(C.target.value)||15),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Maximum Uses"}),e.jsx("input",{type:"number",min:"1",max:"1000",value:A,onChange:C=>p(parseInt(C.target.value)||1),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Expiration Date (optional)"}),e.jsx("input",{type:"date",value:I,onChange:C=>j(C.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Notes (optional)"}),e.jsx("textarea",{rows:3,value:T,onChange:C=>B(C.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"e.g., VIP customers, March promotion..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-50",children:"Cancel"}),e.jsx("button",{onClick:_,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800",children:"Create Code"})]})]})]})}),N&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Code Details"}),e.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:e.jsx(ue,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-mono text-2xl font-bold text-slate-900",children:m.code}),e.jsx("button",{onClick:()=>W(m.code),className:"p-2 bg-white rounded-lg hover:bg-slate-100 transition-colors",children:R===m.code?e.jsx(Te,{className:"h-5 w-5 text-emerald-500"}):e.jsx(De,{className:"h-5 w-5 text-slate-400"})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Type"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[U(m.type),e.jsx("span",{className:"font-medium",children:Y(m.type)})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Status"}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs mt-1 ${m.isActive?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-700"}`,children:m.isActive?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Uses"}),e.jsxs("p",{className:"font-medium",children:[m.usedCount," / ",m.maxUses]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Created"}),e.jsx("p",{className:"font-medium",children:m.createdAt})]}),m.expiresAt&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Expires"}),e.jsx("p",{className:"font-medium",children:m.expiresAt})]}),m.defaultDiscountRate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Discount Rate"}),e.jsxs("p",{className:"font-medium",children:[m.defaultDiscountRate,"%"]})]})]}),m.usedBy.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-900 mb-3",children:"Used By"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:m.usedBy.map((C,$)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium",children:C.userName.charAt(0)})}),e.jsx("span",{className:"font-medium",children:C.userName})]}),e.jsx("span",{className:"text-sm text-slate-500",children:C.usedAt})]},$))})]}),m.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Notes"}),e.jsx("p",{className:"text-slate-700",children:m.notes})]})]})]})})]})}function Ja(){const{db:s}=Z(),{partners:o,orders:a,customers:c,invitationCodes:u}=s,[h,f]=S.useState("30d"),[y,l]=S.useState("revenue"),t=o.map(d=>{const i=a.filter(D=>D.partnerId===d.id),A=i.reduce((D,z)=>D+z.total,0),p=d.totalResold?d.totalResold-A:0,k=o.filter(D=>D.referredBy===d.id).length,w=u.filter(D=>D.partnerId===d.id),I=w.reduce((D,z)=>D+z.usedCount,0),T=c.filter(D=>w.some(z=>z.code===D.invitationCode)).filter(D=>D.totalOrders>0).length,B=I>0?Math.round(T/I*100):0;let v=0;if(i.length>0){const D=new Date,z=h==="7d"?7:h==="30d"?30:h==="90d"?90:365,G=new Date(D.getTime()-z*24*60*60*1e3),W=new Date(G.getTime()-z*24*60*60*1e3),_=i.filter(K=>new Date(K.createdAt)>=G),ae=i.filter(K=>new Date(K.createdAt)>=W&&new Date(K.createdAt)<G),ee=_.reduce((K,U)=>K+U.total,0),se=ae.reduce((K,U)=>K+U.total,0);se>0?v=Math.round((ee-se)/se*100):ee>0&&(v=100)}return{id:d.id,name:d.name,email:d.email,company:d.company,discountRate:d.discountRate,totalPurchases:A,totalResold:d.totalResold||0,estimatedProfit:p,networkSize:k,customerSignups:I,conversionRate:B,growth:v,status:d.status}}),r=[...t].sort((d,i)=>{switch(y){case"revenue":return i.totalPurchases-d.totalPurchases;case"network":return i.networkSize-d.networkSize;case"growth":return i.growth-d.growth;default:return 0}}),x=r.slice(0,5),N=t.reduce((d,i)=>d+i.totalPurchases,0),g=t.reduce((d,i)=>d+i.networkSize,0),m=t.reduce((d,i)=>d+i.customerSignups,0),b=t.length>0?Math.round(t.reduce((d,i)=>d+i.conversionRate,0)/t.length):0,R=t.filter(d=>d.growth>0).length,E=t.filter(d=>d.growth<0).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Partner Analytics"}),e.jsx("p",{className:"text-slate-500",children:"Performance metrics and insights for your partner network"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:h,onChange:d=>f(d.target.value),className:"px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"all",children:"All time"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-50",children:[e.jsx(es,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(we,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Partner Revenue"})]}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:Q(N)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ce,{className:"h-4 w-4 text-indigo-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Network Size"})]}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:g})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(vs,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Customer Signups"})]}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:m})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ut,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Avg Conversion"})]}),e.jsxs("p",{className:"text-2xl font-semibold text-slate-900",children:[b,"%"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Industry avg: 15%"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-emerald-50 border border-emerald-100 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:e.jsx(je,{className:"h-5 w-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-700",children:"Growing Partners"}),e.jsx("p",{className:"text-2xl font-semibold text-emerald-900",children:R})]})]})}),e.jsx("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:e.jsx(Ss,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-amber-700",children:"Stable Partners"}),e.jsx("p",{className:"text-2xl font-semibold text-amber-900",children:t.length-R-E})]})]})}),e.jsx("div",{className:"bg-red-50 border border-red-100 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(Ee,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-700",children:"Declining Partners"}),e.jsx("p",{className:"text-2xl font-semibold text-red-900",children:E})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-5 border-b border-slate-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(tt,{className:"h-5 w-5 text-amber-500"}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"Top Performers"})]}),e.jsxs("select",{value:y,onChange:d=>l(d.target.value),className:"text-sm px-3 py-1.5 border border-slate-200 rounded-lg",children:[e.jsx("option",{value:"revenue",children:"By Revenue"}),e.jsx("option",{value:"network",children:"By Network Size"}),e.jsx("option",{value:"growth",children:"By Growth"})]})]})}),e.jsx("div",{className:"divide-y divide-slate-100",children:x.map((d,i)=>e.jsxs("div",{className:"p-5 flex items-center justify-between hover:bg-slate-50",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-semibold text-sm ${i===0?"bg-amber-100 text-amber-700":i===1?"bg-slate-200 text-slate-700":i===2?"bg-orange-100 text-orange-700":"bg-slate-100 text-slate-600"}`,children:i+1}),e.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-indigo-600 font-medium",children:(d.name||d.email||"?").charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:d.name||d.email}),e.jsx("p",{className:"text-sm text-slate-500",children:d.company||""})]})]}),e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Revenue"}),e.jsx("p",{className:"font-semibold text-slate-900",children:Q(d.totalPurchases)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Network"}),e.jsx("p",{className:"font-semibold text-slate-900",children:d.networkSize})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Growth"}),e.jsxs("div",{className:`flex items-center justify-end space-x-1 ${d.growth>=0?"text-emerald-600":"text-red-600"}`,children:[d.growth>=0?e.jsx(dt,{className:"h-4 w-4"}):e.jsx(ft,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-semibold",children:[Math.abs(d.growth),"%"]})]})]})]})]},d.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-5 border-b border-slate-100",children:e.jsx("h3",{className:"font-semibold text-slate-900",children:"All Partners Performance"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Partner"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Discount"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-700",children:"Purchases"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-700",children:"Est. Profit"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-700",children:"Network"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-700",children:"Signups"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-700",children:"Conversion"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-700",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(d=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-9 h-9 bg-slate-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"font-medium text-sm",children:(d.name||d.email||"?").charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:d.name||d.email}),e.jsx("p",{className:"text-xs text-slate-500",children:d.company||""})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium",children:[d.discountRate,"%"]})}),e.jsx("td",{className:"px-4 py-4 text-right font-medium",children:Q(d.totalPurchases)}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx("span",{className:d.estimatedProfit>=0?"text-emerald-600":"text-red-600",children:Q(d.estimatedProfit)})}),e.jsx("td",{className:"px-4 py-4 text-right",children:d.networkSize}),e.jsx("td",{className:"px-4 py-4 text-right",children:d.customerSignups}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("div",{className:"w-16 bg-slate-100 rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:`${d.conversionRate}%`}})}),e.jsxs("span",{className:"text-sm",children:[d.conversionRate,"%"]})]})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d.status==="active"?"bg-emerald-100 text-emerald-700":d.status==="pending"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-700"}`,children:d.status})})]},d.id))})]})})]})]})}function Za(){const{db:s,updateSiteSettings:o}=Z(),[a,c]=S.useState(!1),[u,h]=S.useState(""),[f,y]=S.useState({companyName:"",companyDescription:"",contactEmail:"",contactPhone:"",contactLocation:"",businessHours:"",shippingInfo:""});S.useEffect(()=>{s.siteSettings&&y({companyName:s.siteSettings.companyName||"",companyDescription:s.siteSettings.companyDescription||"",contactEmail:s.siteSettings.contactEmail||"",contactPhone:s.siteSettings.contactPhone||"",contactLocation:s.siteSettings.contactLocation||"",businessHours:s.siteSettings.businessHours||"",shippingInfo:s.siteSettings.shippingInfo||""})},[s.siteSettings]);const l=async n=>{n.preventDefault(),c(!0),h("");const t=await o(f);c(!1),t&&(h("Settings updated successfully"),setTimeout(()=>h(""),3e3))};return e.jsxs("div",{className:"space-y-6 max-w-4xl",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Global Site Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage landing page content, contact info, and site details."})]})}),e.jsx("div",{className:"bg-background rounded-lg border border-border p-6",children:e.jsxs("form",{onSubmit:l,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium border-b border-border pb-2",children:"Landing Page"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"These fields are displayed on the public landing page that visitors see before logging in."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Name"}),e.jsx("input",{type:"text",value:f.companyName,onChange:n=>y({...f,companyName:n.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"Golden Tier Peptide",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Description"}),e.jsx("textarea",{value:f.companyDescription,onChange:n=>y({...f,companyDescription:n.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"Premium research-grade peptides...",rows:3,required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium border-b border-border pb-2",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Support Email"}),e.jsx("input",{type:"email",value:f.contactEmail,onChange:n=>y({...f,contactEmail:n.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"support@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone Number (or Instructions)"}),e.jsx("input",{type:"text",value:f.contactPhone,onChange:n=>y({...f,contactPhone:n.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"e.g. +1 (555) 000-0000 or 'Email first'",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),e.jsx("input",{type:"text",value:f.contactLocation,onChange:n=>y({...f,contactLocation:n.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"United States",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Business Hours"}),e.jsx("input",{type:"text",value:f.businessHours,onChange:n=>y({...f,businessHours:n.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"Mon-Fri, 9AM-5PM",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium border-b border-border pb-2",children:"Policy Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Shipping Info Short Text"}),e.jsx("input",{type:"text",value:f.shippingInfo,onChange:n=>y({...f,shippingInfo:n.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"Shipping worldwide",required:!0})]})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-border",children:[e.jsxs("button",{type:"submit",disabled:a,className:"flex items-center space-x-2 px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50",children:[e.jsx(Lt,{className:"h-4 w-4"}),e.jsx("span",{children:a?"Saving...":"Save Settings"})]}),u&&e.jsxs("span",{className:"text-green-600 text-sm font-medium flex items-center gap-1",children:[e.jsx(Re,{className:"h-4 w-4"})," ",u]})]})]})})]})}const Ge=20,er={login:is,logout:is,register:de,order:fs,product:te,partner:de,settings:Ms,security:ps},sr={create:"bg-emerald-100 text-emerald-700",update:"bg-blue-100 text-blue-700",delete:"bg-red-100 text-red-700",login:"bg-purple-100 text-purple-700",logout:"bg-slate-100 text-slate-700",view:"bg-amber-100 text-amber-700"};function tr(s){const o=s.toLowerCase();for(const[a,c]of Object.entries(sr))if(o.includes(a))return c;return"bg-slate-100 text-slate-700"}function ar(s){if(!s)return Ie;const o=s.toLowerCase();for(const[a,c]of Object.entries(er))if(o.includes(a))return c;return Ie}function rr(){const[s,o]=S.useState([]),[a,c]=S.useState(!0),[u,h]=S.useState(""),[f,y]=S.useState("all"),[l,n]=S.useState(null),[t,r]=S.useState(0),[x,N]=S.useState(0),[g,m]=S.useState(!1),b=S.useCallback(async()=>{c(!0);let i=xe.from("audit_log").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(t*Ge,(t+1)*Ge-1);f!=="all"&&(i=i.eq("entity_type",f)),u&&(i=i.or(`action.ilike.%${u}%,entity_type.ilike.%${u}%,entity_id.ilike.%${u}%`));const{data:A,count:p,error:k}=await i;if(k){console.error("Error fetching audit logs:",k),c(!1);return}const w=[...new Set((A||[]).map(T=>T.user_id).filter(Boolean))];let I={};if(w.length>0){const{data:T}=await xe.from("profiles").select("id, email, full_name").in("id",w);T&&(I=Object.fromEntries(T.map(B=>[B.id,{email:B.email,full_name:B.full_name}])))}const j=(A||[]).map(T=>({...T,user_email:T.user_id?I[T.user_id]?.email:void 0,user_name:T.user_id&&I[T.user_id]?.full_name||void 0}));o(j),N(p||0),c(!1)},[t,f,u]);S.useEffect(()=>{b()},[b]);const R=async()=>{m(!0),await b(),m(!1)},E=Math.ceil(x/Ge),d=["all","order","product","partner","customer","invitation_code","settings","auth"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Audit Log"}),e.jsx("p",{className:"text-slate-500",children:"Track all system actions and changes"})]}),e.jsxs("button",{onClick:R,disabled:g,className:"flex items-center space-x-2 px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50",children:[e.jsx(Ps,{className:`h-4 w-4 ${g?"animate-spin":""}`}),e.jsx("span",{className:"text-sm",children:"Refresh"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search actions, entities...",value:u,onChange:i=>{h(i.target.value),r(0)},className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg bg-white focus:ring-2 focus:ring-slate-200 focus:border-slate-300"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"h-4 w-4 text-slate-400"}),e.jsx("select",{value:f,onChange:i=>{y(i.target.value),r(0)},className:"px-3 py-2 border border-slate-200 rounded-lg bg-white focus:ring-2 focus:ring-slate-200",children:d.map(i=>e.jsx("option",{value:i,children:i==="all"?"All Types":i.replace("_"," ").replace(/\b\w/g,A=>A.toUpperCase())},i))})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-500",children:[e.jsxs("span",{children:[x," total entries"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Page ",t+1," of ",E||1]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"Time"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"Action"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"Entity"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"IP"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:a?e.jsx(as,{columns:6,rows:8}):s.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"px-4 py-12 text-center",children:[e.jsx(Ie,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"No audit log entries found"})]})}):s.map(i=>{const A=ar(i.entity_type);return e.jsxs(V.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 whitespace-nowrap",children:bs(i.created_at)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:i.user_name||"System"}),e.jsx("p",{className:"text-xs text-slate-400",children:i.user_email||i.user_id||"—"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${tr(i.action)}`,children:i.action})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"h-4 w-4 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-700",children:i.entity_type||"—"}),i.entity_id&&e.jsx("p",{className:"text-xs text-slate-400 font-mono truncate max-w-[150px]",children:i.entity_id})]})]})}),e.jsx("td",{className:"px-4 py-3 text-xs text-slate-400 font-mono",children:i.ip_address||"—"}),e.jsx("td",{className:"px-4 py-3",children:i.details&&Object.keys(i.details).length>0&&e.jsx("button",{onClick:()=>n(l===i.id?null:i.id),className:"p-1.5 hover:bg-slate-100 rounded-lg transition-colors",children:l===i.id?e.jsx(Ze,{className:"h-4 w-4 text-slate-400"}):e.jsx(ze,{className:"h-4 w-4 text-slate-400"})})})]}),l===i.id&&i.details&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-4 bg-slate-50",children:e.jsxs("div",{className:"max-w-3xl",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-2",children:"Details"}),e.jsx("pre",{className:"p-3 bg-white border border-slate-200 rounded-lg text-xs text-slate-600 overflow-x-auto whitespace-pre-wrap font-mono",children:JSON.stringify(i.details,null,2)})]})})})]},i.id)})})]})})}),E>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>r(i=>Math.max(0,i-1)),disabled:t===0,className:"flex items-center space-x-2 px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(As,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Previous"})]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,E)},(i,A)=>{let p;return E<=5||t<3?p=A:t>E-4?p=E-5+A:p=t-2+A,e.jsx("button",{onClick:()=>r(p),className:`w-8 h-8 rounded-lg text-sm font-medium transition-colors ${t===p?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-100"}`,children:p+1},p)})}),e.jsxs("button",{onClick:()=>r(i=>Math.min(E-1,i+1)),disabled:t>=E-1,className:"flex items-center space-x-2 px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"text-sm",children:"Next"}),e.jsx(Cs,{className:"h-4 w-4"})]})]})]})}function lr(){return e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{className:"h-3 w-24 bg-slate-100"}),e.jsx(X,{className:"h-7 w-20 bg-slate-100"})]}),e.jsx(X,{className:"w-10 h-10 rounded-lg bg-slate-100"})]}),e.jsx(X,{className:"h-4 w-32 bg-slate-100"})]})}function nr(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{className:"h-6 w-48 bg-slate-100"}),e.jsx(X,{className:"h-4 w-32 bg-slate-100"})]}),e.jsx(X,{className:"w-10 h-10 rounded-xl bg-slate-100"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((s,o)=>e.jsx(lr,{},o))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 p-6",children:[e.jsx(X,{className:"h-5 w-32 bg-slate-100 mb-6"}),e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((s,o)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3",children:[e.jsx(X,{className:"w-8 h-8 rounded-lg bg-slate-100"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(X,{className:"h-4 w-3/4 bg-slate-100"}),e.jsx(X,{className:"h-3 w-16 bg-slate-100"})]})]},o))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[e.jsx(X,{className:"h-5 w-28 bg-slate-100 mb-6"}),e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((s,o)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3",children:[e.jsx(X,{className:"w-8 h-8 rounded-lg bg-slate-100"}),e.jsx(X,{className:"h-4 w-32 bg-slate-100"})]},o))})]})]})]})}function ir(){const{db:s,isLoading:o}=Z(),a=S.useMemo(()=>{const t=new Date,r=new Date(t.getTime()-720*60*60*1e3),x=new Date(t.getTime()-1440*60*60*1e3),N=s.orders.filter(k=>new Date(k.createdAt)>=r),g=s.orders.filter(k=>new Date(k.createdAt)>=x&&new Date(k.createdAt)<r),m=N.reduce((k,w)=>k+w.total,0),b=g.reduce((k,w)=>k+w.total,0),R=b>0?(m-b)/b*100:0,E=g.length>0?(N.length-g.length)/g.length*100:0,d=s.customers.filter(k=>new Date(k.joinedAt)>=r).length,i=s.customers.filter(k=>new Date(k.joinedAt)>=x&&new Date(k.joinedAt)<r).length,A=i>0?(d-i)/i*100:0,p=s.products.filter(k=>k.stockQuantity<(k.lowStockThreshold||10)).length;return{totalRevenue:m,revenueChange:R,totalOrders:N.length,ordersChange:E,newCustomers:d,customersChange:A,lowStockCount:p}},[s.orders,s.customers,s.products]),c=S.useMemo(()=>{const t=[];return s.orders.slice(0,5).forEach(r=>{t.push({id:`order-${r.id}`,type:"order",message:`New order #${r.id} for ${Q(r.total)}`,timestamp:r.createdAt,read:!1})}),s.products.filter(r=>r.stockQuantity<(r.lowStockThreshold||10)).slice(0,3).forEach(r=>{t.push({id:`stock-${r.id}`,type:"inventory",message:`Low stock alert: ${r.name} (${r.stockQuantity} units left)`,timestamp:new Date().toISOString(),read:!1})}),t.sort((r,x)=>new Date(x.timestamp).getTime()-new Date(r.timestamp).getTime()),t.slice(0,10)},[s.orders,s.products]),[u,h]=S.useState(c),[f,y]=S.useState(()=>c.filter(t=>!t.read).length);S.useEffect(()=>{const t=xe.channel("dashboard-changes").on("postgres_changes",{event:"*",schema:"public",table:"orders"},r=>{if(r.eventType==="INSERT"){const x=r.new,N={id:`order-${x.id}`,type:"order",message:`New order #${x.id} for ${Q(Number(x.total))}`,timestamp:x.created_at,read:!1};h(g=>[N,...g].slice(0,10)),y(g=>g+1)}}).subscribe();return()=>{t.unsubscribe()}},[]);const l=t=>{switch(t){case"order":return e.jsx(we,{className:"h-4 w-4 text-emerald-500"});case"inventory":return e.jsx(Re,{className:"h-4 w-4 text-amber-500"});case"user":return e.jsx(ce,{className:"h-4 w-4 text-blue-500"});case"partner":return e.jsx(at,{className:"h-4 w-4 text-purple-500"});default:return e.jsx(Me,{className:"h-4 w-4 text-slate-400"})}},n=t=>{const r=new Date(t),N=Math.floor((new Date().getTime()-r.getTime())/1e3);return N<60?"Just now":N<3600?`${Math.floor(N/60)}m ago`:N<86400?`${Math.floor(N/3600)}h ago`:`${Math.floor(N/86400)}d ago`};return o?e.jsx(nr,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Dashboard Overview"}),e.jsx("p",{className:"text-slate-500",children:"Real-time business insights"})]}),e.jsxs("button",{className:"relative p-2 text-slate-600 hover:text-gold-600 hover:bg-gold-50 rounded-xl transition-colors",children:[e.jsx(bt,{className:"h-6 w-6"}),f>0&&e.jsx("span",{className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:f})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 mb-1",children:"30-Day Revenue"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:Q(a.totalRevenue)})]}),e.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:e.jsx(we,{className:"h-5 w-5 text-emerald-600"})})]}),a.revenueChange===0&&a.totalRevenue>0?e.jsxs("div",{className:"flex items-center text-sm text-blue-600",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 rounded-full text-xs font-medium",children:"New"}),e.jsx("span",{className:"text-slate-400 ml-2",children:"first month"})]}):e.jsxs("div",{className:`flex items-center text-sm ${a.revenueChange>=0?"text-emerald-600":"text-red-600"}`,children:[a.revenueChange>=0?e.jsx(je,{className:"h-4 w-4 mr-1"}):e.jsx(Ee,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"font-medium",children:[Math.abs(a.revenueChange).toFixed(1),"%"]}),e.jsx("span",{className:"text-slate-400 ml-1",children:"vs last month"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 mb-1",children:"Orders"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:a.totalOrders})]}),e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(te,{className:"h-5 w-5 text-blue-600"})})]}),a.ordersChange===0&&a.totalOrders>0?e.jsxs("div",{className:"flex items-center text-sm text-blue-600",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 rounded-full text-xs font-medium",children:"New"}),e.jsx("span",{className:"text-slate-400 ml-2",children:"first month"})]}):e.jsxs("div",{className:`flex items-center text-sm ${a.ordersChange>=0?"text-emerald-600":"text-red-600"}`,children:[a.ordersChange>=0?e.jsx(je,{className:"h-4 w-4 mr-1"}):e.jsx(Ee,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"font-medium",children:[Math.abs(a.ordersChange).toFixed(1),"%"]}),e.jsx("span",{className:"text-slate-400 ml-1",children:"vs last month"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 mb-1",children:"New Customers"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:a.newCustomers})]}),e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(ce,{className:"h-5 w-5 text-purple-600"})})]}),a.customersChange===0&&a.newCustomers>0?e.jsxs("div",{className:"flex items-center text-sm text-blue-600",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 rounded-full text-xs font-medium",children:"New"}),e.jsx("span",{className:"text-slate-400 ml-2",children:"first month"})]}):e.jsxs("div",{className:`flex items-center text-sm ${a.customersChange>=0?"text-emerald-600":"text-red-600"}`,children:[a.customersChange>=0?e.jsx(je,{className:"h-4 w-4 mr-1"}):e.jsx(Ee,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"font-medium",children:[Math.abs(a.customersChange).toFixed(1),"%"]}),e.jsx("span",{className:"text-slate-400 ml-1",children:"vs last month"})]})]}),e.jsxs("div",{className:`p-6 rounded-xl border ${a.lowStockCount>0?"bg-amber-50 border-amber-200":"bg-white border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 mb-1",children:"Low Stock Alerts"}),e.jsx("p",{className:`text-2xl font-semibold ${a.lowStockCount>0?"text-amber-600":"text-slate-900"}`,children:a.lowStockCount})]}),e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${a.lowStockCount>0?"bg-amber-100":"bg-slate-100"}`,children:e.jsx(Re,{className:`h-5 w-5 ${a.lowStockCount>0?"text-amber-600":"text-slate-600"}`})})]}),e.jsx("p",{className:"text-sm text-slate-500",children:a.lowStockCount>0?"Products need attention":"All stock levels healthy"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Recent Activity"}),e.jsx(oe,{to:"/admin/orders",className:"text-sm text-slate-600 hover:text-slate-900",children:"View all →"})]}),e.jsx("div",{className:"space-y-2",children:u.length>0?u.map(t=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${t.read?"bg-slate-50":"bg-slate-100"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center border border-slate-200",children:l(t.type)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 text-sm",children:t.message}),e.jsx("p",{className:"text-sm text-slate-500",children:n(t.timestamp)})]})]}),!t.read&&e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"})]},t.id)):e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No recent activity"})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(oe,{to:"/admin/products/new",className:"flex items-center space-x-3 p-3 hover:bg-slate-50 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:e.jsx(te,{className:"h-4 w-4 text-slate-600"})}),e.jsx("span",{className:"font-medium text-slate-700",children:"Add New Product"})]}),e.jsxs(oe,{to:"/admin/orders",className:"flex items-center space-x-3 p-3 hover:bg-slate-50 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:e.jsx(we,{className:"h-4 w-4 text-slate-600"})}),e.jsx("span",{className:"font-medium text-slate-700",children:"View Orders"})]}),e.jsxs(oe,{to:"/admin/invitation-codes",className:"flex items-center space-x-3 p-3 hover:bg-slate-50 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:e.jsx(ce,{className:"h-4 w-4 text-slate-600"})}),e.jsx("span",{className:"font-medium text-slate-700",children:"Generate Invite Code"})]}),a.lowStockCount>0&&e.jsxs(oe,{to:"/admin/inventory",className:"flex items-center space-x-3 p-3 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:e.jsx(Re,{className:"h-4 w-4 text-amber-600"})}),e.jsxs("span",{className:"font-medium text-amber-700",children:["Restock Inventory (",a.lowStockCount,")"]})]})]})]})]})]})}function Mr(){const[s,o]=S.useState(!0),{logout:a,user:c}=Ke(),u=rt(),h=[{path:"/admin",label:"Dashboard",icon:lt},{path:"/admin/products",label:"Products",icon:te},{path:"/admin/orders",label:"Orders",icon:fs},{path:"/admin/inventory",label:"Inventory",icon:te},{path:"/admin/customers",label:"Customers",icon:wt},{path:"/admin/partners",label:"Partners",icon:ce},{path:"/admin/partner-network",label:"Partner Network",icon:He},{path:"/admin/partner-analytics",label:"Analytics",icon:Ss},{path:"/admin/invitation-codes",label:"Invitation Codes",icon:Ns},{path:"/admin/qr-codes",label:"QR Codes",icon:ss},{path:"/admin/audit-log",label:"Audit Log",icon:Ie},{path:"/admin/settings",label:"Settings",icon:Ms}];return e.jsxs("div",{className:"min-h-screen bg-white flex relative",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none z-0 bg-[radial-gradient(ellipse_at_top_left,_rgba(212,175,55,0.03)_0%,_rgba(255,255,255,1)_80%)]"}),e.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white border-r border-[#D4AF37]/20 transform transition-transform duration-300 shadow-[0_0_40px_rgba(0,0,0,0.02)] ${s?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:e.jsxs("div",{className:"h-full flex flex-col relative z-20",children:[e.jsx("div",{className:"p-6 border-b border-[#D4AF37]/20",children:e.jsxs(oe,{to:"/",className:"flex items-center gap-3 group",children:[e.jsx("img",{src:"/brand-logo-gold.png",alt:"Logo",className:"h-12 w-auto group-hover:scale-105 transition-transform duration-500"}),e.jsx("span",{className:"text-[10px] uppercase tracking-[0.3em] text-[#AA771C] font-bold",children:"Admin"})]})}),e.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:h.map(f=>e.jsxs(oe,{to:f.path,className:`flex items-center space-x-3 px-4 py-3 text-[10px] font-bold tracking-[0.15em] uppercase transition-all duration-300 border ${u.pathname===f.path?"bg-[#111] text-[#D4AF37] border-[#D4AF37]/30 shadow-md":"text-slate-400 hover:text-[#AA771C] hover:bg-slate-50 hover:border-[#D4AF37]/10 border-transparent"}`,children:[e.jsx(f.icon,{className:"h-4 w-4"}),e.jsx("span",{children:f.label})]},f.path))}),e.jsxs("div",{className:"p-4 border-t border-[#D4AF37]/20 bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-[#D4AF37]/10 mb-3 shadow-sm",children:[e.jsx("div",{className:"w-8 h-8 bg-white border border-[#D4AF37]/30 flex items-center justify-center",children:e.jsx("span",{className:"text-[#D4AF37] font-serif text-sm",children:c?.name?.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-serif text-slate-900 text-sm truncate",children:c?.name}),e.jsx("p",{className:"text-[9px] tracking-widest text-slate-400 truncate uppercase",children:c?.email})]})]}),e.jsxs("button",{onClick:a,className:"flex items-center justify-center space-x-3 w-full px-4 py-3 text-[10px] font-bold tracking-[0.2em] uppercase text-slate-400 hover:text-[#AA771C] transition-colors border border-transparent hover:border-[#D4AF37]/30 hover:bg-slate-50",children:[e.jsx(nt,{className:"h-4 w-4"}),e.jsx("span",{children:"LOGOUT"})]})]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 relative z-10",children:[e.jsxs("header",{className:"bg-white/80 backdrop-blur-md border-b border-[#D4AF37]/20 px-8 py-4 flex items-center justify-between sticky top-0 z-40",children:[e.jsx("button",{onClick:()=>o(!s),className:"lg:hidden p-2 text-slate-400 hover:text-[#AA771C] transition-colors",children:s?e.jsx(ue,{className:"h-5 w-5"}):e.jsx(it,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-serif text-slate-900 hidden sm:block tracking-tight",children:"Dashboard"}),e.jsx(oe,{to:"/",className:"px-6 py-2.5 text-[10px] font-bold tracking-[0.2em] uppercase text-[#AA771C] border border-[#D4AF37]/30 hover:border-[#D4AF37] transition-all duration-300",children:"VIEW SITE"})]}),e.jsx("main",{className:"flex-1 p-8 md:p-12 overflow-auto",children:e.jsxs(ot,{children:[e.jsx(J,{path:"/",element:e.jsx(ir,{})}),e.jsx(J,{path:"/products",element:e.jsx(Jt,{})}),e.jsx(J,{path:"/inventory",element:e.jsx(Ka,{})}),e.jsx(J,{path:"/orders",element:e.jsx(Wa,{})}),e.jsx(J,{path:"/customers",element:e.jsx(Ya,{})}),e.jsx(J,{path:"/partners",element:e.jsx(Zt,{})}),e.jsx(J,{path:"/partner-network",element:e.jsx(ea,{})}),e.jsx(J,{path:"/partner-analytics",element:e.jsx(Ja,{})}),e.jsx(J,{path:"/invitation-codes",element:e.jsx(Xa,{})}),e.jsx(J,{path:"/qr-codes",element:e.jsx(sa,{})}),e.jsx(J,{path:"/audit-log",element:e.jsx(rr,{})}),e.jsx(J,{path:"/settings",element:e.jsx(Za,{})})]})})]})]})}export{Mr as AdminDashboard};
