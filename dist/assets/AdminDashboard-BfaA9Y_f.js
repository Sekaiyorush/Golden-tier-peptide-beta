import{c as $,R as I,b as F,r as w,j as e,P as he,S as K,d as Ce,U as le,X as ne,C as oe,e as Je,f as ge,T as Ze,M as es,u as ke,g as ss,s as ts,L as Y,h as as,i as ls,k as rs,l as ns,m as is,n as cs,o as ds,p as Q}from"./index-DLVWYm2D.js";import{P as Se,a as Pe,T as ae,C as xe,b as os,D as re,L as Ae,g as ye,U as Me,A as xs}from"./user-plus-BM2HrBkr.js";import{P as H,C as ce}from"./package-ps-LAQvV.js";import{U as q}from"./users-B6hT-ddo.js";import{M as Re}from"./mail-BqtZG96O.js";import{P as Ee}from"./phone-DkHB_xFi.js";import{B as ms}from"./building-2-BrPQ2b9A.js";import{E as hs}from"./eye-off-ETfkp0V0.js";import{E as De}from"./eye-CINBa-l9.js";import{C as Te}from"./circle-check-BuiVC55C.js";import{F as Ie,C as Le}from"./funnel-BM8HELis.js";import{T as us}from"./truck-12nforty.js";const ps=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],gs=$("arrow-down-right",ps);const fs=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],bs=$("bell",fs);const js=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],$e=$("chart-column",js);const Ns=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],vs=$("chevron-left",Ns);const ys=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Oe=$("chevron-up",ys);const ws=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Cs=$("circle-user",ws);const ks=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Ss=$("crown",ks);const Ps=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],_e=$("download",Ps);const As=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],fe=$("network",As);const Ms=[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]],Rs=$("package-search",Ms);const Es=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Ds=$("printer",Es);const Ts=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Ne=$("qr-code",Ts);const Is=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ls=$("refresh-cw",Is);const $s=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Os=$("save",$s);const _s=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Us=$("settings",_s);const Bs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Qs=$("target",Bs);const Fs=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ve=$("trash-2",Fs);const zs=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],de=$("trending-down",zs);var Hs=Object.defineProperty,me=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,we=(u,x,o)=>x in u?Hs(u,x,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[x]=o,be=(u,x)=>{for(var o in x||(x={}))Ue.call(x,o)&&we(u,o,x[o]);if(me)for(var o of me(x))Be.call(x,o)&&we(u,o,x[o]);return u},je=(u,x)=>{var o={};for(var f in u)Ue.call(u,f)&&x.indexOf(f)<0&&(o[f]=u[f]);if(u!=null&&me)for(var f of me(u))x.indexOf(f)<0&&Be.call(u,f)&&(o[f]=u[f]);return o};var J;(u=>{const x=class P{constructor(a,t,s,r){if(this.version=a,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],a<P.MIN_VERSION||a>P.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let c=[];for(let d=0;d<this.size;d++)c.push(!1);for(let d=0;d<this.size;d++)this.modules.push(c.slice()),this.isFunction.push(c.slice());this.drawFunctionPatterns();const i=this.addEccAndInterleave(s);if(this.drawCodewords(i),r==-1){let d=1e9;for(let l=0;l<8;l++){this.applyMask(l),this.drawFormatBits(l);const j=this.getPenaltyScore();j<d&&(r=l,d=j),this.applyMask(l)}}h(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(a,t){const s=u.QrSegment.makeSegments(a);return P.encodeSegments(s,t)}static encodeBinary(a,t){const s=u.QrSegment.makeBytes(a);return P.encodeSegments([s],t)}static encodeSegments(a,t,s=1,r=40,c=-1,i=!0){if(!(P.MIN_VERSION<=s&&s<=r&&r<=P.MAX_VERSION)||c<-1||c>7)throw new RangeError("Invalid value");let d,l;for(d=s;;d++){const n=P.getNumDataCodewords(d,t)*8,y=N.getTotalBits(a,d);if(y<=n){l=y;break}if(d>=r)throw new RangeError("Data too long")}for(const n of[P.Ecc.MEDIUM,P.Ecc.QUARTILE,P.Ecc.HIGH])i&&l<=P.getNumDataCodewords(d,n)*8&&(t=n);let j=[];for(const n of a){o(n.mode.modeBits,4,j),o(n.numChars,n.mode.numCharCountBits(d),j);for(const y of n.getData())j.push(y)}h(j.length==l);const S=P.getNumDataCodewords(d,t)*8;h(j.length<=S),o(0,Math.min(4,S-j.length),j),o(0,(8-j.length%8)%8,j),h(j.length%8==0);for(let n=236;j.length<S;n^=253)o(n,8,j);let C=[];for(;C.length*8<j.length;)C.push(0);return j.forEach((n,y)=>C[y>>>3]|=n<<7-(y&7)),new P(d,t,C,c)}getModule(a,t){return 0<=a&&a<this.size&&0<=t&&t<this.size&&this.modules[t][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let s=0;s<this.size;s++)this.setFunctionModule(6,s,s%2==0),this.setFunctionModule(s,6,s%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),t=a.length;for(let s=0;s<t;s++)for(let r=0;r<t;r++)s==0&&r==0||s==0&&r==t-1||s==t-1&&r==0||this.drawAlignmentPattern(a[s],a[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const t=this.errorCorrectionLevel.formatBits<<3|a;let s=t;for(let c=0;c<10;c++)s=s<<1^(s>>>9)*1335;const r=(t<<10|s)^21522;h(r>>>15==0);for(let c=0;c<=5;c++)this.setFunctionModule(8,c,f(r,c));this.setFunctionModule(8,7,f(r,6)),this.setFunctionModule(8,8,f(r,7)),this.setFunctionModule(7,8,f(r,8));for(let c=9;c<15;c++)this.setFunctionModule(14-c,8,f(r,c));for(let c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,f(r,c));for(let c=8;c<15;c++)this.setFunctionModule(8,this.size-15+c,f(r,c));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let s=0;s<12;s++)a=a<<1^(a>>>11)*7973;const t=this.version<<12|a;h(t>>>18==0);for(let s=0;s<18;s++){const r=f(t,s),c=this.size-11+s%3,i=Math.floor(s/3);this.setFunctionModule(c,i,r),this.setFunctionModule(i,c,r)}}drawFinderPattern(a,t){for(let s=-4;s<=4;s++)for(let r=-4;r<=4;r++){const c=Math.max(Math.abs(r),Math.abs(s)),i=a+r,d=t+s;0<=i&&i<this.size&&0<=d&&d<this.size&&this.setFunctionModule(i,d,c!=2&&c!=4)}}drawAlignmentPattern(a,t){for(let s=-2;s<=2;s++)for(let r=-2;r<=2;r++)this.setFunctionModule(a+r,t+s,Math.max(Math.abs(r),Math.abs(s))!=1)}setFunctionModule(a,t,s){this.modules[t][a]=s,this.isFunction[t][a]=!0}addEccAndInterleave(a){const t=this.version,s=this.errorCorrectionLevel;if(a.length!=P.getNumDataCodewords(t,s))throw new RangeError("Invalid argument");const r=P.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][t],c=P.ECC_CODEWORDS_PER_BLOCK[s.ordinal][t],i=Math.floor(P.getNumRawDataModules(t)/8),d=r-i%r,l=Math.floor(i/r);let j=[];const S=P.reedSolomonComputeDivisor(c);for(let n=0,y=0;n<r;n++){let A=a.slice(y,y+l-c+(n<d?0:1));y+=A.length;const m=P.reedSolomonComputeRemainder(A,S);n<d&&A.push(0),j.push(A.concat(m))}let C=[];for(let n=0;n<j[0].length;n++)j.forEach((y,A)=>{(n!=l-c||A>=d)&&C.push(y[n])});return h(C.length==i),C}drawCodewords(a){if(a.length!=Math.floor(P.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let s=this.size-1;s>=1;s-=2){s==6&&(s=5);for(let r=0;r<this.size;r++)for(let c=0;c<2;c++){const i=s-c,l=(s+1&2)==0?this.size-1-r:r;!this.isFunction[l][i]&&t<a.length*8&&(this.modules[l][i]=f(a[t>>>3],7-(t&7)),t++)}}h(t==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let s=0;s<this.size;s++){let r;switch(a){case 0:r=(s+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=s%3==0;break;case 3:r=(s+t)%3==0;break;case 4:r=(Math.floor(s/3)+Math.floor(t/2))%2==0;break;case 5:r=s*t%2+s*t%3==0;break;case 6:r=(s*t%2+s*t%3)%2==0;break;case 7:r=((s+t)%2+s*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][s]&&r&&(this.modules[t][s]=!this.modules[t][s])}}getPenaltyScore(){let a=0;for(let c=0;c<this.size;c++){let i=!1,d=0,l=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[c][j]==i?(d++,d==5?a+=P.PENALTY_N1:d>5&&a++):(this.finderPenaltyAddHistory(d,l),i||(a+=this.finderPenaltyCountPatterns(l)*P.PENALTY_N3),i=this.modules[c][j],d=1);a+=this.finderPenaltyTerminateAndCount(i,d,l)*P.PENALTY_N3}for(let c=0;c<this.size;c++){let i=!1,d=0,l=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][c]==i?(d++,d==5?a+=P.PENALTY_N1:d>5&&a++):(this.finderPenaltyAddHistory(d,l),i||(a+=this.finderPenaltyCountPatterns(l)*P.PENALTY_N3),i=this.modules[j][c],d=1);a+=this.finderPenaltyTerminateAndCount(i,d,l)*P.PENALTY_N3}for(let c=0;c<this.size-1;c++)for(let i=0;i<this.size-1;i++){const d=this.modules[c][i];d==this.modules[c][i+1]&&d==this.modules[c+1][i]&&d==this.modules[c+1][i+1]&&(a+=P.PENALTY_N2)}let t=0;for(const c of this.modules)t=c.reduce((i,d)=>i+(d?1:0),t);const s=this.size*this.size,r=Math.ceil(Math.abs(t*20-s*10)/s)-1;return h(0<=r&&r<=9),a+=r*P.PENALTY_N4,h(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let s=[6];for(let r=this.size-7;s.length<a;r-=t)s.splice(1,0,r);return s}}static getNumRawDataModules(a){if(a<P.MIN_VERSION||a>P.MAX_VERSION)throw new RangeError("Version number out of range");let t=(16*a+128)*a+64;if(a>=2){const s=Math.floor(a/7)+2;t-=(25*s-10)*s-55,a>=7&&(t-=36)}return h(208<=t&&t<=29648),t}static getNumDataCodewords(a,t){return Math.floor(P.getNumRawDataModules(a)/8)-P.ECC_CODEWORDS_PER_BLOCK[t.ordinal][a]*P.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let t=[];for(let r=0;r<a-1;r++)t.push(0);t.push(1);let s=1;for(let r=0;r<a;r++){for(let c=0;c<t.length;c++)t[c]=P.reedSolomonMultiply(t[c],s),c+1<t.length&&(t[c]^=t[c+1]);s=P.reedSolomonMultiply(s,2)}return t}static reedSolomonComputeRemainder(a,t){let s=t.map(r=>0);for(const r of a){const c=r^s.shift();s.push(0),t.forEach((i,d)=>s[d]^=P.reedSolomonMultiply(i,c))}return s}static reedSolomonMultiply(a,t){if(a>>>8||t>>>8)throw new RangeError("Byte out of range");let s=0;for(let r=7;r>=0;r--)s=s<<1^(s>>>7)*285,s^=(t>>>r&1)*a;return h(s>>>8==0),s}finderPenaltyCountPatterns(a){const t=a[1];h(t<=this.size*3);const s=t>0&&a[2]==t&&a[3]==t*3&&a[4]==t&&a[5]==t;return(s&&a[0]>=t*4&&a[6]>=t?1:0)+(s&&a[6]>=t*4&&a[0]>=t?1:0)}finderPenaltyTerminateAndCount(a,t,s){return a&&(this.finderPenaltyAddHistory(t,s),t=0),t+=this.size,this.finderPenaltyAddHistory(t,s),this.finderPenaltyCountPatterns(s)}finderPenaltyAddHistory(a,t){t[0]==0&&(a+=this.size),t.pop(),t.unshift(a)}};x.MIN_VERSION=1,x.MAX_VERSION=40,x.PENALTY_N1=3,x.PENALTY_N2=3,x.PENALTY_N3=40,x.PENALTY_N4=10,x.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],x.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],u.QrCode=x;function o(v,a,t){if(a<0||a>31||v>>>a)throw new RangeError("Value out of range");for(let s=a-1;s>=0;s--)t.push(v>>>s&1)}function f(v,a){return(v>>>a&1)!=0}function h(v){if(!v)throw new Error("Assertion error")}const p=class D{constructor(a,t,s){if(this.mode=a,this.numChars=t,this.bitData=s,t<0)throw new RangeError("Invalid argument");this.bitData=s.slice()}static makeBytes(a){let t=[];for(const s of a)o(s,8,t);return new D(D.Mode.BYTE,a.length,t)}static makeNumeric(a){if(!D.isNumeric(a))throw new RangeError("String contains non-numeric characters");let t=[];for(let s=0;s<a.length;){const r=Math.min(a.length-s,3);o(parseInt(a.substring(s,s+r),10),r*3+1,t),s+=r}return new D(D.Mode.NUMERIC,a.length,t)}static makeAlphanumeric(a){if(!D.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t=[],s;for(s=0;s+2<=a.length;s+=2){let r=D.ALPHANUMERIC_CHARSET.indexOf(a.charAt(s))*45;r+=D.ALPHANUMERIC_CHARSET.indexOf(a.charAt(s+1)),o(r,11,t)}return s<a.length&&o(D.ALPHANUMERIC_CHARSET.indexOf(a.charAt(s)),6,t),new D(D.Mode.ALPHANUMERIC,a.length,t)}static makeSegments(a){return a==""?[]:D.isNumeric(a)?[D.makeNumeric(a)]:D.isAlphanumeric(a)?[D.makeAlphanumeric(a)]:[D.makeBytes(D.toUtf8ByteArray(a))]}static makeEci(a){let t=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)o(a,8,t);else if(a<16384)o(2,2,t),o(a,14,t);else if(a<1e6)o(6,3,t),o(a,21,t);else throw new RangeError("ECI assignment value out of range");return new D(D.Mode.ECI,0,t)}static isNumeric(a){return D.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return D.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,t){let s=0;for(const r of a){const c=r.mode.numCharCountBits(t);if(r.numChars>=1<<c)return 1/0;s+=4+c+r.bitData.length}return s}static toUtf8ByteArray(a){a=encodeURI(a);let t=[];for(let s=0;s<a.length;s++)a.charAt(s)!="%"?t.push(a.charCodeAt(s)):(t.push(parseInt(a.substring(s+1,s+3),16)),s+=2);return t}};p.NUMERIC_REGEX=/^[0-9]*$/,p.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,p.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let N=p;u.QrSegment=p})(J||(J={}));(u=>{(x=>{const o=class{constructor(h,p){this.ordinal=h,this.formatBits=p}};o.LOW=new o(0,1),o.MEDIUM=new o(1,0),o.QUARTILE=new o(2,3),o.HIGH=new o(3,2),x.Ecc=o})(u.QrCode||(u.QrCode={}))})(J||(J={}));(u=>{(x=>{const o=class{constructor(h,p){this.modeBits=h,this.numBitsCharCount=p}numCharCountBits(h){return this.numBitsCharCount[Math.floor((h+7)/17)]}};o.NUMERIC=new o(1,[10,12,14]),o.ALPHANUMERIC=new o(2,[9,11,13]),o.BYTE=new o(4,[8,16,16]),o.KANJI=new o(8,[8,10,12]),o.ECI=new o(7,[0,0,0]),x.Mode=o})(u.QrSegment||(u.QrSegment={}))})(J||(J={}));var te=J;var Gs={L:te.QrCode.Ecc.LOW,M:te.QrCode.Ecc.MEDIUM,Q:te.QrCode.Ecc.QUARTILE,H:te.QrCode.Ecc.HIGH},Qe=128,Fe="L",ze="#FFFFFF",He="#000000",Ge=!1,Ve=1,Vs=4,Ys=0,qs=.1;function Ye(u,x=0){const o=[];return u.forEach(function(f,h){let p=null;f.forEach(function(N,v){if(!N&&p!==null){o.push(`M${p+x} ${h+x}h${v-p}v1H${p+x}z`),p=null;return}if(v===f.length-1){if(!N)return;p===null?o.push(`M${v+x},${h+x} h1v1H${v+x}z`):o.push(`M${p+x},${h+x} h${v+1-p}v1H${p+x}z`);return}N&&p===null&&(p=v)})}),o.join("")}function qe(u,x){return u.slice().map((o,f)=>f<x.y||f>=x.y+x.h?o:o.map((h,p)=>p<x.x||p>=x.x+x.w?h:!1))}function Ks(u,x,o,f){if(f==null)return null;const h=u.length+o*2,p=Math.floor(x*qs),N=h/x,v=(f.width||p)*N,a=(f.height||p)*N,t=f.x==null?u.length/2-v/2:f.x*N,s=f.y==null?u.length/2-a/2:f.y*N,r=f.opacity==null?1:f.opacity;let c=null;if(f.excavate){let d=Math.floor(t),l=Math.floor(s),j=Math.ceil(v+t-d),S=Math.ceil(a+s-l);c={x:d,y:l,w:j,h:S}}const i=f.crossOrigin;return{x:t,y:s,h:a,w:v,excavation:c,opacity:r,crossOrigin:i}}function Xs(u,x){return x!=null?Math.max(Math.floor(x),0):u?Vs:Ys}function Ke({value:u,level:x,minVersion:o,includeMargin:f,marginSize:h,imageSettings:p,size:N,boostLevel:v}){let a=I.useMemo(()=>{const d=(Array.isArray(u)?u:[u]).reduce((l,j)=>(l.push(...te.QrSegment.makeSegments(j)),l),[]);return te.QrCode.encodeSegments(d,Gs[x],o,void 0,void 0,v)},[u,x,o,v]);const{cells:t,margin:s,numCells:r,calculatedImageSettings:c}=I.useMemo(()=>{let i=a.getModules();const d=Xs(f,h),l=i.length+d*2,j=Ks(i,N,d,p);return{cells:i,margin:d,numCells:l,calculatedImageSettings:j}},[a,N,p,f,h]);return{qrcode:a,margin:s,cells:t,numCells:r,calculatedImageSettings:c}}var Ws=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Js=I.forwardRef(function(x,o){const f=x,{value:h,size:p=Qe,level:N=Fe,bgColor:v=ze,fgColor:a=He,includeMargin:t=Ge,minVersion:s=Ve,boostLevel:r,marginSize:c,imageSettings:i}=f,l=je(f,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=l,S=je(l,["style"]),C=i?.src,n=I.useRef(null),y=I.useRef(null),A=I.useCallback(k=>{n.current=k,typeof o=="function"?o(k):o&&(o.current=k)},[o]),[m,E]=I.useState(!1),{margin:M,cells:T,numCells:O,calculatedImageSettings:L}=Ke({value:h,level:N,minVersion:s,boostLevel:r,includeMargin:t,marginSize:c,imageSettings:i,size:p});I.useEffect(()=>{if(n.current!=null){const k=n.current,R=k.getContext("2d");if(!R)return;let B=T;const z=y.current,Z=L!=null&&z!==null&&z.complete&&z.naturalHeight!==0&&z.naturalWidth!==0;Z&&L.excavation!=null&&(B=qe(T,L.excavation));const ee=window.devicePixelRatio||1;k.height=k.width=p*ee;const X=p/O*ee;R.scale(X,X),R.fillStyle=v,R.fillRect(0,0,O,O),R.fillStyle=a,Ws?R.fill(new Path2D(Ye(B,M))):T.forEach(function(W,U){W.forEach(function(V,ie){V&&R.fillRect(ie+M,U+M,1,1)})}),L&&(R.globalAlpha=L.opacity),Z&&R.drawImage(z,L.x+M,L.y+M,L.w,L.h)}}),I.useEffect(()=>{E(!1)},[C]);const G=be({height:p,width:p},j);let g=null;return C!=null&&(g=I.createElement("img",{src:C,key:C,style:{display:"none"},onLoad:()=>{E(!0)},ref:y,crossOrigin:L?.crossOrigin})),I.createElement(I.Fragment,null,I.createElement("canvas",be({style:G,height:p,width:p,ref:A,role:"img"},S)),g)});Js.displayName="QRCodeCanvas";var ue=I.forwardRef(function(x,o){const f=x,{value:h,size:p=Qe,level:N=Fe,bgColor:v=ze,fgColor:a=He,includeMargin:t=Ge,minVersion:s=Ve,boostLevel:r,title:c,marginSize:i,imageSettings:d}=f,l=je(f,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:S,numCells:C,calculatedImageSettings:n}=Ke({value:h,level:N,minVersion:s,boostLevel:r,includeMargin:t,marginSize:i,imageSettings:d,size:p});let y=S,A=null;d!=null&&n!=null&&(n.excavation!=null&&(y=qe(S,n.excavation)),A=I.createElement("image",{href:d.src,height:n.h,width:n.w,x:n.x+j,y:n.y+j,preserveAspectRatio:"none",opacity:n.opacity,crossOrigin:n.crossOrigin}));const m=Ye(y,j);return I.createElement("svg",be({height:p,width:p,viewBox:`0 0 ${C} ${C}`,ref:o,role:"img"},l),!!c&&I.createElement("title",null,c),I.createElement("path",{fill:v,d:`M0,0 h${C}v${C}H0z`,shapeRendering:"crispEdges"}),I.createElement("path",{fill:a,d:m,shapeRendering:"crispEdges"}),A)});ue.displayName="QRCodeSVG";function Zs(){const{db:u,addProduct:x,updateProduct:o,deleteProduct:f}=F(),h=u.products,p=Array.from(new Set(h.map(m=>m.category))).sort(),[N,v]=w.useState(""),[a,t]=w.useState(!1),[s,r]=w.useState(null),[c,i]=w.useState(null),[d,l]=w.useState({name:"",description:"",fullDescription:"",price:"",category:"",purity:"99.0%",stockQuantity:"0",sku:"",benefits:"",dosage:"",imageUrl:""}),j=h.filter(m=>m.name.toLowerCase().includes(N.toLowerCase())||m.sku.toLowerCase().includes(N.toLowerCase())||m.category.toLowerCase().includes(N.toLowerCase())),S=()=>{r(null),l({name:"",description:"",fullDescription:"",price:"",category:"",purity:"99.0%",stockQuantity:"0",sku:"",benefits:"",dosage:"",imageUrl:""}),t(!0)},C=m=>{r(m),l({name:m.name,description:m.description,fullDescription:m.fullDescription||"",price:m.price.toString(),category:m.category,purity:m.purity,stockQuantity:m.stockQuantity.toString(),sku:m.sku,benefits:m.benefits?.join(`
`)||"",dosage:m.dosage||"",imageUrl:m.imageUrl||""}),t(!0)},n=m=>{confirm("Are you sure you want to delete this product?")&&f(m)},y=m=>{m.preventDefault();const E={id:s?.id||Date.now().toString(),name:d.name,description:d.description,fullDescription:d.fullDescription,price:parseFloat(d.price),category:d.category,purity:d.purity,inStock:parseInt(d.stockQuantity)>0,stockQuantity:parseInt(d.stockQuantity),sku:d.sku,benefits:d.benefits.split(`
`).filter(Boolean),dosage:d.dosage,imageUrl:d.imageUrl,createdAt:s?.createdAt||new Date().toISOString().split("T")[0],updatedAt:new Date().toISOString().split("T")[0]};s?o(s.id,E):x(E),t(!1)},A=m=>JSON.stringify({id:m.id,sku:m.sku,name:m.name,batch:`BATCH-${Date.now().toString(36).toUpperCase()}`,manufactured:new Date().toISOString().split("T")[0],purity:m.purity});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Products Management"}),e.jsxs("button",{onClick:S,className:"flex items-center space-x-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Product"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search products by name, SKU, or category...",value:N,onChange:m=>v(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{className:"bg-background rounded-lg border border-border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-surface-alt",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"SKU"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Purity"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:j.map(m=>e.jsxs("tr",{className:"hover:bg-surface-alt/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m.name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate max-w-xs",children:m.description})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:m.sku}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded-full text-xs",children:m.category})}),e.jsxs("td",{className:"px-4 py-3 text-sm font-medium",children:["$",m.price.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`${m.stockQuantity<20?"text-destructive":"text-green-600"}`,children:m.stockQuantity})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:m.purity}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>i(m),className:"p-2 hover:bg-surface-alt rounded-lg text-muted-foreground hover:text-primary",title:"Generate QR Code",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>C(m),className:"p-2 hover:bg-surface-alt rounded-lg text-muted-foreground hover:text-primary",title:"Edit",children:e.jsx(Se,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>n(m.id),className:"p-2 hover:bg-surface-alt rounded-lg text-muted-foreground hover:text-destructive",title:"Delete",children:e.jsx(ve,{className:"h-4 w-4"})})]})})]},m.id))})]})}),j.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(H,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No products found"})]})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-background rounded-lg max-w-2xl w-full max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"p-6 border-b border-border flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s?"Edit Product":"Add New Product"}),e.jsx("button",{onClick:()=>t(!1),className:"p-2 hover:bg-surface-alt rounded-lg",children:e.jsx(vs,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:y,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Product Name *"}),e.jsx("input",{type:"text",required:!0,value:d.name,onChange:m=>l({...d,name:m.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"SKU *"}),e.jsx("input",{type:"text",required:!0,value:d.sku,onChange:m=>l({...d,sku:m.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Short Description *"}),e.jsx("input",{type:"text",required:!0,value:d.description,onChange:m=>l({...d,description:m.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Description"}),e.jsx("textarea",{rows:3,value:d.fullDescription,onChange:m=>l({...d,fullDescription:m.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Image URL"}),e.jsx("input",{type:"url",value:d.imageUrl,onChange:m=>l({...d,imageUrl:m.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price ($) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:d.price,onChange:m=>l({...d,price:m.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Stock Quantity *"}),e.jsx("input",{type:"number",required:!0,value:d.stockQuantity,onChange:m=>l({...d,stockQuantity:m.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Purity"}),e.jsx("input",{type:"text",value:d.purity,onChange:m=>l({...d,purity:m.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),e.jsx("input",{type:"text",list:"category-options",value:d.category,onChange:m=>l({...d,category:m.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"e.g. Healing, Metabolism",required:!0}),e.jsx("datalist",{id:"category-options",children:p.map(m=>e.jsx("option",{value:m},m))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dosage Protocol"}),e.jsx("input",{type:"text",value:d.dosage,onChange:m=>l({...d,dosage:m.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Benefits (one per line)"}),e.jsx("textarea",{rows:3,value:d.benefits,onChange:m=>l({...d,benefits:m.target.value}),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"Enter benefits, one per line..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 border border-input rounded-lg hover:bg-surface-alt transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:s?"Update Product":"Create Product"})]})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-background rounded-lg p-6 max-w-sm w-full",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Product QR Code"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.sku})]}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(ue,{value:A(c),size:200,level:"H",includeMargin:!0})}),e.jsx("div",{className:"text-center text-xs text-muted-foreground mb-4",children:e.jsx("p",{children:"Scan to track product inventory"})}),e.jsx("button",{onClick:()=>i(null),className:"w-full px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:"Close"})]})})]})}const pe={name:"",email:"",password:"",company:"",phone:"",discountRate:"20",status:"active",referredBy:"",notes:""};function et(){const{db:u,addPartner:x,updatePartner:o,deletePartner:f}=F(),h=u.partners,[p,N]=w.useState(""),[v,a]=w.useState(!1),[t,s]=w.useState(null),[r,c]=w.useState(pe),[i,d]=w.useState(!1),[l,j]=w.useState(!1),[S,C]=w.useState(null),[n,y]=w.useState(null),A=h.filter(g=>g.name.toLowerCase().includes(p.toLowerCase())||g.email.toLowerCase().includes(p.toLowerCase())||g.company.toLowerCase().includes(p.toLowerCase())),m=()=>{s(null);const g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%";let k="";for(let R=0;R<12;R++)k+=g.charAt(Math.floor(Math.random()*g.length));c({...pe,password:k}),C(null),a(!0)},E=g=>{s(g),c({name:g.name||"",email:g.email||"",password:"",company:g.company||"",phone:g.phone||"",discountRate:g.discountRate?.toString()||"20",status:g.status||"pending",referredBy:g.referredBy||"",notes:g.notes||""}),C(null),a(!0)},M=async g=>{if(window.confirm(`Are you SURE you want to completely delete the partner account for ${g.name}? This action cannot be undone and will permanently remove their access.`)){const k=await f(g.id);k.success||alert(`Failed to delete partner: ${k.error}`)}},T=()=>{a(!1),s(null),c(pe),C(null)},O=(g,k)=>{navigator.clipboard.writeText(g),y(k),setTimeout(()=>y(null),2e3)},L=async g=>{if(g.preventDefault(),!r.name||!r.email||!r.company||!r.phone){alert("Please fill in all required fields");return}if(d(!0),t)o(t.id,{name:r.name,email:r.email,company:r.company,phone:r.phone,status:r.status,discountRate:parseInt(r.discountRate)||20,referredBy:r.referredBy||void 0,notes:r.notes}),d(!1),T();else{if(!r.password||r.password.length<6){alert("Password must be at least 6 characters"),d(!1);return}const k=await x({name:r.name,email:r.email,password:r.password,company:r.company,phone:r.phone,discountRate:parseInt(r.discountRate)||20,status:r.status,referredBy:r.referredBy||void 0,notes:r.notes});d(!1),k.success?C({email:r.email,password:r.password}):alert(`Error creating partner: ${k.error}`)}},G=g=>{switch(g){case"active":return"bg-emerald-100 text-emerald-700";case"inactive":return"bg-slate-100 text-slate-700";case"pending":return"bg-amber-100 text-amber-700";default:return"bg-slate-100 text-slate-700"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Partners"}),e.jsx("p",{className:"text-slate-500",children:"Manage your partner network and discount rates"})]}),e.jsxs("button",{onClick:m,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Partner"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(q,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Total Partners"})]}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:h.length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Pe,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Active"})]}),e.jsx("p",{className:"text-2xl font-semibold text-emerald-600",children:h.filter(g=>g.status==="active").length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ce,{className:"h-4 w-4 text-indigo-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Total Purchases"})]}),e.jsxs("p",{className:"text-2xl font-semibold text-slate-900",children:["$",h.reduce((g,k)=>g+k.totalPurchases,0).toLocaleString()]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ae,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Total Resold"})]}),e.jsxs("p",{className:"text-2xl font-semibold text-slate-900",children:["$",h.reduce((g,k)=>g+k.totalResold,0).toLocaleString()]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search partners by name, email, or company...",value:p,onChange:g=>N(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg bg-white focus:ring-2 focus:ring-slate-200"})]}),A.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(g=>e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center",children:e.jsx(le,{className:"h-6 w-6 text-slate-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:g.name}),e.jsx("p",{className:"text-sm text-slate-500",children:g.company})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs capitalize ${G(g.status)}`,children:g.status})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Re,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),e.jsx("span",{className:"text-slate-600 truncate",children:g.email})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Ee,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),e.jsx("span",{className:"text-slate-600",children:g.phone})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(ms,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),e.jsxs("span",{className:"text-slate-600",children:["Joined ",new Date(g.joinedAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-4 border-t border-slate-100",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Discount"}),e.jsxs("p",{className:"font-semibold text-indigo-600",children:[g.discountRate,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Purchases"}),e.jsxs("p",{className:"font-semibold text-slate-900",children:["$",g.totalPurchases.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Resold"}),e.jsxs("p",{className:"font-semibold text-emerald-600",children:["$",g.totalResold.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-1 mt-4 pt-4 border-t border-slate-100",children:[e.jsx("button",{onClick:()=>E(g),className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500 hover:text-slate-900 transition-colors",title:"Edit partner",children:e.jsx(Se,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>M(g),className:"p-2 rounded-lg transition-colors hover:bg-red-50 text-slate-500 hover:text-red-600",title:"Delete partner permanently",children:e.jsx(ve,{className:"h-4 w-4"})})]})]},g.id))}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[e.jsx(le,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:p?"No partners found matching your search":"No partners yet"}),p&&e.jsx("button",{onClick:()=>N(""),className:"mt-2 text-slate-900 underline",children:"Clear search"})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:S?"Partner Created!":t?"Edit Partner":"Create Partner Account"}),e.jsx("button",{onClick:T,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(ne,{className:"h-4 w-4"})})]}),S?e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-emerald-800 font-medium mb-2",children:"✓ Partner account created successfully!"}),e.jsx("p",{className:"text-emerald-700 text-sm",children:"Share these credentials with the partner so they can log in."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:S.email,className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg bg-slate-50"}),e.jsx("button",{onClick:()=>O(S.email,"email"),className:"p-2 hover:bg-slate-100 rounded-lg",children:n==="email"?e.jsx(oe,{className:"h-4 w-4 text-emerald-500"}):e.jsx(xe,{className:"h-4 w-4 text-slate-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:S.password,className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg bg-slate-50 font-mono"}),e.jsx("button",{onClick:()=>O(S.password,"password"),className:"p-2 hover:bg-slate-100 rounded-lg",children:n==="password"?e.jsx(oe,{className:"h-4 w-4 text-emerald-500"}):e.jsx(xe,{className:"h-4 w-4 text-slate-400"})})]})]}),e.jsx("button",{onClick:()=>{O(`Email: ${S.email}
Password: ${S.password}`,"both")},className:"w-full py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:n==="both"?"✓ Copied!":"Copy Both to Clipboard"}),e.jsx("button",{onClick:T,className:"w-full py-2 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:"Done"})]}):e.jsxs("form",{onSubmit:L,className:"p-5 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:r.name,onChange:g=>c({...r,name:g.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"Enter partner name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",required:!0,value:r.email,onChange:g=>c({...r,email:g.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"partner@company.com",disabled:!!t})]}),!t&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",required:!0,value:r.password,onChange:g=>c({...r,password:g.target.value}),className:"w-full px-3 py-2 pr-10 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"Auto-generated password"}),e.jsx("button",{type:"button",onClick:()=>j(!l),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 hover:bg-slate-100 rounded",children:l?e.jsx(hs,{className:"h-4 w-4 text-slate-400"}):e.jsx(De,{className:"h-4 w-4 text-slate-400"})})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"This password will be shown after creation for you to share with the partner"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Company ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:r.company,onChange:g=>c({...r,company:g.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"Company name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",required:!0,value:r.phone,onChange:g=>c({...r,phone:g.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Discount Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"50",value:r.discountRate,onChange:g=>c({...r,discountRate:g.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),e.jsxs("select",{value:r.status,onChange:g=>c({...r,status:g.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"pending",children:"Pending"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Referred By (Partner)"}),e.jsxs("select",{value:r.referredBy,onChange:g=>c({...r,referredBy:g.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),h.filter(g=>g.id!==t?.id).map(g=>e.jsxs("option",{value:g.id,children:[g.name," - ",g.company]},g.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes"}),e.jsx("textarea",{rows:3,value:r.notes,onChange:g=>c({...r,notes:g.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"Add notes about this partner..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50",children:i?"Creating...":t?"Update Partner":"Create Partner Account"})]})]})]})})]})}function st(){const[u,x]=w.useState(""),[o,f]=w.useState(null),{db:h}=F(),p=h.partners,N=(l,j=0)=>p.filter(C=>l?C.referredBy===l:!C.referredBy).map(C=>({partner:C,level:j,children:N(C.id,j+1)})),v=N(null),a=p.length,t=p.filter(l=>l.status==="active").length,s=p.reduce((l,j)=>l+j.totalPurchases,0),r=p.reduce((l,j)=>l+j.totalResold,0),c=[...p].sort((l,j)=>j.totalResold-l.totalResold).slice(0,5),i=l=>{switch(l){case"active":return"bg-emerald-100 text-emerald-700";case"inactive":return"bg-slate-100 text-slate-700";case"pending":return"bg-amber-100 text-amber-700";default:return"bg-slate-100 text-slate-700"}},d=({node:l})=>{const j=l.children.length>0;return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-colors ${o?.id===l.partner.id?"bg-slate-900 text-white":"bg-white hover:bg-slate-50 border border-slate-200"}`,onClick:()=>f(l.partner),children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${o?.id===l.partner.id?"bg-white/20":"bg-slate-100"}`,children:e.jsx(le,{className:`h-5 w-5 ${o?.id===l.partner.id?"text-white":"text-slate-500"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-medium truncate ${o?.id===l.partner.id?"text-white":"text-slate-900"}`,children:l.partner.name}),e.jsx("p",{className:`text-sm truncate ${o?.id===l.partner.id?"text-white/70":"text-slate-500"}`,children:l.partner.company})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs ${o?.id===l.partner.id?"bg-white/20 text-white":i(l.partner.status)}`,children:[l.partner.discountRate,"% off"]}),e.jsxs("p",{className:`text-xs mt-1 ${o?.id===l.partner.id?"text-white/70":"text-slate-400"}`,children:[l.children.length," referrals"]})]})]}),j&&e.jsxs("div",{className:"ml-6 mt-2 space-y-2 relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-4 w-px bg-slate-200"}),l.children.map(S=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-6 top-5 w-4 h-px bg-slate-200"}),e.jsx(d,{node:S})]},S.partner.id))]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Partner Network"}),e.jsx("p",{className:"text-slate-500",children:"Visualize and manage your partner hierarchy"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(q,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Total Partners"})]}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:a})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(fe,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Active"})]}),e.jsx("p",{className:"text-2xl font-semibold text-emerald-600",children:t})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Pe,{className:"h-4 w-4 text-indigo-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Total Purchases"})]}),e.jsxs("p",{className:"text-2xl font-semibold text-slate-900",children:["$",s.toLocaleString()]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ae,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Total Resold"})]}),e.jsxs("p",{className:"text-2xl font-semibold text-slate-900",children:["$",r.toLocaleString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-5 border-b border-slate-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Network Hierarchy"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search partners...",value:u,onChange:l=>x(l.target.value),className:"pl-9 pr-4 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-slate-200"})]})]})}),e.jsx("div",{className:"p-5 max-h-[600px] overflow-auto",children:e.jsx("div",{className:"space-y-2",children:v.map(l=>e.jsx(d,{node:l},l.partner.id))})})]}),e.jsxs("div",{className:"space-y-6",children:[o?e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Partner Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center",children:e.jsx(le,{className:"h-6 w-6 text-slate-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:o.name}),e.jsx("p",{className:"text-sm text-slate-500",children:o.company})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Email"}),e.jsx("span",{className:"text-slate-900",children:o.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Phone"}),e.jsx("span",{className:"text-slate-900",children:o.phone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Discount"}),e.jsxs("span",{className:"font-medium text-indigo-600",children:[o.discountRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Status"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${i(o.status)}`,children:o.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Joined"}),e.jsx("span",{className:"text-slate-900",children:o.joinedAt})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Total Purchases"}),e.jsxs("span",{className:"text-slate-900",children:["$",o.totalPurchases.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Total Resold"}),e.jsxs("span",{className:"text-slate-900",children:["$",o.totalResold.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Est. Profit"}),e.jsxs("span",{className:"font-medium text-emerald-600",children:["$",(o.totalResold-o.totalPurchases).toLocaleString()]})]})]}),o.notes&&e.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-slate-700",children:o.notes})]})]})]}):e.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-200 p-8 text-center",children:[e.jsx(fe,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"Select a partner to view details"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Top Performers"}),e.jsx("div",{className:"space-y-3",children:c.map((l,j)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-slate-100 rounded-full flex items-center justify-center text-xs font-medium text-slate-600",children:j+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-slate-900 truncate",children:l.name}),e.jsx("p",{className:"text-xs text-slate-500",children:l.company})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-slate-900",children:["$",l.totalResold.toLocaleString()]}),e.jsx("p",{className:"text-xs text-emerald-600",children:"resold"})]})]},l.id))})]})]})]})]})}function tt(){const{db:u}=F(),x=u.products,[o,f]=w.useState(""),[h,p]=w.useState(null),[N,v]=w.useState(""),[a,t]=w.useState(1),[s,r]=w.useState([]),c=w.useRef(null),i=x.filter(n=>n.name.toLowerCase().includes(o.toLowerCase())||n.sku.toLowerCase().includes(o.toLowerCase())),d=()=>{const n=h?.sku||"BATCH",y=Date.now().toString(36).toUpperCase(),A=Math.random().toString(36).substring(2,5).toUpperCase();return`${n}-${y}-${A}`},l=()=>{if(!h)return;const n=N||d(),y=[];for(let A=0;A<a;A++){const m={id:`${h.id}-${Date.now()}-${A}`,sku:h.sku,name:h.name,batch:n,manufactured:new Date().toISOString().split("T")[0],purity:h.purity,quantity:1};y.push(m)}r(y)},j=(n,y)=>{const A=document.getElementById(`qr-${y}`);if(!A)return;const m=new XMLSerializer().serializeToString(A),E=document.createElement("canvas"),M=E.getContext("2d"),T=new Image;T.onload=()=>{E.width=400,E.height=500,M.fillStyle="white",M.fillRect(0,0,E.width,E.height),M.drawImage(T,50,20,300,300),M.fillStyle="black",M.font="bold 20px Arial",M.textAlign="center",M.fillText(n.name,200,350),M.font="16px Arial",M.fillText(`SKU: ${n.sku}`,200,380),M.fillText(`Batch: ${n.batch}`,200,405),M.fillText(`Purity: ${n.purity}`,200,430),M.fillText(`Mfg: ${n.manufactured}`,200,455);const O=document.createElement("a");O.download=`QR-${n.sku}-${n.batch}.png`,O.href=E.toDataURL("image/png"),O.click()},T.src="data:image/svg+xml;base64,"+btoa(m)},S=()=>{window.print()},C=n=>JSON.stringify({productId:n.id,sku:n.sku,name:n.name,batch:n.batch,manufactured:n.manufactured,purity:n.purity,scanUrl:`https://goldentier.com/track/${n.batch}`});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"QR Code Generator"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate QR codes for product tracking and inventory management"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-background rounded-lg border border-border p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"1. Select Product"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:o,onChange:n=>f(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-auto",children:i.map(n=>e.jsxs("button",{onClick:()=>{p(n),v(d())},className:`w-full flex items-center space-x-3 p-3 rounded-lg border transition-colors text-left ${h?.id===n.id?"border-primary bg-primary/5":"border-border hover:bg-surface-alt"}`,children:[e.jsx(H,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:n.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.sku})]}),h?.id===n.id&&e.jsx(Te,{className:"h-5 w-5 text-primary"})]},n.id))})]}),e.jsxs("div",{className:"bg-background rounded-lg border border-border p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"2. Configure QR Code"}),h?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Selected Product"}),e.jsxs("div",{className:"p-3 bg-surface-alt rounded-lg",children:[e.jsx("p",{className:"font-medium",children:h.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.sku})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Batch Number"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:N,onChange:n=>v(n.target.value),className:"flex-1 px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"}),e.jsx("button",{onClick:()=>v(d()),className:"px-3 py-2 bg-surface-alt rounded-lg hover:bg-surface transition-colors",children:e.jsx(os,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity to Generate"}),e.jsx("input",{type:"number",min:"1",max:"100",value:a,onChange:n=>t(parseInt(n.target.value)||1),className:"w-full px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("button",{onClick:l,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Generate QR Codes"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(H,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Select a product to generate QR codes"})]})]})]}),s.length>0&&e.jsxs("div",{className:"bg-background rounded-lg border border-border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold",children:["Generated QR Codes (",s.length,")"]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:S,className:"flex items-center space-x-2 px-3 py-2 border border-input rounded-lg hover:bg-surface-alt transition-colors",children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Print All"})]})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:s.map((n,y)=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{ref:c,className:"bg-white p-3 rounded-lg border border-border inline-block",children:[e.jsx(ue,{id:`qr-${y}`,value:C(n),size:120,level:"H",includeMargin:!0}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsx("p",{className:"font-medium truncate",children:n.name}),e.jsx("p",{className:"text-muted-foreground truncate",children:n.batch})]})]}),e.jsxs("button",{onClick:()=>j(n,y),className:"mt-2 flex items-center justify-center space-x-1 text-sm text-primary hover:underline mx-auto",children:[e.jsx(_e,{className:"h-3 w-3"}),e.jsx("span",{children:"Download"})]})]},n.id))})]}),e.jsxs("div",{className:"bg-background rounded-lg border border-border p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"QR Code Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"p-4 bg-surface-alt rounded-lg",children:[e.jsx("p",{className:"font-medium mb-2",children:"What's included?"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Product ID & SKU"}),e.jsx("li",{children:"• Batch number"}),e.jsx("li",{children:"• Manufacturing date"}),e.jsx("li",{children:"• Purity percentage"}),e.jsx("li",{children:"• Tracking URL"})]})]}),e.jsxs("div",{className:"p-4 bg-surface-alt rounded-lg",children:[e.jsx("p",{className:"font-medium mb-2",children:"Use cases"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Inventory tracking"}),e.jsx("li",{children:"• Quality control"}),e.jsx("li",{children:"• Supply chain management"}),e.jsx("li",{children:"• Product authentication"}),e.jsx("li",{children:"• Customer verification"})]})]}),e.jsxs("div",{className:"p-4 bg-surface-alt rounded-lg",children:[e.jsx("p",{className:"font-medium mb-2",children:"Scanning"}),e.jsx("p",{className:"text-muted-foreground",children:"QR codes can be scanned with any smartphone camera or QR scanner app. Scanning will redirect to the product tracking page with full details."})]})]})]})]})}function at(){const{db:u,updateOrder:x}=F(),o=u.orders,[f,h]=w.useState(""),[p,N]=w.useState("all"),[v,a]=w.useState(null),t=o.filter(i=>{const d=i.id.toLowerCase().includes(f.toLowerCase())||i.customerName.toLowerCase().includes(f.toLowerCase()),l=p==="all"||i.status===p;return d&&l}),s=i=>{switch(i){case"delivered":return e.jsx(Te,{className:"h-4 w-4 text-green-600"});case"shipped":return e.jsx(us,{className:"h-4 w-4 text-blue-600"});case"processing":return e.jsx(ge,{className:"h-4 w-4 text-yellow-600"});case"pending":return e.jsx(ge,{className:"h-4 w-4 text-orange-600"});case"cancelled":return e.jsx(Je,{className:"h-4 w-4 text-red-600"});default:return null}},r=i=>{switch(i){case"delivered":return"bg-green-100 text-green-700";case"shipped":return"bg-blue-100 text-blue-700";case"processing":return"bg-yellow-100 text-yellow-700";case"pending":return"bg-orange-100 text-orange-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},c=(i,d)=>{x(i,{status:d})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Orders Management"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage customer orders"})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[{label:"Total Orders",value:o.length,color:"text-foreground"},{label:"Pending",value:o.filter(i=>i.status==="pending").length,color:"text-orange-600"},{label:"Processing",value:o.filter(i=>i.status==="processing").length,color:"text-yellow-600"},{label:"Shipped",value:o.filter(i=>i.status==="shipped").length,color:"text-blue-600"},{label:"Delivered",value:o.filter(i=>i.status==="delivered").length,color:"text-green-600"}].map(i=>e.jsxs("div",{className:"bg-background p-4 rounded-lg border border-border text-center",children:[e.jsx("p",{className:"text-2xl font-bold {stat.color}",children:i.value}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.label})]},i.label))}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search orders by ID, customer name, or email...",value:f,onChange:i=>h(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("select",{value:p,onChange:i=>N(i.target.value),className:"px-3 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"bg-background rounded-lg border border-border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-surface-alt",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Order ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Payment"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:t.map(i=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-surface-alt/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"font-medium",children:i.id})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{children:e.jsx("p",{className:"font-medium",children:i.customerName})})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:i.createdAt}),e.jsxs("td",{className:"px-4 py-3 text-sm font-medium",children:["$",i.total.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[s(i.status),e.jsxs("select",{value:i.status,onChange:d=>c(i.id,d.target.value),className:`text-xs px-2 py-1 rounded-full border-0 ${r(i.status)}`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("select",{value:i.paymentStatus,onChange:d=>x(i.id,{paymentStatus:d.target.value}),className:`text-xs px-2 py-1 rounded-full border-0 cursor-pointer ${i.paymentStatus==="paid"?"bg-green-100 text-green-700":i.paymentStatus==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"failed",children:"Failed"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>a(v===i.id?null:i.id),className:"p-2 hover:bg-surface-alt rounded-lg text-muted-foreground hover:text-primary",children:v===i.id?e.jsx(Oe,{className:"h-4 w-4"}):e.jsx(Le,{className:"h-4 w-4"})})})]},i.id),v===i.id&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-4 bg-surface-alt/30",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Order Items"}),e.jsx("div",{className:"space-y-2",children:i.items.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(H,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:d.name})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.quantity," x $",d.price.toFixed(2)]})]},d.productId))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Customer Details"}),e.jsxs("div",{className:"p-3 bg-background rounded text-sm space-y-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-xs text-muted-foreground mb-1",children:"ACCOUNT"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ID: "}),e.jsx("span",{children:i.customerId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Name: "}),e.jsx("span",{children:i.customerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type: "}),e.jsx("span",{className:"capitalize",children:i.userType})]})]}),e.jsxs("div",{className:"pt-3 border-t border-border",children:[e.jsx("h5",{className:"font-medium text-xs text-muted-foreground mb-1",children:"SHIPPING & PAYMENT"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Method: "}),e.jsx("span",{className:"capitalize",children:i.paymentMethod?.replace("_"," ")||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Name: "}),e.jsx("span",{children:i.shippingName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Email: "}),e.jsx("span",{children:i.shippingEmail||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Phone: "}),e.jsx("span",{children:i.shippingPhone||"N/A"})]}),i.shippingAddress&&e.jsxs("div",{className:"mt-1 text-xs",children:[e.jsx("p",{children:i.shippingAddress}),e.jsxs("p",{children:[i.shippingCity,", ",i.shippingState," ",i.shippingZip]}),e.jsx("p",{children:i.shippingCountry})]}),i.shippingNotes&&e.jsxs("div",{className:"mt-2 text-xs italic text-muted-foreground",children:["Note: ",i.shippingNotes]})]})]})]})]})})})]}))})]})}),t.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(H,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No orders found"})]})]})]})}function lt(){const{db:u}=F(),x=u.customers,[o,f]=w.useState(""),[h,p]=w.useState("all"),[N,v]=w.useState(null),a=x.filter(s=>{const r=s.name.toLowerCase().includes(o.toLowerCase())||s.email.toLowerCase().includes(o.toLowerCase())||s.phone.includes(o),c=h==="all"||s.status===h;return r&&c}),t=s=>{switch(s){case"active":return"bg-emerald-100 text-emerald-700";case"inactive":return"bg-slate-100 text-slate-700";default:return"bg-slate-100 text-slate-700"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Customers"}),e.jsx("p",{className:"text-slate-500",children:"Manage your customer base"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:x.length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Active"}),e.jsx("p",{className:"text-2xl font-semibold text-emerald-600",children:x.filter(s=>s.status==="active").length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-600",children:x.filter(s=>s.status==="inactive").length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-semibold text-slate-900",children:["$",x.reduce((s,r)=>s+r.totalSpent,0).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search customers...",value:o,onChange:s=>f(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg bg-white focus:ring-2 focus:ring-slate-200 focus:border-slate-300"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-slate-400"}),e.jsxs("select",{value:h,onChange:s=>p(s.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg bg-white focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"Orders"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"Total Spent"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-500"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:a.map(s=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex items-center justify-center",children:e.jsx(le,{className:"h-5 w-5 text-slate-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:s.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Since ",s.joinedAt]})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[e.jsx(Re,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[e.jsx(Ee,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:s.phone})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-slate-900",children:s.totalOrders})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"font-medium text-slate-900",children:s.totalSpent.toFixed(2)})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${t(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>v(N===s.id?null:s.id),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:N===s.id?e.jsx(Oe,{className:"h-4 w-4 text-slate-400"}):e.jsx(Le,{className:"h-4 w-4 text-slate-400"})})})]},s.id),N===s.id&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-4 bg-slate-50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-2",children:"Customer Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-slate-600",children:[e.jsx("span",{className:"text-slate-400",children:"Last Order:"})," ",s.lastOrderAt||"Never"]}),s.notes&&e.jsxs("p",{className:"text-slate-600",children:[e.jsx("span",{className:"text-slate-400",children:"Notes:"})," ",s.notes]})]})]}),s.address&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-2",children:"Address"}),e.jsxs("div",{className:"text-sm text-slate-600",children:[e.jsx("p",{children:s.address.street}),e.jsxs("p",{children:[s.address.city,", ",s.address.state," ",s.address.zip]}),e.jsx("p",{children:s.address.country})]})]})]})})})]}))})]})}),a.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(le,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"No customers found"})]})]})]})}function rt(){const{db:u,addInventoryLog:x}=F(),[o,f]=w.useState(""),[h,p]=w.useState(null),[N,v]=w.useState(!1),[a,t]=w.useState({changeQuantity:0,reason:"received",notes:""}),s=u.products.filter(l=>l.name.toLowerCase().includes(o.toLowerCase())||l.sku.toLowerCase().includes(o.toLowerCase())),r=u.inventoryLogs.sort((l,j)=>new Date(j.createdAt).getTime()-new Date(l.createdAt).getTime()),c=h?r.filter(l=>l.productId===h):r,i=s.filter(l=>l.stockQuantity<(l.lowStockThreshold||10)),d=()=>{h&&(x({productId:h,changeQuantity:a.changeQuantity,reason:a.reason,notes:a.notes}),v(!1),t({changeQuantity:0,reason:"received",notes:""}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Inventory Management"}),e.jsx("p",{className:"text-slate-500",children:"Track and adjust product stock levels"})]})}),i.length>0&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-amber-800 font-medium mb-3",children:[e.jsx(Ze,{className:"h-5 w-5"}),e.jsxs("span",{children:["Low Stock Alerts (",i.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:i.map(l=>e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-amber-100 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:l.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:["SKU: ",l.sku]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-red-600",children:l.stockQuantity}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Threshold: ",l.lowStockThreshold||10]})]})]},l.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col h-[600px]",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Products Stock"}),e.jsxs("div",{className:"relative w-64",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:o,onChange:l=>f(l.target.value),className:"w-full pl-9 pr-4 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-slate-200"})]})]}),e.jsx("div",{className:"overflow-auto flex-1 p-4",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-sm text-slate-500",children:[e.jsx("th",{className:"pb-3 font-medium",children:"Product / SKU"}),e.jsx("th",{className:"pb-3 font-medium text-right",children:"Current Stock"}),e.jsx("th",{className:"pb-3 font-medium text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map(l=>e.jsxs("tr",{className:`hover:bg-slate-50 cursor-pointer ${h===l.id?"bg-slate-50":""}`,onClick:()=>p(l.id),children:[e.jsxs("td",{className:"py-3",children:[e.jsx("p",{className:"font-medium text-slate-900",children:l.name}),e.jsx("p",{className:"text-xs text-slate-500",children:l.sku})]}),e.jsx("td",{className:"py-3 text-right",children:e.jsxs("span",{className:`inline-block px-2 py-1 rounded-full text-sm font-medium ${l.stockQuantity<=(l.lowStockThreshold||10)?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700"}`,children:[l.stockQuantity," units"]})}),e.jsx("td",{className:"py-3 text-right",children:e.jsx("button",{onClick:j=>{j.stopPropagation(),p(l.id),t({changeQuantity:0,reason:"received",notes:""}),v(!0)},className:"px-3 py-1 bg-slate-100 text-slate-700 rounded hover:bg-slate-200 transition-colors text-sm font-medium",children:"Adjust"})})]},l.id))})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 flex flex-col h-[600px]",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Stock History"}),h?e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-100 mb-4 flex items-start gap-4",children:[e.jsx("div",{className:"bg-white p-2 rounded-lg border border-slate-200 shadow-sm shrink-0",children:e.jsx(ue,{value:`https://goldentierpeptide.com/product/${s.find(l=>l.id===h)?.sku}`,size:80})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900",children:s.find(l=>l.id===h)?.name}),e.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Scan to view product page"}),e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsxs("span",{className:"bg-white px-2 py-1 rounded border border-slate-200",children:["Stock: ",s.find(l=>l.id===h)?.stockQuantity]}),e.jsxs("span",{className:"bg-white px-2 py-1 rounded border border-slate-200",children:["Thr: ",s.find(l=>l.id===h)?.lowStockThreshold||10]})]})]})]}),e.jsx("div",{className:"space-y-3",children:c.length>0?c.map(l=>e.jsxs("div",{className:"p-3 border border-slate-100 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${l.changeQuantity>0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:[l.changeQuantity>0?"+":"",l.changeQuantity]}),e.jsx("span",{className:"text-xs text-slate-400",children:new Date(l.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm font-medium text-slate-700 capitalize",children:l.reason}),l.notes&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:l.notes}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["By ",l.performedByName]})]},l.id)):e.jsx("p",{className:"text-sm text-slate-500 italic text-center py-4",children:"No history for this product."})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[e.jsx(Rs,{className:"h-12 w-12 mb-2 opacity-50"}),e.jsx("p",{children:"Select a product to view details"})]})]})]}),N&&h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-sm w-full p-5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Adjust Stock"}),e.jsx("button",{onClick:()=>v(!1),className:"p-1 hover:bg-slate-100 rounded",children:e.jsx(ne,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-4",children:s.find(l=>l.id===h)?.name}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Reason"}),e.jsxs("select",{value:a.reason,onChange:l=>t({...a,reason:l.target.value}),className:"w-full p-2 border border-slate-200 rounded-lg text-sm",children:[e.jsx("option",{value:"received",children:"Received (+)"}),e.jsx("option",{value:"returned",children:"Returned (+)"}),e.jsx("option",{value:"sold",children:"Sold (-)"}),e.jsx("option",{value:"damaged",children:"Damaged (-)"}),e.jsx("option",{value:"adjustment",children:"Manual Adjustment"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Quantity Change"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>t(l=>({...l,changeQuantity:l.changeQuantity-1})),className:"p-2 bg-slate-100 rounded hover:bg-slate-200",children:e.jsx(es,{className:"h-4 w-4"})}),e.jsx("input",{type:"number",value:a.changeQuantity,onChange:l=>t({...a,changeQuantity:parseInt(l.target.value)||0}),className:"flex-1 p-2 border border-slate-200 rounded-lg text-center font-bold"}),e.jsx("button",{type:"button",onClick:()=>t(l=>({...l,changeQuantity:l.changeQuantity+1})),className:"p-2 bg-slate-100 rounded hover:bg-slate-200",children:e.jsx(he,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Notes (Optional)"}),e.jsx("input",{type:"text",value:a.notes,onChange:l=>t({...a,notes:l.target.value}),className:"w-full p-2 border border-slate-200 rounded-lg text-sm",placeholder:"e.g. Broken vial during shipping"})]}),e.jsx("button",{onClick:d,disabled:a.changeQuantity===0,className:"w-full py-2 bg-slate-900 text-white rounded-lg font-medium hover:bg-slate-800 disabled:opacity-50",children:"Save Adjustment"})]})]})})]})}function nt(){const{user:u}=ke(),{db:x,addInvitationCode:o,updateInvitationCode:f}=F(),h=x.invitationCodes,[p,N]=w.useState(""),[v,a]=w.useState("all"),[t,s]=w.useState("all"),[r,c]=w.useState(!1),[i,d]=w.useState(!1),[l,j]=w.useState(null),[S,C]=w.useState(null),[n,y]=w.useState("admin_user"),[A,m]=w.useState(50),[E,M]=w.useState(15),[T,O]=w.useState(""),[L,G]=w.useState(""),[g,k]=w.useState("GT"),R=h.filter(b=>{const _=b.code.toLowerCase().includes(p.toLowerCase())||b.notes?.toLowerCase().includes(p.toLowerCase())||b.createdByName.toLowerCase().includes(p.toLowerCase()),se=v==="all"||b.type===v,We=t==="all"||(t==="active"?b.isActive:!b.isActive);return _&&se&&We}),B={total:h.length,active:h.filter(b=>b.isActive).length,totalUses:h.reduce((b,_)=>b+_.usedCount,0),adminCodes:h.filter(b=>b.type.startsWith("admin_")).length,partnerCodes:h.filter(b=>b.type==="partner_user").length},z=b=>{navigator.clipboard.writeText(b),C(b),setTimeout(()=>C(null),2e3)},Z=()=>{const b=n==="admin_partner"?"GTP":n==="partner_user"?"GT":g,_={id:`inv${Date.now()}`,code:ye(b),type:n,createdBy:u?.id||"",createdByName:u?.name||"",createdAt:new Date().toISOString().split("T")[0],expiresAt:T||void 0,maxUses:A,usedCount:0,usedBy:[],isActive:!0,notes:L,defaultDiscountRate:n==="admin_partner"?E:void 0};o(_),c(!1),ee()},ee=()=>{y("admin_user"),m(50),M(15),O(""),G(""),k("GT")},X=b=>{const _=h.find(se=>se.code===b);_&&f(b,{isActive:!_.isActive})},W=b=>{window.confirm("Are you sure you want to deactivate this code?")&&f(b,{isActive:!1})},U=()=>{const b=[];for(let _=0;_<10;_++){const se={id:`inv${Date.now()}_${_}`,code:ye("BULK"),type:"admin_user",createdBy:u?.id||"",createdByName:u?.name||"",createdAt:new Date().toISOString().split("T")[0],maxUses:1,usedCount:0,usedBy:[],isActive:!0,notes:"Bulk generated code"};o(se),b.push(se.code)}navigator.clipboard.writeText(b.join(`
`)),alert("Generated 10 codes and copied to clipboard!")},V=b=>{switch(b){case"admin_user":return e.jsx(q,{className:"h-4 w-4 text-blue-500"});case"admin_partner":return e.jsx(Ss,{className:"h-4 w-4 text-amber-500"});case"partner_user":return e.jsx(Me,{className:"h-4 w-4 text-emerald-500"})}},ie=b=>{switch(b){case"admin_user":return"User";case"admin_partner":return"Partner";case"partner_user":return"Partner Referral"}},Xe=b=>{switch(b){case"admin_user":return"bg-blue-100 text-blue-700";case"admin_partner":return"bg-amber-100 text-amber-700";case"partner_user":return"bg-emerald-100 text-emerald-700"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Invitation Codes"}),e.jsx("p",{className:"text-slate-500",children:"Manage invitation codes for users and partners"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:U,className:"flex items-center space-x-2 px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:[e.jsx(Ls,{className:"h-4 w-4"}),e.jsx("span",{children:"Bulk Generate"})]}),e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Code"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Total Codes"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:B.total})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Active Codes"}),e.jsx("p",{className:"text-2xl font-semibold text-emerald-600",children:B.active})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Total Uses"}),e.jsx("p",{className:"text-2xl font-semibold text-indigo-600",children:B.totalUses})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Partner Codes"}),e.jsx("p",{className:"text-2xl font-semibold text-amber-600",children:B.partnerCodes})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search codes, notes, or creator...",value:p,onChange:b=>N(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200 focus:border-slate-400"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:v,onChange:b=>a(b.target.value),className:"px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"admin_user",children:"User Codes"}),e.jsx("option",{value:"admin_partner",children:"Partner Codes"}),e.jsx("option",{value:"partner_user",children:"Partner Referrals"})]}),e.jsxs("select",{value:t,onChange:b=>s(b.target.value),className:"px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Uses"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Created By"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Created"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:R.map(b=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-mono font-semibold text-slate-900",children:b.code}),e.jsx("button",{onClick:()=>z(b.code),className:"p-1 hover:bg-slate-200 rounded transition-colors",children:S===b.code?e.jsx(oe,{className:"h-3.5 w-3.5 text-emerald-500"}):e.jsx(xe,{className:"h-3.5 w-3.5 text-slate-400"})})]}),b.notes&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:b.notes})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("span",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs ${Xe(b.type)}`,children:[V(b.type),e.jsx("span",{children:ie(b.type)})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:b.usedCount}),e.jsx("span",{className:"text-slate-400",children:"/"}),e.jsx("span",{className:"text-slate-500",children:b.maxUses})]}),e.jsx("div",{className:"w-20 bg-slate-100 rounded-full h-1.5 mt-1",children:e.jsx("div",{className:"bg-slate-900 h-1.5 rounded-full",style:{width:`${b.usedCount/b.maxUses*100}%`}})})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-slate-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium",children:b.createdByName.charAt(0)})}),e.jsx("span",{className:"text-sm",children:b.createdByName})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-slate-500",children:b.createdAt}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("button",{onClick:()=>X(b.code),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${b.isActive?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:b.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[e.jsx("button",{onClick:()=>{j(b),d(!0)},className:"p-2 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600",children:e.jsx(De,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>W(b.code),className:"p-2 hover:bg-red-50 rounded-lg text-slate-400 hover:text-red-600",children:e.jsx(ve,{className:"h-4 w-4"})})]})})]},b.code))})]})}),R.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Ae,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"No invitation codes found"})]})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Create Invitation Code"}),e.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:e.jsx(ne,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Code Type"}),e.jsxs("select",{value:n,onChange:b=>y(b.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"admin_user",children:"User Registration"}),e.jsx("option",{value:"admin_partner",children:"Partner Registration"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:n==="admin_partner"?"Creates a partner account with discount benefits":"Creates a regular customer account"})]}),n==="admin_partner"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Default Discount Rate (%)"}),e.jsx("input",{type:"number",min:"5",max:"50",value:E,onChange:b=>M(parseInt(b.target.value)||15),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Maximum Uses"}),e.jsx("input",{type:"number",min:"1",max:"1000",value:A,onChange:b=>m(parseInt(b.target.value)||1),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Expiration Date (optional)"}),e.jsx("input",{type:"date",value:T,onChange:b=>O(b.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Notes (optional)"}),e.jsx("textarea",{rows:3,value:L,onChange:b=>G(b.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",placeholder:"e.g., VIP customers, March promotion..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-50",children:"Cancel"}),e.jsx("button",{onClick:Z,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800",children:"Create Code"})]})]})]})}),i&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Code Details"}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:e.jsx(ne,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-mono text-2xl font-bold text-slate-900",children:l.code}),e.jsx("button",{onClick:()=>z(l.code),className:"p-2 bg-white rounded-lg hover:bg-slate-100 transition-colors",children:S===l.code?e.jsx(oe,{className:"h-5 w-5 text-emerald-500"}):e.jsx(xe,{className:"h-5 w-5 text-slate-400"})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Type"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[V(l.type),e.jsx("span",{className:"font-medium",children:ie(l.type)})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Status"}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs mt-1 ${l.isActive?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-700"}`,children:l.isActive?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Uses"}),e.jsxs("p",{className:"font-medium",children:[l.usedCount," / ",l.maxUses]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Created"}),e.jsx("p",{className:"font-medium",children:l.createdAt})]}),l.expiresAt&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Expires"}),e.jsx("p",{className:"font-medium",children:l.expiresAt})]}),l.defaultDiscountRate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Discount Rate"}),e.jsxs("p",{className:"font-medium",children:[l.defaultDiscountRate,"%"]})]})]}),l.usedBy.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-900 mb-3",children:"Used By"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:l.usedBy.map((b,_)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium",children:b.userName.charAt(0)})}),e.jsx("span",{className:"font-medium",children:b.userName})]}),e.jsx("span",{className:"text-sm text-slate-500",children:b.usedAt})]},_))})]}),l.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Notes"}),e.jsx("p",{className:"text-slate-700",children:l.notes})]})]})]})})]})}function it(){const{db:u}=F(),{partners:x,orders:o,customers:f,invitationCodes:h}=u,[p,N]=w.useState("30d"),[v,a]=w.useState("revenue"),s=x.map(n=>{const y=o.filter(k=>k.partnerId===n.id),A=y.reduce((k,R)=>k+R.total,0),m=n.totalResold?n.totalResold-A:0,E=x.filter(k=>k.referredBy===n.id).length,M=h.filter(k=>k.partnerId===n.id),T=M.reduce((k,R)=>k+R.usedCount,0),L=f.filter(k=>M.some(R=>R.code===k.invitationCode)).filter(k=>k.totalOrders>0).length,G=T>0?Math.round(L/T*100):0;let g=0;if(y.length>0){const k=new Date,R=p==="7d"?7:p==="30d"?30:p==="90d"?90:365,B=new Date(k.getTime()-R*24*60*60*1e3),z=new Date(B.getTime()-R*24*60*60*1e3),Z=y.filter(U=>new Date(U.createdAt)>=B),ee=y.filter(U=>new Date(U.createdAt)>=z&&new Date(U.createdAt)<B),X=Z.reduce((U,V)=>U+V.total,0),W=ee.reduce((U,V)=>U+V.total,0);W>0?g=Math.round((X-W)/W*100):X>0&&(g=100)}return{id:n.id,name:n.name,company:n.company,discountRate:n.discountRate,totalPurchases:A,totalResold:n.totalResold||0,estimatedProfit:m,networkSize:E,customerSignups:T,conversionRate:G,growth:g,status:n.status}}),r=[...s].sort((n,y)=>{switch(v){case"revenue":return y.totalPurchases-n.totalPurchases;case"network":return y.networkSize-n.networkSize;case"growth":return y.growth-n.growth;default:return 0}}),c=r.slice(0,5),i=s.reduce((n,y)=>n+y.totalPurchases,0),d=s.reduce((n,y)=>n+y.networkSize,0),l=s.reduce((n,y)=>n+y.customerSignups,0),j=s.length>0?Math.round(s.reduce((n,y)=>n+y.conversionRate,0)/s.length):0,S=s.filter(n=>n.growth>0).length,C=s.filter(n=>n.growth<0).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Partner Analytics"}),e.jsx("p",{className:"text-slate-500",children:"Performance metrics and insights for your partner network"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:p,onChange:n=>N(n.target.value),className:"px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"all",children:"All time"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-50",children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(re,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Partner Revenue"})]}),e.jsxs("p",{className:"text-2xl font-semibold text-slate-900",children:["$",i.toLocaleString()]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(q,{className:"h-4 w-4 text-indigo-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Network Size"})]}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:d})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Me,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Customer Signups"})]}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:l})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Qs,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Avg Conversion"})]}),e.jsxs("p",{className:"text-2xl font-semibold text-slate-900",children:[j,"%"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Industry avg: 15%"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-emerald-50 border border-emerald-100 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:e.jsx(ae,{className:"h-5 w-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-700",children:"Growing Partners"}),e.jsx("p",{className:"text-2xl font-semibold text-emerald-900",children:S})]})]})}),e.jsx("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:e.jsx($e,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-amber-700",children:"Stable Partners"}),e.jsx("p",{className:"text-2xl font-semibold text-amber-900",children:s.length-S-C})]})]})}),e.jsx("div",{className:"bg-red-50 border border-red-100 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(de,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-700",children:"Declining Partners"}),e.jsx("p",{className:"text-2xl font-semibold text-red-900",children:C})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-5 border-b border-slate-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{className:"h-5 w-5 text-amber-500"}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"Top Performers"})]}),e.jsxs("select",{value:v,onChange:n=>a(n.target.value),className:"text-sm px-3 py-1.5 border border-slate-200 rounded-lg",children:[e.jsx("option",{value:"revenue",children:"By Revenue"}),e.jsx("option",{value:"network",children:"By Network Size"}),e.jsx("option",{value:"growth",children:"By Growth"})]})]})}),e.jsx("div",{className:"divide-y divide-slate-100",children:c.map((n,y)=>e.jsxs("div",{className:"p-5 flex items-center justify-between hover:bg-slate-50",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-semibold text-sm ${y===0?"bg-amber-100 text-amber-700":y===1?"bg-slate-200 text-slate-700":y===2?"bg-orange-100 text-orange-700":"bg-slate-100 text-slate-600"}`,children:y+1}),e.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-indigo-600 font-medium",children:n.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:n.name}),e.jsx("p",{className:"text-sm text-slate-500",children:n.company})]})]}),e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Revenue"}),e.jsxs("p",{className:"font-semibold text-slate-900",children:["$",n.totalPurchases.toLocaleString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Network"}),e.jsx("p",{className:"font-semibold text-slate-900",children:n.networkSize})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Growth"}),e.jsxs("div",{className:`flex items-center justify-end space-x-1 ${n.growth>=0?"text-emerald-600":"text-red-600"}`,children:[n.growth>=0?e.jsx(xs,{className:"h-4 w-4"}):e.jsx(gs,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-semibold",children:[Math.abs(n.growth),"%"]})]})]})]})]},n.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-5 border-b border-slate-100",children:e.jsx("h3",{className:"font-semibold text-slate-900",children:"All Partners Performance"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Partner"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Discount"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-700",children:"Purchases"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-700",children:"Est. Profit"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-700",children:"Network"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-700",children:"Signups"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-slate-700",children:"Conversion"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-slate-700",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(n=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-9 h-9 bg-slate-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"font-medium text-sm",children:n.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:n.name}),e.jsx("p",{className:"text-xs text-slate-500",children:n.company})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium",children:[n.discountRate,"%"]})}),e.jsxs("td",{className:"px-4 py-4 text-right font-medium",children:["$",n.totalPurchases.toLocaleString()]}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("span",{className:n.estimatedProfit>=0?"text-emerald-600":"text-red-600",children:["$",n.estimatedProfit.toLocaleString()]})}),e.jsx("td",{className:"px-4 py-4 text-right",children:n.networkSize}),e.jsx("td",{className:"px-4 py-4 text-right",children:n.customerSignups}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("div",{className:"w-16 bg-slate-100 rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:`${n.conversionRate}%`}})}),e.jsxs("span",{className:"text-sm",children:[n.conversionRate,"%"]})]})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.status==="active"?"bg-emerald-100 text-emerald-700":n.status==="pending"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-700"}`,children:n.status})})]},n.id))})]})})]})]})}function ct(){const{db:u,updateSiteSettings:x}=F(),[o,f]=w.useState(!1),[h,p]=w.useState(""),[N,v]=w.useState({companyName:"",companyDescription:"",contactEmail:"",contactPhone:"",contactLocation:"",businessHours:"",shippingInfo:""});w.useEffect(()=>{u.siteSettings&&v({companyName:u.siteSettings.companyName||"",companyDescription:u.siteSettings.companyDescription||"",contactEmail:u.siteSettings.contactEmail||"",contactPhone:u.siteSettings.contactPhone||"",contactLocation:u.siteSettings.contactLocation||"",businessHours:u.siteSettings.businessHours||"",shippingInfo:u.siteSettings.shippingInfo||""})},[u.siteSettings]);const a=async t=>{t.preventDefault(),f(!0),p("");const s=await x(N);f(!1),s&&(p("Settings updated successfully"),setTimeout(()=>p(""),3e3))};return e.jsxs("div",{className:"space-y-6 max-w-4xl",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Global Site Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage landing page content, contact info, and site details."})]})}),e.jsx("div",{className:"bg-background rounded-lg border border-border p-6",children:e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium border-b border-border pb-2",children:"Landing Page"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"These fields are displayed on the public landing page that visitors see before logging in."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Name"}),e.jsx("input",{type:"text",value:N.companyName,onChange:t=>v({...N,companyName:t.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"Golden Tier Peptide",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Description"}),e.jsx("textarea",{value:N.companyDescription,onChange:t=>v({...N,companyDescription:t.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"Premium research-grade peptides...",rows:3,required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium border-b border-border pb-2",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Support Email"}),e.jsx("input",{type:"email",value:N.contactEmail,onChange:t=>v({...N,contactEmail:t.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"support@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone Number (or Instructions)"}),e.jsx("input",{type:"text",value:N.contactPhone,onChange:t=>v({...N,contactPhone:t.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"e.g. +1 (555) 000-0000 or 'Email first'",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),e.jsx("input",{type:"text",value:N.contactLocation,onChange:t=>v({...N,contactLocation:t.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"United States",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Business Hours"}),e.jsx("input",{type:"text",value:N.businessHours,onChange:t=>v({...N,businessHours:t.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"Mon-Fri, 9AM-5PM",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium border-b border-border pb-2",children:"Policy Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Shipping Info Short Text"}),e.jsx("input",{type:"text",value:N.shippingInfo,onChange:t=>v({...N,shippingInfo:t.target.value}),className:"w-full px-4 py-2 border border-input rounded-lg bg-background focus:ring-primary focus:border-primary",placeholder:"Shipping worldwide",required:!0})]})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-border",children:[e.jsxs("button",{type:"submit",disabled:o,className:"flex items-center space-x-2 px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50",children:[e.jsx(Os,{className:"h-4 w-4"}),e.jsx("span",{children:o?"Saving...":"Save Settings"})]}),h&&e.jsxs("span",{className:"text-green-600 text-sm font-medium flex items-center gap-1",children:[e.jsx(ce,{className:"h-4 w-4"})," ",h]})]})]})})]})}function dt(){const{db:u}=F(),x=w.useMemo(()=>{const t=new Date,s=new Date(t.getTime()-720*60*60*1e3),r=new Date(t.getTime()-1440*60*60*1e3),c=u.orders.filter(m=>new Date(m.createdAt)>=s),i=u.orders.filter(m=>new Date(m.createdAt)>=r&&new Date(m.createdAt)<s),d=c.reduce((m,E)=>m+E.total,0),l=i.reduce((m,E)=>m+E.total,0),j=l>0?(d-l)/l*100:0,S=i.length>0?(c.length-i.length)/i.length*100:0,C=u.customers.filter(m=>new Date(m.joinedAt)>=s).length,n=u.customers.filter(m=>new Date(m.joinedAt)>=r&&new Date(m.joinedAt)<s).length,y=n>0?(C-n)/n*100:0,A=u.products.filter(m=>m.stockQuantity<(m.lowStockThreshold||10)).length;return{totalRevenue:d,revenueChange:j,totalOrders:c.length,ordersChange:S,newCustomers:C,customersChange:y,lowStockCount:A}},[u.orders,u.customers,u.products]),o=w.useMemo(()=>{const t=[];return u.orders.slice(0,5).forEach(s=>{t.push({id:`order-${s.id}`,type:"order",message:`New order #${s.id} for $${s.total.toFixed(2)}`,timestamp:s.createdAt,read:!1})}),u.products.filter(s=>s.stockQuantity<(s.lowStockThreshold||10)).slice(0,3).forEach(s=>{t.push({id:`stock-${s.id}`,type:"inventory",message:`Low stock alert: ${s.name} (${s.stockQuantity} units left)`,timestamp:new Date().toISOString(),read:!1})}),t.sort((s,r)=>new Date(r.timestamp).getTime()-new Date(s.timestamp).getTime()),t.slice(0,10)},[u.orders,u.products]),[f,h]=w.useState(o),[p,N]=w.useState(()=>o.filter(t=>!t.read).length);w.useEffect(()=>{const t=ts.channel("dashboard-changes").on("postgres_changes",{event:"*",schema:"public",table:"orders"},s=>{if(s.eventType==="INSERT"){const r=s.new,c={id:`order-${r.id}`,type:"order",message:`New order #${r.id} for $${Number(r.total).toFixed(2)}`,timestamp:r.created_at,read:!1};h(i=>[c,...i].slice(0,10)),N(i=>i+1)}}).subscribe();return()=>{t.unsubscribe()}},[]);const v=t=>{switch(t){case"order":return e.jsx(re,{className:"h-4 w-4 text-emerald-500"});case"inventory":return e.jsx(ce,{className:"h-4 w-4 text-amber-500"});case"user":return e.jsx(q,{className:"h-4 w-4 text-blue-500"});case"partner":return e.jsx(as,{className:"h-4 w-4 text-purple-500"});default:return e.jsx(ge,{className:"h-4 w-4 text-slate-400"})}},a=t=>{const s=new Date(t),c=Math.floor((new Date().getTime()-s.getTime())/1e3);return c<60?"Just now":c<3600?`${Math.floor(c/60)}m ago`:c<86400?`${Math.floor(c/3600)}h ago`:`${Math.floor(c/86400)}d ago`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Dashboard Overview"}),e.jsx("p",{className:"text-slate-500",children:"Real-time business insights"})]}),e.jsxs("button",{className:"relative p-2 text-slate-600 hover:text-gold-600 hover:bg-gold-50 rounded-xl transition-colors",children:[e.jsx(bs,{className:"h-6 w-6"}),p>0&&e.jsx("span",{className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:p})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 mb-1",children:"30-Day Revenue"}),e.jsxs("p",{className:"text-2xl font-semibold text-slate-900",children:["$",x.totalRevenue.toFixed(2)]})]}),e.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:e.jsx(re,{className:"h-5 w-5 text-emerald-600"})})]}),e.jsxs("div",{className:`flex items-center text-sm ${x.revenueChange>=0?"text-emerald-600":"text-red-600"}`,children:[x.revenueChange>=0?e.jsx(ae,{className:"h-4 w-4 mr-1"}):e.jsx(de,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"font-medium",children:[Math.abs(x.revenueChange).toFixed(1),"%"]}),e.jsx("span",{className:"text-slate-400 ml-1",children:"vs last month"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 mb-1",children:"Orders"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:x.totalOrders})]}),e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(H,{className:"h-5 w-5 text-blue-600"})})]}),e.jsxs("div",{className:`flex items-center text-sm ${x.ordersChange>=0?"text-emerald-600":"text-red-600"}`,children:[x.ordersChange>=0?e.jsx(ae,{className:"h-4 w-4 mr-1"}):e.jsx(de,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"font-medium",children:[Math.abs(x.ordersChange).toFixed(1),"%"]}),e.jsx("span",{className:"text-slate-400 ml-1",children:"vs last month"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 mb-1",children:"New Customers"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:x.newCustomers})]}),e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(q,{className:"h-5 w-5 text-purple-600"})})]}),e.jsxs("div",{className:`flex items-center text-sm ${x.customersChange>=0?"text-emerald-600":"text-red-600"}`,children:[x.customersChange>=0?e.jsx(ae,{className:"h-4 w-4 mr-1"}):e.jsx(de,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"font-medium",children:[Math.abs(x.customersChange).toFixed(1),"%"]}),e.jsx("span",{className:"text-slate-400 ml-1",children:"vs last month"})]})]}),e.jsxs("div",{className:`p-6 rounded-xl border ${x.lowStockCount>0?"bg-amber-50 border-amber-200":"bg-white border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 mb-1",children:"Low Stock Alerts"}),e.jsx("p",{className:`text-2xl font-semibold ${x.lowStockCount>0?"text-amber-600":"text-slate-900"}`,children:x.lowStockCount})]}),e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${x.lowStockCount>0?"bg-amber-100":"bg-slate-100"}`,children:e.jsx(ce,{className:`h-5 w-5 ${x.lowStockCount>0?"text-amber-600":"text-slate-600"}`})})]}),e.jsx("p",{className:"text-sm text-slate-500",children:x.lowStockCount>0?"Products need attention":"All stock levels healthy"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Recent Activity"}),e.jsx(Y,{to:"/admin/orders",className:"text-sm text-slate-600 hover:text-slate-900",children:"View all →"})]}),e.jsx("div",{className:"space-y-2",children:f.length>0?f.map(t=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${t.read?"bg-slate-50":"bg-slate-100"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center border border-slate-200",children:v(t.type)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 text-sm",children:t.message}),e.jsx("p",{className:"text-sm text-slate-500",children:a(t.timestamp)})]})]}),!t.read&&e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"})]},t.id)):e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No recent activity"})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Y,{to:"/admin/products/new",className:"flex items-center space-x-3 p-3 hover:bg-slate-50 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:e.jsx(H,{className:"h-4 w-4 text-slate-600"})}),e.jsx("span",{className:"font-medium text-slate-700",children:"Add New Product"})]}),e.jsxs(Y,{to:"/admin/orders",className:"flex items-center space-x-3 p-3 hover:bg-slate-50 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:e.jsx(re,{className:"h-4 w-4 text-slate-600"})}),e.jsx("span",{className:"font-medium text-slate-700",children:"View Orders"})]}),e.jsxs(Y,{to:"/admin/invitation-codes",className:"flex items-center space-x-3 p-3 hover:bg-slate-50 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:e.jsx(q,{className:"h-4 w-4 text-slate-600"})}),e.jsx("span",{className:"font-medium text-slate-700",children:"Generate Invite Code"})]}),x.lowStockCount>0&&e.jsxs(Y,{to:"/admin/inventory",className:"flex items-center space-x-3 p-3 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:e.jsx(ce,{className:"h-4 w-4 text-amber-600"})}),e.jsxs("span",{className:"font-medium text-amber-700",children:["Restock Inventory (",x.lowStockCount,")"]})]})]})]})]})]})}function Ct(){const[u,x]=w.useState(!0),{logout:o,user:f}=ke(),h=ls(),p=[{path:"/admin",label:"Dashboard",icon:rs},{path:"/admin/products",label:"Products",icon:H},{path:"/admin/orders",label:"Orders",icon:ns},{path:"/admin/inventory",label:"Inventory",icon:H},{path:"/admin/customers",label:"Customers",icon:Cs},{path:"/admin/partners",label:"Partners",icon:q},{path:"/admin/partner-network",label:"Partner Network",icon:fe},{path:"/admin/partner-analytics",label:"Analytics",icon:$e},{path:"/admin/invitation-codes",label:"Invitation Codes",icon:Ae},{path:"/admin/qr-codes",label:"QR Codes",icon:Ne},{path:"/admin/settings",label:"Settings",icon:Us}];return e.jsxs("div",{className:"min-h-screen bg-white flex relative",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none z-0 bg-[radial-gradient(ellipse_at_top_left,_rgba(212,175,55,0.03)_0%,_rgba(255,255,255,1)_80%)]"}),e.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white border-r border-[#D4AF37]/20 transform transition-transform duration-300 shadow-[0_0_40px_rgba(0,0,0,0.02)] ${u?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:e.jsxs("div",{className:"h-full flex flex-col relative z-20",children:[e.jsx("div",{className:"p-6 border-b border-[#D4AF37]/20",children:e.jsxs(Y,{to:"/",className:"flex items-center gap-3 group",children:[e.jsx("img",{src:"/brand-logo-gold.png",alt:"Logo",className:"h-12 w-auto group-hover:scale-105 transition-transform duration-500"}),e.jsx("span",{className:"text-[10px] uppercase tracking-[0.3em] text-[#AA771C] font-bold",children:"Admin"})]})}),e.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:p.map(N=>e.jsxs(Y,{to:N.path,className:`flex items-center space-x-3 px-4 py-3 text-[10px] font-bold tracking-[0.15em] uppercase transition-all duration-300 border ${h.pathname===N.path?"bg-[#111] text-[#D4AF37] border-[#D4AF37]/30 shadow-md":"text-slate-400 hover:text-[#AA771C] hover:bg-slate-50 hover:border-[#D4AF37]/10 border-transparent"}`,children:[e.jsx(N.icon,{className:"h-4 w-4"}),e.jsx("span",{children:N.label})]},N.path))}),e.jsxs("div",{className:"p-4 border-t border-[#D4AF37]/20 bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-[#D4AF37]/10 mb-3 shadow-sm",children:[e.jsx("div",{className:"w-8 h-8 bg-white border border-[#D4AF37]/30 flex items-center justify-center",children:e.jsx("span",{className:"text-[#D4AF37] font-serif text-sm",children:f?.name?.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-serif text-slate-900 text-sm truncate",children:f?.name}),e.jsx("p",{className:"text-[9px] tracking-widest text-slate-400 truncate uppercase",children:f?.email})]})]}),e.jsxs("button",{onClick:o,className:"flex items-center justify-center space-x-3 w-full px-4 py-3 text-[10px] font-bold tracking-[0.2em] uppercase text-slate-400 hover:text-[#AA771C] transition-colors border border-transparent hover:border-[#D4AF37]/30 hover:bg-slate-50",children:[e.jsx(is,{className:"h-4 w-4"}),e.jsx("span",{children:"LOGOUT"})]})]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 relative z-10",children:[e.jsxs("header",{className:"bg-white/80 backdrop-blur-md border-b border-[#D4AF37]/20 px-8 py-4 flex items-center justify-between sticky top-0 z-40",children:[e.jsx("button",{onClick:()=>x(!u),className:"lg:hidden p-2 text-slate-400 hover:text-[#AA771C] transition-colors",children:u?e.jsx(ne,{className:"h-5 w-5"}):e.jsx(cs,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-serif text-slate-900 hidden sm:block tracking-tight",children:"Dashboard"}),e.jsx(Y,{to:"/",className:"px-6 py-2.5 text-[10px] font-bold tracking-[0.2em] uppercase text-[#AA771C] border border-[#D4AF37]/30 hover:border-[#D4AF37] transition-all duration-300",children:"VIEW SITE"})]}),e.jsx("main",{className:"flex-1 p-8 md:p-12 overflow-auto",children:e.jsxs(ds,{children:[e.jsx(Q,{path:"/",element:e.jsx(dt,{})}),e.jsx(Q,{path:"/products",element:e.jsx(Zs,{})}),e.jsx(Q,{path:"/inventory",element:e.jsx(rt,{})}),e.jsx(Q,{path:"/orders",element:e.jsx(at,{})}),e.jsx(Q,{path:"/customers",element:e.jsx(lt,{})}),e.jsx(Q,{path:"/partners",element:e.jsx(et,{})}),e.jsx(Q,{path:"/partner-network",element:e.jsx(st,{})}),e.jsx(Q,{path:"/partner-analytics",element:e.jsx(it,{})}),e.jsx(Q,{path:"/invitation-codes",element:e.jsx(nt,{})}),e.jsx(Q,{path:"/qr-codes",element:e.jsx(tt,{})}),e.jsx(Q,{path:"/settings",element:e.jsx(ct,{})})]})})]})]})}export{Ct as AdminDashboard};
